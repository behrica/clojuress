<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.10">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>clojisr.v1.tutorial</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="clojisr.v1.tutorial_files/libs/clipboard/clipboard.min.js"></script>
<script src="clojisr.v1.tutorial_files/libs/quarto-html/quarto.js"></script>
<script src="clojisr.v1.tutorial_files/libs/quarto-html/popper.min.js"></script>
<script src="clojisr.v1.tutorial_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="clojisr.v1.tutorial_files/libs/quarto-html/anchor.min.js"></script>
<link href="clojisr.v1.tutorial_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="clojisr.v1.tutorial_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="clojisr.v1.tutorial_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="clojisr.v1.tutorial_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="clojisr.v1.tutorial_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link rel="icon" href="data:,">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#clojisr-tutorial" id="toc-clojisr-tutorial" class="nav-link active" data-scroll-target="#clojisr-tutorial">Clojisr tutorial</a>
  <ul>
  <li><a href="#basic-examples" id="toc-basic-examples" class="nav-link" data-scroll-target="#basic-examples">Basic examples</a></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions">Functions</a></li>
  <li><a href="#r-dataframes-and-tech.ml.dataset-datasets" id="toc-r-dataframes-and-tech.ml.dataset-datasets" class="nav-link" data-scroll-target="#r-dataframes-and-tech.ml.dataset-datasets">R dataframes and tech.ml.dataset datasets</a></li>
  <li><a href="#r-objects" id="toc-r-objects" class="nav-link" data-scroll-target="#r-objects">R objects</a></li>
  <li><a href="#generating-code" id="toc-generating-code" class="nav-link" data-scroll-target="#generating-code">Generating code</a></li>
  <li><a href="#running-generated-code" id="toc-running-generated-code" class="nav-link" data-scroll-target="#running-generated-code">Running generated code</a></li>
  <li><a href="#requiring-r-packages" id="toc-requiring-r-packages" class="nav-link" data-scroll-target="#requiring-r-packages">Requiring R packages</a></li>
  <li><a href="#data-visualization" id="toc-data-visualization" class="nav-link" data-scroll-target="#data-visualization">Data visualization</a></li>
  <li><a href="#intermediary-representation-as-java-objects." id="toc-intermediary-representation-as-java-objects." class="nav-link" data-scroll-target="#intermediary-representation-as-java-objects.">Intermediary representation as Java objects.</a></li>
  <li><a href="#more-data-conversion-examples" id="toc-more-data-conversion-examples" class="nav-link" data-scroll-target="#more-data-conversion-examples">More data conversion examples</a>
  <ul class="collapse">
  <li><a href="#basic-types-convertion-clj-r-clj" id="toc-basic-types-convertion-clj-r-clj" class="nav-link" data-scroll-target="#basic-types-convertion-clj-r-clj">Basic types convertion clj-&gt;r-&gt;clj</a></li>
  <li><a href="#various-r-objects" id="toc-various-r-objects" class="nav-link" data-scroll-target="#various-r-objects">Various R objects</a></li>
  </ul></li>
  <li><a href="#inspecting-r-functions" id="toc-inspecting-r-functions" class="nav-link" data-scroll-target="#inspecting-r-functions">Inspecting R functions</a></li>
  <li><a href="#r-function-arglists" id="toc-r-function-arglists" class="nav-link" data-scroll-target="#r-function-arglists">R-function-arglists</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">




<style></style>
<style>.printedClojure .sourceCode {
  background-color: transparent;
  border-style: none;
}
</style>
<style>.clay-limit-image-width .clay-image {max-width: 100%}
</style>
<script src="clojisr.v1.tutorial_files/md-default1.js" type="text/javascript"></script>
<script src="clojisr.v1.tutorial_files/md-default2.js" type="text/javascript"></script>
<div class="sourceClojure">
<div class="sourceCode" id="cb1"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">ns</span> clojisr.v1.tutorial</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  (<span class="at">:require</span> [tech.v3.dataset <span class="at">:as</span> dataset]</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>            [clojisr.v1.r <span class="at">:as</span> r]</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>            [scicloj.kindly.v4.kind <span class="at">:as</span> kind]</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>            [scicloj.kindly.v4.api <span class="at">:as</span> kindly]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="clojisr-tutorial" class="level1">
<h1>Clojisr tutorial</h1>
<section id="basic-examples" class="level2">
<h2 class="anchored" data-anchor-id="basic-examples">Basic examples</h2>
<p>Let us start by some basic usage examples of Clojisr.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb2"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">require</span> '[clojisr.v1.r <span class="at">:as</span> r <span class="at">:refer</span> [r eval-r-&gt;java r-&gt;java java-&gt;r java-&gt;clj java-&gt;native-clj clj-&gt;java r-&gt;clj clj-&gt;r -&gt;code r+ colon require-r]]</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>         '[clojisr.v1.robject <span class="at">:as</span> robject]</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>         '[clojisr.v1.session <span class="at">:as</span> session]</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>         '[tech.v3.dataset <span class="at">:as</span> dataset])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>First, let us make sure that we use the Rserve backend (in case we were using another engine instead earlier), and that there are no R sessions currently running. This is typically not needed if you just started working. Here, we do it just in case.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb3"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>(r/set-default-session-type! <span class="at">:rserve</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb4"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:session-type</span> <span class="at">:rserve</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb5"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>(r/discard-all-sessions)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb6"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>{}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now let us run some R code, and keep a Clojure handle to the return value.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb7"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> x </span>(r <span class="st">"1+2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The thing we created is something called an ROBject.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb8"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">class</span> x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb9"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>clojisr.v1.robject.RObject</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If we wish, we can convert an ROBject to Clojure:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb10"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>(r-&gt;clj x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb11"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">3.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us see more examples of creating ROBjects and converting them to Clojure:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb12"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> <span class="st">"list(A=1,B=2,'#123strange&lt;text&gt; ()'=3)"</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>     r</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>     r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb13"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:A</span> [<span class="fl">1.0</span>], <span class="at">:B</span> [<span class="fl">2.0</span>], <span class="st">"#123strange&lt;text&gt; ()"</span> [<span class="fl">3.0</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the other direction, we can convert Clojure data to R data. Note that <code>nil</code> is turned to <code>NA</code>.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb14"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> [<span class="dv">1</span> <span class="va">nil</span> <span class="dv">3</span>]</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    clj-&gt;r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb15"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">1</span> NA  <span class="dv">3</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can run code on a separate R session (specify session-args which are different than the default ones).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb16"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1+2"</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    (r <span class="at">:session-args</span> {<span class="at">:session-name</span> <span class="st">"mysession"</span>})</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb17"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">3.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="functions" class="level2">
<h2 class="anchored" data-anchor-id="functions">Functions</h2>
<p>An R function is also a Clojure function.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb18"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> f </span>(r <span class="st">"function(x) x*10"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us apply it to Clojure data (implicitly converting that data to R).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb19"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="dv">5</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb20"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">50.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can also apply it to R data.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb21"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"5*5"</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb22"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">250.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Functions can get named arguments. Here we pass the <code>na.rm</code> argument, that tells R whether to remove missing values whenn computing the mean.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb23"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>(r-&gt;clj ((r <span class="st">"mean"</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>         [<span class="dv">1</span> <span class="va">nil</span> <span class="dv">3</span>]</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">:na.rm</span> <span class="va">true</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb24"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">2.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Another example:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb25"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [f (r <span class="st">"function(w,x,y=10,z=20) w+x+y+z"</span>)]</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;&gt;</span> [(f <span class="dv">1</span> <span class="dv">2</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>        (f <span class="dv">1</span> <span class="dv">2</span> <span class="at">:y</span> <span class="dv">100</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>        (f <span class="dv">1</span> <span class="dv">2</span> <span class="at">:z</span> <span class="dv">100</span>)]</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>       (<span class="kw">map</span> r-&gt;clj)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb26"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>([<span class="fl">33.0</span>] [<span class="fl">123.0</span>] [<span class="fl">113.0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Some functions are already created in Clojisr and given special names for convenience. Here are some examples:</p>
<p>R addition:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb27"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> (r+ <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>     r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb28"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">6</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>R colon (<code>:</code>), for creating a range of integers, like <code>0:9</code>:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb29"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>(r-&gt;clj (colon <span class="dv">0</span> <span class="dv">9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb30"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="r-dataframes-and-tech.ml.dataset-datasets" class="level2">
<h2 class="anchored" data-anchor-id="r-dataframes-and-tech.ml.dataset-datasets">R dataframes and tech.ml.dataset datasets</h2>
<p>At Clojure, we have a structure that is equivalent to R dataframes: a <a href="https://github.com/techascent/tech.ml.dataset">tech.ml.dataset</a> dataset.</p>
<p>Let us create such a dataset, pass it to an R function to compute the row means, and then convert the return value back to Clojure.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb31"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [row-means (r <span class="st">"function(data) rowMeans(data)"</span>)]</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> {<span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]}</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>      dataset/-&gt;dataset</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>      row-means</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>      r-&gt;clj))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb32"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">2.5</span> <span class="fl">3.5</span> <span class="fl">4.5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us see some more dataset proccessing through R.</p>
<p>Loading the R package <a href="https://dplyr.tidyverse.org/">dplyr</a> (assuming it is installed).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb33"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>(r <span class="st">"library(dplyr)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb34"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"dplyr"</span>     <span class="st">"Rserve"</span>    <span class="st">"stats"</span>     <span class="st">"graphics"</span>  <span class="st">"grDevices"</span> <span class="st">"utils"</span>    </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">7</span>] <span class="st">"datasets"</span>  <span class="st">"methods"</span>   <span class="st">"base"</span>     </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Using dplyr to process some Clojure dataset, and convert back to the resulting dataset.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb35"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [filter-by-x  (r <span class="st">"function(data) filter(data, x&gt;=2)"</span>)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>      add-z-column (r <span class="st">"function(data) mutate(data, z=x+y)"</span>)]</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> {<span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]}</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>      dataset/-&gt;dataset</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>      filter-by-x</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>      add-z-column</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>      r-&gt;clj))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>_unnamed [2 3]:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">:x</th>
<th style="text-align: right;">:y</th>
<th style="text-align: right;">:z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">9</td>
</tr>
</tbody>
</table>
</div>
<p><a href="https://tibble.tidyverse.org">Tibbles</a>, which are a more recent R dataframe notion, are also supported, as a special case of data frames.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb36"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>(r <span class="st">"library(tibble)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb37"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">"tibble"</span>    <span class="st">"dplyr"</span>     <span class="st">"Rserve"</span>    <span class="st">"stats"</span>     <span class="st">"graphics"</span>  <span class="st">"grDevices"</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] <span class="st">"utils"</span>     <span class="st">"datasets"</span>  <span class="st">"methods"</span>   <span class="st">"base"</span>     </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb38"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [tibble (r <span class="st">"tibble"</span>)]</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>   (tibble</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb39"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a># A tibble: <span class="dv">3</span> × <span class="dv">2</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>      x     y</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  &lt;int&gt; &lt;int&gt;</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">2</span>     <span class="dv">5</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">3</span>     <span class="dv">6</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb40"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [tibble (r <span class="st">"tibble"</span>)]</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> (tibble</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>])</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>      r-&gt;clj</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>      dataset/mapseq-reader))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb41"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>[{<span class="at">:x</span> <span class="dv">1</span>, <span class="at">:y</span> <span class="dv">4</span>} {<span class="at">:x</span> <span class="dv">2</span>, <span class="at">:y</span> <span class="dv">5</span>} {<span class="at">:x</span> <span class="dv">3</span>, <span class="at">:y</span> <span class="dv">6</span>}]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="r-objects" class="level2">
<h2 class="anchored" data-anchor-id="r-objects">R objects</h2>
<p>Clojisr holds handles to R objects, that are stored in memory at the R session, where they are assigned random names.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb42"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> one+two </span>(r <span class="st">"1+2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb43"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">class</span> one+two)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb44"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>clojisr.v1.robject.RObject</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The name of an object is the place where it is held at R (inside an R <a href="http://adv-r.had.co.nz/Environments.html">evnironment</a> called <code>.MEM</code>).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb45"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">:object-name</span> one+two)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb46"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$xe0137637ad5c40cd"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="generating-code" class="level2">
<h2 class="anchored" data-anchor-id="generating-code">Generating code</h2>
<p>Let us see the mechanism by which clojisr generates R code, and the rules defining it.</p>
<p>Since we are playing a bit with the internals here, we will need a reference to the R session:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb47"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> session</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  (session/fetch-or-make <span class="va">nil</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For the following examples, we will use some <strong>dummy</strong> handles to R objects with given names:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb48"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> x </span>(robject/-&gt;RObject <span class="st">"robject_x"</span> session <span class="va">nil</span> <span class="va">nil</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb49"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> y </span>(robject/-&gt;RObject <span class="st">"robject_y"</span> session <span class="va">nil</span> <span class="va">nil</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>.. and some <strong>real</strong> handles to R objects:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb50"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> minus-eleven </span>(r <span class="st">"-11"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb51"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> abs </span>(r <span class="st">"abs"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The function <code>-&gt;code</code> generates R code according to a certain set of rules. Here we describe some of these rules briefly. We also wrote a dedicated tutorial about the rule set more thoroughly.</p>
<p>For an ROBject, the generated code is just the ROBject name.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb52"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb53"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="st">"robject_x"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a clojure value, we use some form analysis and generate proper R string or values.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb54"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code <span class="st">"hello"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb55"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="st">"</span><span class="sc">\"</span><span class="st">hello</span><span class="sc">\"</span><span class="st">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb56"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb57"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="st">"c(1L,2L,3L)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a symbol, we generate the code with the corresponding R symbol.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb58"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code <span class="at">'x</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb59"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="st">"x"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A sequential structure (list, vector, etc.) can be interpreted as a compound expression, for which code generation is defined accorting to the first list element.</p>
<p>For a list beginning with the symbol <code>'function</code>, we generate an R function definition.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb60"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb61"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {x}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a vector instead of list, we create R vector.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb62"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '[function [x y] x])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb63"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="st">"c(function,c(x,y),x)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a list beginning with the symbol <code>'formula</code>, we generate an R <code>~</code>-formula.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb64"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(formula x y))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb65"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="st">"(x~y)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a list beginning with a symbol known to be a binary operator, we generate nested calls.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb66"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(<span class="kw">+</span> x y z))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb67"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="st">"((x+y)+z)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a list beginning with another symbol, we generate a function call with that symbol as the function name.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb68"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(f x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb69"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="st">"f(x)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a list beginning with an R object that is a function, we generate a function call with that object as the function. If you create the list using the quote sign (<code>'</code>), don’t forget to unquote symbols refering to things you defined on the Clojure side.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb70"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(<span class="at">~abs</span> x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb71"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x91408bea16474cba(x)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>All other sequential things (that is, those not beginning with a symbol or R function) are intepreted as data, converted implicitly R data representation.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb72"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code `(<span class="at">~abs</span> (<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb73"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x91408bea16474cba(c(1L,2L,3L))"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Some more examples, showing how these rules compose:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb74"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (f y)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb75"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {f(y)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb76"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (f <span class="at">~y</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb77"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {f(robject_y)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb78"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (<span class="kw">+</span> x y)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb79"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {(x+y)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb80"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code (<span class="kw">list</span> <span class="at">'function</span> '[x y] (<span class="kw">list</span> <span class="at">'+</span> <span class="at">'x</span> <span class="at">'y</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb81"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {(x+y)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb82"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (<span class="kw">print</span> x) (f x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb83"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {print(x);f(x)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb84"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (<span class="at">~abs</span> x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb85"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {.MEM$x91408bea16474cba(x)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb86"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(<span class="at">~abs</span> <span class="at">~minus-eleven</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb87"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x91408bea16474cba(.MEM$xdb4bfe1abed74aa3)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb88"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(<span class="at">~abs</span> -<span class="dv">11</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb89"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x91408bea16474cba(-11L)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Use syntax quote ` in case you want to use local bindings.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb90"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [minus-ten -<span class="dv">10</span>]</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>        (-&gt;code `(<span class="at">~abs</span> <span class="at">~minus-ten</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb91"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x91408bea16474cba(-10L)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="running-generated-code" class="level2">
<h2 class="anchored" data-anchor-id="running-generated-code">Running generated code</h2>
<p>Clojure forms can be run as R code. Behind the scences, they are turned to R code using the <code>-&gt;code</code> function described above. For example:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb92"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> '(<span class="at">~abs</span> ~(<span class="kw">range</span> -<span class="dv">3</span> <span class="dv">0</span>))</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb93"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span> <span class="dv">2</span> <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Or, equivalently:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb94"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> '(<span class="at">~abs</span> ~(<span class="kw">range</span> -<span class="dv">3</span> <span class="dv">0</span>))</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>    -&gt;code</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb95"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span> <span class="dv">2</span> <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us repeat the basic examples from the beginning of this tutorial, this time generating code rather than writing it as Strings.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb96"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> x </span>(r '(<span class="kw">+</span> <span class="dv">1</span> <span class="dv">2</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb97"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>(r-&gt;clj x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb98"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb99"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> f </span>(r '(function [x] (<span class="kw">*</span> x <span class="dv">10</span>))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb100"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="dv">5</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb101"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">50</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb102"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"5*5"</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb103"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">250.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb104"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [row-means (r '(function [data] (rowMeans data)))]</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> {<span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]}</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>      dataset/-&gt;dataset</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>      row-means</span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>      r-&gt;clj))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb105"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">2.5</span> <span class="fl">3.5</span> <span class="fl">4.5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb106"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>(r '(library dplyr))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb107"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">"tibble"</span>    <span class="st">"dplyr"</span>     <span class="st">"Rserve"</span>    <span class="st">"stats"</span>     <span class="st">"graphics"</span>  <span class="st">"grDevices"</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] <span class="st">"utils"</span>     <span class="st">"datasets"</span>  <span class="st">"methods"</span>   <span class="st">"base"</span>     </span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb108"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [filter-by-x  (r '(function [data] (<span class="kw">filter</span> data (<span class="kw">&gt;=</span> x <span class="dv">2</span>))))</span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>       add-z-column (r '(function [data] (mutate data (<span class="kw">=</span> z (<span class="kw">+</span> x y)))))]</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>   (<span class="kw">-&gt;&gt;</span> {<span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]}</span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>        dataset/-&gt;dataset</span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>        filter-by-x</span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>        add-z-column</span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a>        r-&gt;clj))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>_unnamed [2 3]:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">:x</th>
<th style="text-align: right;">:y</th>
<th style="text-align: right;">:z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">9</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="requiring-r-packages" class="level2">
<h2 class="anchored" data-anchor-id="requiring-r-packages">Requiring R packages</h2>
<p>Sometimes, we want to bring to the Clojure world functions and data from R packages. Here, we try to follow the <a href="https://github.com/cnuernber/libpython-clj/blob/master/test/libpython_clj/require_python_test.clj">require-python</a> syntax of <a href="https://github.com/cnuernber/libpython-clj">libpython-clj</a> (though currently in a less sophisticated way.)</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb109"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>(require-r '[stats <span class="at">:as</span> statz <span class="at">:refer</span> [median]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb110"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb111"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>    r.stats/median</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj</span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb112"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb113"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>    statz/median</span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb114"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb115"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>    median</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb116"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb117"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>(require-r '[datasets <span class="at">:as</span> datasetz <span class="at">:refer</span> [euro]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb118"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb119"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>[r.datasets/euro</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a> datasetz/euro</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a> euro]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb120"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>[        ATS         BEF         DEM         ESP         FIM         FRF </span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>  <span class="fl">13.760300</span>   <span class="fl">40.339900</span>    <span class="fl">1.955830</span>  <span class="fl">166.386000</span>    <span class="fl">5.945730</span>    <span class="fl">6.559570</span> </span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>        IEP         ITL         LUF         NLG         PTE </span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>   <span class="fl">0.787564</span> <span class="fl">1936.270000</span>   <span class="fl">40.339900</span>    <span class="fl">2.203710</span>  <span class="fl">200.482000</span> </span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a>         ATS         BEF         DEM         ESP         FIM         FRF </span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a>  <span class="fl">13.760300</span>   <span class="fl">40.339900</span>    <span class="fl">1.955830</span>  <span class="fl">166.386000</span>    <span class="fl">5.945730</span>    <span class="fl">6.559570</span> </span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a>        IEP         ITL         LUF         NLG         PTE </span>
<span id="cb120-9"><a href="#cb120-9" aria-hidden="true" tabindex="-1"></a>   <span class="fl">0.787564</span> <span class="fl">1936.270000</span>   <span class="fl">40.339900</span>    <span class="fl">2.203710</span>  <span class="fl">200.482000</span> </span>
<span id="cb120-10"><a href="#cb120-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-11"><a href="#cb120-11" aria-hidden="true" tabindex="-1"></a>         ATS         BEF         DEM         ESP         FIM         FRF </span>
<span id="cb120-12"><a href="#cb120-12" aria-hidden="true" tabindex="-1"></a>  <span class="fl">13.760300</span>   <span class="fl">40.339900</span>    <span class="fl">1.955830</span>  <span class="fl">166.386000</span>    <span class="fl">5.945730</span>    <span class="fl">6.559570</span> </span>
<span id="cb120-13"><a href="#cb120-13" aria-hidden="true" tabindex="-1"></a>        IEP         ITL         LUF         NLG         PTE </span>
<span id="cb120-14"><a href="#cb120-14" aria-hidden="true" tabindex="-1"></a>   <span class="fl">0.787564</span> <span class="fl">1936.270000</span>   <span class="fl">40.339900</span>    <span class="fl">2.203710</span>  <span class="fl">200.482000</span> </span>
<span id="cb120-15"><a href="#cb120-15" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb121"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>(require-r '[base <span class="at">:refer</span> [$]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb122"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb123"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> {<span class="at">:a</span> <span class="dv">1</span> <span class="at">:b</span> <span class="dv">2</span>}</span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>    ($ <span class="at">'a</span>)</span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb124"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-visualization" class="level2">
<h2 class="anchored" data-anchor-id="data-visualization">Data visualization</h2>
<p>Functions creating R plots or any plotting objects generated by various R libraries can be wrapped in a way that returns an SVG, BufferedImage or can be saved to a file. All of them accept additional parameters specified in <code>grDevices</code> R package.</p>
<p>Currently there is a bug that sometimes causes axes and labels to disappear when rendered inside a larger HTML.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb125"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>(require-r '[graphics <span class="at">:refer</span> [plot hist]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb126"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb127"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>(require-r '[ggplot2 <span class="at">:refer</span> [ggplot aes geom_point xlab ylab labs]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb128"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb129"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">require</span> '[clojisr.v1.applications.plotting <span class="at">:refer</span> [plot-&gt;svg plot-&gt;file plot-&gt;buffered-image]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>First example, simple plotting function as SVG string.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb130"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>(plot-&gt;svg</span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a> (<span class="kw">fn</span> []</span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>   (<span class="kw">-&gt;&gt;</span> <span class="kw">rand</span></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>        (<span class="kw">repeatedly</span> <span class="dv">30</span>)</span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a>        (reductions <span class="kw">+</span>)</span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a>        (plot <span class="at">:xlab</span> <span class="st">"t"</span></span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">:ylab</span> <span class="st">"y"</span></span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">:type</span> <span class="st">"l"</span>))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!--?xml version="1.0" encoding="UTF-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="504pt" height="504pt" viewbox="0 0 504 504" version="1.1">
<defs>
<g>
<symbol overflow="visible" id="glyph0-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph0-1">
<path style="stroke:none;" d="M 3.296875 -8.671875 C 2.515625 -8.671875 1.78125 -8.3125 1.34375 -7.734375 C 0.796875 -6.953125 0.515625 -5.8125 0.515625 -4.203125 C 0.515625 -1.265625 1.46875 0.28125 3.296875 0.28125 C 5.09375 0.28125 6.078125 -1.265625 6.078125 -4.125 C 6.078125 -5.8125 5.8125 -6.9375 5.25 -7.734375 C 4.8125 -8.328125 4.109375 -8.671875 3.296875 -8.671875 Z M 3.296875 -7.734375 C 4.4375 -7.734375 5 -6.578125 5 -4.21875 C 5 -1.75 4.453125 -0.59375 3.28125 -0.59375 C 2.15625 -0.59375 1.59375 -1.796875 1.59375 -4.1875 C 1.59375 -6.578125 2.15625 -7.734375 3.296875 -7.734375 Z M 3.296875 -7.734375 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-2">
<path style="stroke:none;" d="M 5.71875 -8.515625 L 1.3125 -8.515625 L 0.6875 -3.875 L 1.65625 -3.875 C 2.140625 -4.46875 2.5625 -4.671875 3.234375 -4.671875 C 4.375 -4.671875 5.078125 -3.890625 5.078125 -2.625 C 5.078125 -1.40625 4.375 -0.65625 3.21875 -0.65625 C 2.296875 -0.65625 1.734375 -1.125 1.46875 -2.09375 L 0.421875 -2.09375 C 0.5625 -1.390625 0.6875 -1.0625 0.9375 -0.75 C 1.421875 -0.09375 2.28125 0.28125 3.234375 0.28125 C 4.953125 0.28125 6.15625 -0.96875 6.15625 -2.765625 C 6.15625 -4.453125 5.046875 -5.609375 3.40625 -5.609375 C 2.8125 -5.609375 2.328125 -5.453125 1.84375 -5.09375 L 2.171875 -7.46875 L 5.71875 -7.46875 Z M 5.71875 -8.515625 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-3">
<path style="stroke:none;" d="M 3.109375 -6.1875 L 3.109375 0 L 4.15625 0 L 4.15625 -8.671875 L 3.46875 -8.671875 C 3.09375 -7.34375 2.859375 -7.15625 1.21875 -6.953125 L 1.21875 -6.1875 Z M 3.109375 -6.1875 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-4">
<path style="stroke:none;" d="M 6.078125 -1.046875 L 1.59375 -1.046875 C 1.703125 -1.765625 2.09375 -2.21875 3.125 -2.859375 L 4.328125 -3.53125 C 5.515625 -4.1875 6.125 -5.078125 6.125 -6.140625 C 6.125 -6.859375 5.84375 -7.53125 5.34375 -8 C 4.84375 -8.453125 4.21875 -8.671875 3.40625 -8.671875 C 2.328125 -8.671875 1.53125 -8.296875 1.0625 -7.546875 C 0.75 -7.09375 0.625 -6.546875 0.59375 -5.671875 L 1.65625 -5.671875 C 1.6875 -6.265625 1.765625 -6.609375 1.90625 -6.90625 C 2.1875 -7.421875 2.734375 -7.75 3.375 -7.75 C 4.328125 -7.75 5.046875 -7.0625 5.046875 -6.125 C 5.046875 -5.421875 4.65625 -4.828125 3.90625 -4.390625 L 2.796875 -3.75 C 1.015625 -2.71875 0.5 -1.90625 0.40625 -0.015625 L 6.078125 -0.015625 Z M 6.078125 -1.046875 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-5">
<path style="stroke:none;" d="M 2.65625 -4 L 3.234375 -4 C 4.375 -4 4.984375 -3.453125 4.984375 -2.40625 C 4.984375 -1.3125 4.328125 -0.65625 3.234375 -0.65625 C 2.078125 -0.65625 1.515625 -1.25 1.4375 -2.515625 L 0.390625 -2.515625 C 0.4375 -1.828125 0.546875 -1.375 0.75 -0.984375 C 1.203125 -0.140625 2.03125 0.28125 3.1875 0.28125 C 4.9375 0.28125 6.078125 -0.78125 6.078125 -2.421875 C 6.078125 -3.53125 5.65625 -4.125 4.625 -4.484375 C 5.421875 -4.8125 5.8125 -5.40625 5.8125 -6.28125 C 5.8125 -7.78125 4.84375 -8.671875 3.234375 -8.671875 C 1.515625 -8.671875 0.59375 -7.71875 0.5625 -5.875 L 1.625 -5.875 C 1.625 -6.40625 1.6875 -6.703125 1.8125 -6.96875 C 2.046875 -7.46875 2.578125 -7.75 3.234375 -7.75 C 4.171875 -7.75 4.734375 -7.1875 4.734375 -6.25 C 4.734375 -5.640625 4.53125 -5.265625 4.0625 -5.0625 C 3.765625 -4.9375 3.390625 -4.890625 2.65625 -4.890625 Z M 2.65625 -4 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-6">
<path style="stroke:none;" d="M 3.046875 -6.28125 L 2.015625 -6.28125 L 2.015625 -8.015625 L 1.015625 -8.015625 L 1.015625 -6.28125 L 0.171875 -6.28125 L 0.171875 -5.46875 L 1.015625 -5.46875 L 1.015625 -0.71875 C 1.015625 -0.078125 1.453125 0.28125 2.234375 0.28125 C 2.5 0.28125 2.71875 0.25 3.046875 0.1875 L 3.046875 -0.640625 C 2.90625 -0.609375 2.765625 -0.59375 2.5625 -0.59375 C 2.140625 -0.59375 2.015625 -0.71875 2.015625 -1.15625 L 2.015625 -5.46875 L 3.046875 -5.46875 Z M 3.046875 -6.28125 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph1-1">
<path style="stroke:none;" d="M -8.671875 -3.296875 C -8.671875 -2.515625 -8.3125 -1.78125 -7.734375 -1.34375 C -6.953125 -0.796875 -5.8125 -0.515625 -4.203125 -0.515625 C -1.265625 -0.515625 0.28125 -1.46875 0.28125 -3.296875 C 0.28125 -5.09375 -1.265625 -6.078125 -4.125 -6.078125 C -5.8125 -6.078125 -6.9375 -5.8125 -7.734375 -5.25 C -8.328125 -4.8125 -8.671875 -4.109375 -8.671875 -3.296875 Z M -7.734375 -3.296875 C -7.734375 -4.4375 -6.578125 -5 -4.21875 -5 C -1.75 -5 -0.59375 -4.453125 -0.59375 -3.28125 C -0.59375 -2.15625 -1.796875 -1.59375 -4.1875 -1.59375 C -6.578125 -1.59375 -7.734375 -2.15625 -7.734375 -3.296875 Z M -7.734375 -3.296875 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-2">
<path style="stroke:none;" d="M -1.046875 -6.078125 L -1.046875 -1.59375 C -1.765625 -1.703125 -2.21875 -2.09375 -2.859375 -3.125 L -3.53125 -4.328125 C -4.1875 -5.515625 -5.078125 -6.125 -6.140625 -6.125 C -6.859375 -6.125 -7.53125 -5.84375 -8 -5.34375 C -8.453125 -4.84375 -8.671875 -4.21875 -8.671875 -3.40625 C -8.671875 -2.328125 -8.296875 -1.53125 -7.546875 -1.0625 C -7.09375 -0.75 -6.546875 -0.625 -5.671875 -0.59375 L -5.671875 -1.65625 C -6.265625 -1.6875 -6.609375 -1.765625 -6.90625 -1.90625 C -7.421875 -2.1875 -7.75 -2.734375 -7.75 -3.375 C -7.75 -4.328125 -7.0625 -5.046875 -6.125 -5.046875 C -5.421875 -5.046875 -4.828125 -4.65625 -4.390625 -3.90625 L -3.75 -2.796875 C -2.71875 -1.015625 -1.90625 -0.5 -0.015625 -0.40625 L -0.015625 -6.078125 Z M -1.046875 -6.078125 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-3">
<path style="stroke:none;" d="M -2.09375 -3.921875 L 0 -3.921875 L 0 -4.984375 L -2.09375 -4.984375 L -2.09375 -6.234375 L -3.046875 -6.234375 L -3.046875 -4.984375 L -8.671875 -4.984375 L -8.671875 -4.203125 L -3.21875 -0.34375 L -2.09375 -0.34375 Z M -3.046875 -3.921875 L -3.046875 -1.265625 L -6.875 -3.921875 Z M -3.046875 -3.921875 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-4">
<path style="stroke:none;" d="M -6.421875 -5.96875 C -7.84375 -5.765625 -8.671875 -4.859375 -8.671875 -3.5625 C -8.671875 -2.625 -8.21875 -1.78125 -7.4375 -1.28125 C -6.59375 -0.75 -5.53125 -0.515625 -3.953125 -0.515625 C -2.5 -0.515625 -1.578125 -0.71875 -0.796875 -1.234375 C -0.09375 -1.6875 0.28125 -2.4375 0.28125 -3.375 C 0.28125 -4.984375 -0.9375 -6.15625 -2.625 -6.15625 C -4.21875 -6.15625 -5.359375 -5.078125 -5.359375 -3.546875 C -5.359375 -2.71875 -5.046875 -2.046875 -4.40625 -1.59375 C -6.546875 -1.609375 -7.734375 -2.28125 -7.734375 -3.484375 C -7.734375 -4.234375 -7.265625 -4.75 -6.421875 -4.921875 Z M -4.421875 -3.421875 C -4.421875 -4.4375 -3.703125 -5.078125 -2.546875 -5.078125 C -1.453125 -5.078125 -0.65625 -4.359375 -0.65625 -3.390625 C -0.65625 -2.40625 -1.484375 -1.65625 -2.59375 -1.65625 C -3.671875 -1.65625 -4.421875 -2.375 -4.421875 -3.421875 Z M -4.421875 -3.421875 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-5">
<path style="stroke:none;" d="M -4.578125 -4.6875 C -5.109375 -5.578125 -5.546875 -5.859375 -6.359375 -5.859375 C -7.734375 -5.859375 -8.671875 -4.8125 -8.671875 -3.296875 C -8.671875 -1.796875 -7.734375 -0.75 -6.375 -0.75 C -5.546875 -0.75 -5.125 -1.015625 -4.578125 -1.890625 C -4.078125 -0.921875 -3.375 -0.4375 -2.40625 -0.4375 C -0.828125 -0.4375 0.28125 -1.609375 0.28125 -3.296875 C 0.28125 -4.984375 -0.828125 -6.15625 -2.40625 -6.15625 C -3.375 -6.15625 -4.078125 -5.671875 -4.578125 -4.6875 Z M -7.734375 -3.296875 C -7.734375 -4.203125 -7.203125 -4.78125 -6.34375 -4.78125 C -5.515625 -4.78125 -4.984375 -4.1875 -4.984375 -3.296875 C -4.984375 -2.40625 -5.515625 -1.828125 -6.359375 -1.828125 C -7.203125 -1.828125 -7.734375 -2.40625 -7.734375 -3.296875 Z M -4.09375 -3.296875 C -4.09375 -4.359375 -3.390625 -5.078125 -2.390625 -5.078125 C -1.34375 -5.078125 -0.65625 -4.375 -0.65625 -3.28125 C -0.65625 -2.25 -1.375 -1.53125 -2.375 -1.53125 C -3.40625 -1.53125 -4.09375 -2.234375 -4.09375 -3.296875 Z M -4.09375 -3.296875 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-6">
<path style="stroke:none;" d="M -6.1875 -3.109375 L 0 -3.109375 L 0 -4.15625 L -8.671875 -4.15625 L -8.671875 -3.46875 C -7.34375 -3.09375 -7.15625 -2.859375 -6.953125 -1.21875 L -6.1875 -1.21875 Z M -6.1875 -3.109375 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-7">
<path style="stroke:none;" d="M -6.28125 -4.65625 L -1.390625 -2.921875 L -6.28125 -1.3125 L -6.28125 -0.234375 L 0.03125 -2.359375 L 1.015625 -1.984375 C 1.46875 -1.8125 1.625 -1.59375 1.625 -1.171875 C 1.625 -1.015625 1.609375 -0.859375 1.5625 -0.640625 L 2.453125 -0.640625 C 2.5625 -0.859375 2.609375 -1.0625 2.609375 -1.3125 C 2.609375 -1.640625 2.515625 -1.984375 2.3125 -2.25 C 2.09375 -2.5625 1.828125 -2.75 1.3125 -2.9375 L -6.28125 -5.734375 Z M -6.28125 -4.65625 "></path>
</symbol>
</g>
</defs>
<g id="surface1">
<rect x="0" y="0" width="504" height="504" style="fill:rgb(100%,100%,100%);fill-opacity:1;stroke:none;"></rect>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 74.398438 416.800781 L 87.640625 400.570312 L 100.882812 383.054688 L 114.125 373.742188 L 127.367188 350.859375 L 140.605469 344.136719 L 153.847656 335.003906 L 167.089844 327.316406 L 180.332031 313.777344 L 193.574219 292.023438 L 206.8125 280.660156 L 220.054688 255.765625 L 233.296875 250.480469 L 246.539062 246.566406 L 259.78125 239.097656 L 273.019531 215.789062 L 286.261719 193.835938 L 299.503906 192.925781 L 312.746094 179.1875 L 325.984375 165.945312 L 339.226562 160.820312 L 352.46875 146.953125 L 365.710938 141.046875 L 378.953125 139.292969 L 392.191406 131.101562 L 405.433594 115.039062 L 418.675781 97.800781 L 431.917969 96.78125 L 445.160156 94.011719 L 458.398438 72.800781 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 61.160156 430.558594 L 458.398438 430.558594 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 61.160156 430.558594 L 61.160156 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 127.367188 430.558594 L 127.367188 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 193.574219 430.558594 L 193.574219 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 259.78125 430.558594 L 259.78125 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 325.984375 430.558594 L 325.984375 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 392.191406 430.558594 L 392.191406 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 458.398438 430.558594 L 458.398438 437.761719 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-1" x="57.660156" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-2" x="123.867188" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-3" x="186.574219" y="456.228516"></use>
  <use href="#glyph0-1" x="193.574219" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-3" x="252.78125" y="456.228516"></use>
  <use href="#glyph0-2" x="259.78125" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-4" x="318.984375" y="456.228516"></use>
  <use href="#glyph0-1" x="325.984375" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-4" x="385.191406" y="456.228516"></use>
  <use href="#glyph0-2" x="392.191406" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-5" x="451.398438" y="456.228516"></use>
  <use href="#glyph0-1" x="458.398438" y="456.228516"></use>
</g>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 426.460938 L 59.039062 77.5 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 426.460938 L 51.839844 426.460938 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 376.609375 L 51.839844 376.609375 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 326.757812 L 51.839844 326.757812 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 276.90625 L 51.839844 276.90625 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 227.054688 L 51.839844 227.054688 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 177.203125 L 51.839844 177.203125 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 127.351562 L 51.839844 127.351562 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 77.5 L 51.839844 77.5 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-1" x="41.509766" y="429.960938"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-2" x="41.509766" y="380.109375"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-3" x="41.509766" y="330.257812"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-4" x="41.509766" y="280.40625"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-5" x="41.509766" y="230.554688"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-6" x="41.509766" y="184.203125"></use>
  <use href="#glyph1-1" x="41.509766" y="177.203125"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-6" x="41.509766" y="134.351562"></use>
  <use href="#glyph1-2" x="41.509766" y="127.351562"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-6" x="41.509766" y="84.5"></use>
  <use href="#glyph1-3" x="41.509766" y="77.5"></use>
</g>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 430.558594 L 473.761719 430.558594 L 473.761719 59.039062 L 59.039062 59.039062 Z M 59.039062 430.558594 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-6" x="264.898438" y="485.029297"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-7" x="12.708984" y="247.800781"></use>
</g>
</g>
</svg>

<p>ggplot2 plots (or any other plot objects like lattice) can be also turned into SVG.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb131"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>(plot-&gt;svg</span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a> (<span class="kw">let</span> [x (<span class="kw">repeatedly</span> <span class="dv">99</span> <span class="kw">rand</span>)</span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>       y (<span class="kw">map</span> <span class="kw">+</span></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>              x</span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a>              (<span class="kw">repeatedly</span> <span class="dv">99</span> <span class="kw">rand</span>))]</span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a>   (<span class="kw">-&gt;</span> {<span class="at">:x</span> x <span class="at">:y</span> y}</span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a>       dataset/-&gt;dataset</span>
<span id="cb131-8"><a href="#cb131-8" aria-hidden="true" tabindex="-1"></a>       (ggplot (aes <span class="at">:x</span> x</span>
<span id="cb131-9"><a href="#cb131-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">:y</span> y</span>
<span id="cb131-10"><a href="#cb131-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">:color</span> '(<span class="kw">+</span> x y)</span>
<span id="cb131-11"><a href="#cb131-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">:size</span> '(<span class="kw">/</span> x y)))</span>
<span id="cb131-12"><a href="#cb131-12" aria-hidden="true" tabindex="-1"></a>       (r+ (geom_point)</span>
<span id="cb131-13"><a href="#cb131-13" aria-hidden="true" tabindex="-1"></a>           (xlab <span class="st">"x"</span>)</span>
<span id="cb131-14"><a href="#cb131-14" aria-hidden="true" tabindex="-1"></a>           (ylab <span class="st">"y"</span>)))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!--?xml version="1.0" encoding="UTF-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="504pt" height="504pt" viewbox="0 0 504 504" version="1.1">
<defs>
<g>
<symbol overflow="visible" id="glyph0-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph0-1">
<path style="stroke:none;" d="M 2.421875 -6.359375 C 1.84375 -6.359375 1.3125 -6.09375 0.984375 -5.671875 C 0.578125 -5.109375 0.375 -4.25 0.375 -3.078125 C 0.375 -0.9375 1.078125 0.203125 2.421875 0.203125 C 3.734375 0.203125 4.453125 -0.9375 4.453125 -3.03125 C 4.453125 -4.25 4.265625 -5.078125 3.859375 -5.671875 C 3.53125 -6.109375 3.015625 -6.359375 2.421875 -6.359375 Z M 2.421875 -5.671875 C 3.25 -5.671875 3.671875 -4.828125 3.671875 -3.09375 C 3.671875 -1.28125 3.265625 -0.4375 2.40625 -0.4375 C 1.578125 -0.4375 1.171875 -1.3125 1.171875 -3.0625 C 1.171875 -4.828125 1.578125 -5.671875 2.421875 -5.671875 Z M 2.421875 -5.671875 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-2">
<path style="stroke:none;" d="M 1.6875 -0.921875 L 0.765625 -0.921875 L 0.765625 0 L 1.6875 0 Z M 1.6875 -0.921875 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-3">
<path style="stroke:none;" d="M 2.875 -1.546875 L 2.875 0 L 3.65625 0 L 3.65625 -1.546875 L 4.578125 -1.546875 L 4.578125 -2.234375 L 3.65625 -2.234375 L 3.65625 -6.359375 L 3.078125 -6.359375 L 0.25 -2.359375 L 0.25 -1.546875 Z M 2.875 -2.234375 L 0.921875 -2.234375 L 2.875 -5.046875 Z M 2.875 -2.234375 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-4">
<path style="stroke:none;" d="M 3.4375 -3.359375 C 4.09375 -3.75 4.296875 -4.0625 4.296875 -4.65625 C 4.296875 -5.671875 3.53125 -6.359375 2.421875 -6.359375 C 1.3125 -6.359375 0.546875 -5.671875 0.546875 -4.671875 C 0.546875 -4.0625 0.75 -3.75 1.390625 -3.359375 C 0.671875 -2.984375 0.328125 -2.46875 0.328125 -1.765625 C 0.328125 -0.609375 1.171875 0.203125 2.421875 0.203125 C 3.65625 0.203125 4.515625 -0.609375 4.515625 -1.765625 C 4.515625 -2.46875 4.15625 -2.984375 3.4375 -3.359375 Z M 2.421875 -5.671875 C 3.078125 -5.671875 3.5 -5.28125 3.5 -4.640625 C 3.5 -4.046875 3.0625 -3.65625 2.421875 -3.65625 C 1.765625 -3.65625 1.34375 -4.046875 1.34375 -4.65625 C 1.34375 -5.28125 1.765625 -5.671875 2.421875 -5.671875 Z M 2.421875 -3 C 3.1875 -3 3.71875 -2.484375 3.71875 -1.75 C 3.71875 -0.984375 3.203125 -0.484375 2.40625 -0.484375 C 1.640625 -0.484375 1.125 -1 1.125 -1.734375 C 1.125 -2.5 1.640625 -3 2.421875 -3 Z M 2.421875 -3 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-5">
<path style="stroke:none;" d="M 2.28125 -4.53125 L 2.28125 0 L 3.046875 0 L 3.046875 -6.359375 L 2.546875 -6.359375 C 2.265625 -5.390625 2.09375 -5.25 0.890625 -5.09375 L 0.890625 -4.53125 Z M 2.28125 -4.53125 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-6">
<path style="stroke:none;" d="M 4.453125 -0.765625 L 1.171875 -0.765625 C 1.25 -1.296875 1.53125 -1.625 2.296875 -2.09375 L 3.171875 -2.59375 C 4.046875 -3.0625 4.5 -3.71875 4.5 -4.5 C 4.5 -5.03125 4.28125 -5.53125 3.921875 -5.875 C 3.546875 -6.203125 3.09375 -6.359375 2.5 -6.359375 C 1.703125 -6.359375 1.125 -6.078125 0.78125 -5.53125 C 0.546875 -5.203125 0.453125 -4.796875 0.4375 -4.15625 L 1.21875 -4.15625 C 1.234375 -4.59375 1.296875 -4.84375 1.40625 -5.0625 C 1.59375 -5.4375 2 -5.6875 2.46875 -5.6875 C 3.171875 -5.6875 3.703125 -5.171875 3.703125 -4.484375 C 3.703125 -3.96875 3.40625 -3.53125 2.859375 -3.21875 L 2.046875 -2.75 C 0.75 -2 0.375 -1.40625 0.296875 -0.015625 L 4.453125 -0.015625 Z M 4.453125 -0.765625 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-7">
<path style="stroke:none;" d="M 4.375 -4.703125 C 4.234375 -5.75 3.5625 -6.359375 2.609375 -6.359375 C 1.921875 -6.359375 1.3125 -6.03125 0.9375 -5.453125 C 0.546875 -4.828125 0.375 -4.0625 0.375 -2.90625 C 0.375 -1.828125 0.53125 -1.15625 0.90625 -0.59375 C 1.234375 -0.078125 1.78125 0.203125 2.46875 0.203125 C 3.65625 0.203125 4.515625 -0.6875 4.515625 -1.921875 C 4.515625 -3.09375 3.71875 -3.921875 2.609375 -3.921875 C 1.984375 -3.921875 1.5 -3.6875 1.171875 -3.234375 C 1.171875 -4.796875 1.671875 -5.671875 2.5625 -5.671875 C 3.109375 -5.671875 3.484375 -5.328125 3.609375 -4.703125 Z M 2.5 -3.234375 C 3.25 -3.234375 3.71875 -2.703125 3.71875 -1.859375 C 3.71875 -1.0625 3.1875 -0.484375 2.484375 -0.484375 C 1.765625 -0.484375 1.21875 -1.09375 1.21875 -1.90625 C 1.21875 -2.6875 1.734375 -3.234375 2.5 -3.234375 Z M 2.5 -3.234375 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-8">
<path style="stroke:none;" d="M 4.1875 -6.234375 L 0.96875 -6.234375 L 0.5 -2.84375 L 1.21875 -2.84375 C 1.578125 -3.265625 1.875 -3.421875 2.359375 -3.421875 C 3.203125 -3.421875 3.71875 -2.84375 3.71875 -1.921875 C 3.71875 -1.03125 3.203125 -0.484375 2.359375 -0.484375 C 1.6875 -0.484375 1.265625 -0.828125 1.078125 -1.53125 L 0.3125 -1.53125 C 0.40625 -1.015625 0.5 -0.78125 0.6875 -0.546875 C 1.03125 -0.078125 1.671875 0.203125 2.375 0.203125 C 3.640625 0.203125 4.515625 -0.71875 4.515625 -2.03125 C 4.515625 -3.265625 3.6875 -4.109375 2.5 -4.109375 C 2.0625 -4.109375 1.703125 -4 1.34375 -3.734375 L 1.59375 -5.46875 L 4.1875 -5.46875 Z M 4.1875 -6.234375 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-9">
<path style="stroke:none;" d="M 4.578125 -6.234375 L 0.40625 -6.234375 L 0.40625 -5.46875 L 3.78125 -5.46875 C 2.28125 -3.359375 1.6875 -2.046875 1.21875 0 L 2.046875 0 C 2.390625 -2 3.171875 -3.71875 4.578125 -5.59375 Z M 4.578125 -6.234375 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph1-1">
<path style="stroke:none;" d="M 3.21875 -2.984375 L 5.140625 -5.765625 L 4.109375 -5.765625 L 2.734375 -3.671875 L 1.34375 -5.765625 L 0.296875 -5.765625 L 2.21875 -2.9375 L 0.1875 0 L 1.234375 0 L 2.6875 -2.21875 L 4.140625 0 L 5.203125 0 Z M 3.21875 -2.984375 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-2">
<path style="stroke:none;" d="M 2.59375 -8.015625 C 1.5 -6.578125 0.796875 -4.578125 0.796875 -2.84375 C 0.796875 -1.109375 1.5 0.890625 2.59375 2.328125 L 3.203125 2.328125 C 2.234375 0.765625 1.6875 -1.09375 1.6875 -2.84375 C 1.6875 -4.59375 2.234375 -6.453125 3.203125 -8.015625 Z M 2.59375 -8.015625 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-3">
<path style="stroke:none;" d="M 2.515625 -8.015625 L -0.09375 0.21875 L 0.515625 0.21875 L 3.125 -8.015625 Z M 2.515625 -8.015625 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-4">
<path style="stroke:none;" d="M 4.265625 -5.765625 L 2.671875 -1.28125 L 1.203125 -5.765625 L 0.21875 -5.765625 L 2.171875 0.015625 L 1.8125 0.9375 C 1.65625 1.34375 1.46875 1.5 1.078125 1.5 C 0.921875 1.5 0.796875 1.46875 0.59375 1.4375 L 0.59375 2.25 C 0.78125 2.359375 0.96875 2.390625 1.203125 2.390625 C 1.5 2.390625 1.828125 2.296875 2.0625 2.125 C 2.359375 1.90625 2.515625 1.671875 2.6875 1.203125 L 5.265625 -5.765625 Z M 4.265625 -5.765625 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-5">
<path style="stroke:none;" d="M 1.015625 2.328125 C 2.125 0.890625 2.8125 -1.109375 2.8125 -2.84375 C 2.8125 -4.578125 2.125 -6.578125 1.015625 -8.015625 L 0.421875 -8.015625 C 1.390625 -6.453125 1.921875 -4.59375 1.921875 -2.84375 C 1.921875 -1.09375 1.390625 0.765625 0.421875 2.328125 Z M 1.015625 2.328125 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-6">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph1-7">
<path style="stroke:none;" d="M 5.875 -2.9375 L 3.59375 -2.9375 L 3.59375 -5.21875 L 2.828125 -5.21875 L 2.828125 -2.9375 L 0.546875 -2.9375 L 0.546875 -2.171875 L 2.828125 -2.171875 L 2.828125 0.109375 L 3.59375 0.109375 L 3.59375 -2.171875 L 5.875 -2.171875 Z M 5.875 -2.9375 "></path>
</symbol>
<symbol overflow="visible" id="glyph2-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph2-1">
<path style="stroke:none;" d="M -5.765625 -4.265625 L -1.28125 -2.671875 L -5.765625 -1.203125 L -5.765625 -0.21875 L 0.015625 -2.171875 L 0.9375 -1.8125 C 1.34375 -1.65625 1.5 -1.46875 1.5 -1.078125 C 1.5 -0.921875 1.46875 -0.796875 1.4375 -0.59375 L 2.25 -0.59375 C 2.359375 -0.78125 2.390625 -0.96875 2.390625 -1.203125 C 2.390625 -1.5 2.296875 -1.828125 2.125 -2.0625 C 1.90625 -2.359375 1.671875 -2.515625 1.203125 -2.6875 L -5.765625 -5.265625 Z M -5.765625 -4.265625 "></path>
</symbol>
</g>
<clippath id="clip1">
  <path d="M 37.152344 5.480469 L 436.84375 5.480469 L 436.84375 469.851562 L 37.152344 469.851562 Z M 37.152344 5.480469 "></path>
</clippath>
<clippath id="clip2">
  <path d="M 37.152344 430 L 436.84375 430 L 436.84375 432 L 37.152344 432 Z M 37.152344 430 "></path>
</clippath>
<clippath id="clip3">
  <path d="M 37.152344 315 L 436.84375 315 L 436.84375 317 L 37.152344 317 Z M 37.152344 315 "></path>
</clippath>
<clippath id="clip4">
  <path d="M 37.152344 201 L 436.84375 201 L 436.84375 202 L 37.152344 202 Z M 37.152344 201 "></path>
</clippath>
<clippath id="clip5">
  <path d="M 37.152344 86 L 436.84375 86 L 436.84375 88 L 37.152344 88 Z M 37.152344 86 "></path>
</clippath>
<clippath id="clip6">
  <path d="M 97 5.480469 L 98 5.480469 L 98 469.851562 L 97 469.851562 Z M 97 5.480469 "></path>
</clippath>
<clippath id="clip7">
  <path d="M 189 5.480469 L 191 5.480469 L 191 469.851562 L 189 469.851562 Z M 189 5.480469 "></path>
</clippath>
<clippath id="clip8">
  <path d="M 281 5.480469 L 283 5.480469 L 283 469.851562 L 281 469.851562 Z M 281 5.480469 "></path>
</clippath>
<clippath id="clip9">
  <path d="M 374 5.480469 L 375 5.480469 L 375 469.851562 L 374 469.851562 Z M 374 5.480469 "></path>
</clippath>
<clippath id="clip10">
  <path d="M 37.152344 372 L 436.84375 372 L 436.84375 375 L 37.152344 375 Z M 37.152344 372 "></path>
</clippath>
<clippath id="clip11">
  <path d="M 37.152344 258 L 436.84375 258 L 436.84375 260 L 37.152344 260 Z M 37.152344 258 "></path>
</clippath>
<clippath id="clip12">
  <path d="M 37.152344 143 L 436.84375 143 L 436.84375 145 L 37.152344 145 Z M 37.152344 143 "></path>
</clippath>
<clippath id="clip13">
  <path d="M 37.152344 29 L 436.84375 29 L 436.84375 31 L 37.152344 31 Z M 37.152344 29 "></path>
</clippath>
<clippath id="clip14">
  <path d="M 50 5.480469 L 52 5.480469 L 52 469.851562 L 50 469.851562 Z M 50 5.480469 "></path>
</clippath>
<clippath id="clip15">
  <path d="M 143 5.480469 L 145 5.480469 L 145 469.851562 L 143 469.851562 Z M 143 5.480469 "></path>
</clippath>
<clippath id="clip16">
  <path d="M 235 5.480469 L 237 5.480469 L 237 469.851562 L 235 469.851562 Z M 235 5.480469 "></path>
</clippath>
<clippath id="clip17">
  <path d="M 327 5.480469 L 329 5.480469 L 329 469.851562 L 327 469.851562 Z M 327 5.480469 "></path>
</clippath>
<clippath id="clip18">
  <path d="M 420 5.480469 L 422 5.480469 L 422 469.851562 L 420 469.851562 Z M 420 5.480469 "></path>
</clippath>
<clippath id="clip19">
  <path d="M 453.28125 248.824219 L 470.5625 248.824219 L 470.5625 335.222656 L 453.28125 335.222656 Z M 453.28125 248.824219 "></path>
</clippath>
<image id="image10" width="1" height="300" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAEsCAIAAACNMk6CAAAABmJLR0QA/wD/AP+gvaeTAAAAjklEQVQ4jaWTQRKAMAgDd3ik//R1HuOlji3SjNYjhZAEKNt+BCgQIRRIAQRSi2l5hdr79/q1fqBQVw+ErvyipqGH5eh7fNFJi1M+9bC8OT/lrTD9fNYwT/0FpvQzwVju0eObndsd/uUa7qX2NffqNE5w7j7dbCudpXbj2ehX0n3f0ot5pX9/1xkPj79W8p41NH/nSHk1sQAAAABJRU5ErkJggg=="></image>
<pattern id="pattern0" patternunits="userSpaceOnUse" width="1" height="300" patterntransform="matrix(17.28,0,0,0.288,453.281644,248.82274)">
  <use href="#image10"></use>
</pattern>
</defs>
<g id="surface6">
<rect x="0" y="0" width="504" height="504" style="fill:rgb(100%,100%,100%);fill-opacity:1;stroke:none;"></rect>
<rect x="0" y="0" width="504" height="504" style="fill:rgb(100%,100%,100%);fill-opacity:1;stroke:none;"></rect>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 0 504 L 504 504 L 504 0 L 0 0 Z M 0 504 "></path>
<g clip-path="url(#clip1)" clip-rule="nonzero">
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(92.156863%,92.156863%,92.156863%);fill-opacity:1;" d="M 37.152344 469.847656 L 436.84375 469.847656 L 436.84375 5.476562 L 37.152344 5.476562 Z M 37.152344 469.847656 "></path>
</g>
<g clip-path="url(#clip2)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 430.765625 L 436.84375 430.765625 "></path>
</g>
<g clip-path="url(#clip3)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 316.210938 L 436.84375 316.210938 "></path>
</g>
<g clip-path="url(#clip4)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 201.660156 L 436.84375 201.660156 "></path>
</g>
<g clip-path="url(#clip5)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 87.105469 L 436.84375 87.105469 "></path>
</g>
<g clip-path="url(#clip6)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 97.378906 469.847656 L 97.378906 5.480469 "></path>
</g>
<g clip-path="url(#clip7)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 189.757812 469.847656 L 189.757812 5.480469 "></path>
</g>
<g clip-path="url(#clip8)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 282.132812 469.847656 L 282.132812 5.480469 "></path>
</g>
<g clip-path="url(#clip9)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 374.511719 469.847656 L 374.511719 5.480469 "></path>
</g>
<g clip-path="url(#clip10)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 373.488281 L 436.84375 373.488281 "></path>
</g>
<g clip-path="url(#clip11)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 258.9375 L 436.84375 258.9375 "></path>
</g>
<g clip-path="url(#clip12)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 144.382812 L 436.84375 144.382812 "></path>
</g>
<g clip-path="url(#clip13)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 29.828125 L 436.84375 29.828125 "></path>
</g>
<g clip-path="url(#clip14)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 51.1875 469.847656 L 51.1875 5.480469 "></path>
</g>
<g clip-path="url(#clip15)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 143.566406 469.847656 L 143.566406 5.480469 "></path>
</g>
<g clip-path="url(#clip16)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 235.945312 469.847656 L 235.945312 5.480469 "></path>
</g>
<g clip-path="url(#clip17)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 328.324219 469.847656 L 328.324219 5.480469 "></path>
</g>
<g clip-path="url(#clip18)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 420.703125 469.847656 L 420.703125 5.480469 "></path>
</g>
<path style="fill-rule:nonzero;fill:rgb(17.254902%,36.470588%,52.54902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(17.254902%,36.470588%,52.54902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 226.234375 299.601562 C 226.234375 302.835938 223.609375 305.457031 220.375 305.457031 C 217.140625 305.457031 214.515625 302.835938 214.515625 299.601562 C 214.515625 296.363281 217.140625 293.742188 220.375 293.742188 C 223.609375 293.742188 226.234375 296.363281 226.234375 299.601562 "></path>
<path style="fill-rule:nonzero;fill:rgb(10.196078%,22.352941%,33.333333%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(10.196078%,22.352941%,33.333333%);stroke-opacity:1;stroke-miterlimit:10;" d="M 76.144531 370.96875 C 76.144531 375.441406 69.433594 375.441406 69.433594 370.96875 C 69.433594 366.492188 76.144531 366.492188 76.144531 370.96875 "></path>
<path style="fill-rule:nonzero;fill:rgb(12.941176%,27.843137%,40.784314%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(12.941176%,27.843137%,40.784314%);stroke-opacity:1;stroke-miterlimit:10;" d="M 104.800781 319.6875 C 104.800781 324.90625 96.972656 324.90625 96.972656 319.6875 C 96.972656 314.46875 104.800781 314.46875 104.800781 319.6875 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.117647%,30.196078%,44.313725%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.117647%,30.196078%,44.313725%);stroke-opacity:1;stroke-miterlimit:10;" d="M 189.140625 351.214844 C 189.140625 354.542969 186.445312 357.238281 183.117188 357.238281 C 179.792969 357.238281 177.097656 354.542969 177.097656 351.214844 C 177.097656 347.890625 179.792969 345.195312 183.117188 345.195312 C 186.445312 345.195312 189.140625 347.890625 189.140625 351.214844 "></path>
<path style="fill-rule:nonzero;fill:rgb(29.411765%,60.392157%,84.705882%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(29.411765%,60.392157%,84.705882%);stroke-opacity:1;stroke-miterlimit:10;" d="M 370.066406 122.136719 C 370.066406 125.316406 367.492188 127.890625 364.316406 127.890625 C 361.140625 127.890625 358.566406 125.316406 358.566406 122.136719 C 358.566406 118.960938 361.140625 116.386719 364.316406 116.386719 C 367.492188 116.386719 370.066406 118.960938 370.066406 122.136719 "></path>
<path style="fill-rule:nonzero;fill:rgb(30.196078%,62.352941%,87.058824%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(30.196078%,62.352941%,87.058824%);stroke-opacity:1;stroke-miterlimit:10;" d="M 388.027344 115.285156 C 388.027344 118.503906 385.414062 121.117188 382.195312 121.117188 C 378.972656 121.117188 376.359375 118.503906 376.359375 115.285156 C 376.359375 112.0625 378.972656 109.449219 382.195312 109.449219 C 385.414062 109.449219 388.027344 112.0625 388.027344 115.285156 "></path>
<path style="fill-rule:nonzero;fill:rgb(20.784314%,43.529412%,62.352941%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20.784314%,43.529412%,62.352941%);stroke-opacity:1;stroke-miterlimit:10;" d="M 235.476562 216.636719 C 235.476562 223.585938 225.054688 223.585938 225.054688 216.636719 C 225.054688 209.6875 235.476562 209.6875 235.476562 216.636719 "></path>
<path style="fill-rule:nonzero;fill:rgb(28.235294%,58.039216%,81.568627%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(28.235294%,58.039216%,81.568627%);stroke-opacity:1;stroke-miterlimit:10;" d="M 382.40625 159.03125 C 382.40625 162.390625 379.683594 165.113281 376.324219 165.113281 C 372.96875 165.113281 370.246094 162.390625 370.246094 159.03125 C 370.246094 155.675781 372.96875 152.953125 376.324219 152.953125 C 379.683594 152.953125 382.40625 155.675781 382.40625 159.03125 "></path>
<path style="fill-rule:nonzero;fill:rgb(12.54902%,27.058824%,40.392157%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(12.54902%,27.058824%,40.392157%);stroke-opacity:1;stroke-miterlimit:10;" d="M 88.050781 313.234375 C 88.050781 317.761719 81.261719 317.761719 81.261719 313.234375 C 81.261719 308.707031 88.050781 308.707031 88.050781 313.234375 "></path>
<path style="fill-rule:nonzero;fill:rgb(23.137255%,48.235294%,68.235294%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(23.137255%,48.235294%,68.235294%);stroke-opacity:1;stroke-miterlimit:10;" d="M 301.664062 213.628906 C 301.664062 216.855469 299.046875 219.472656 295.820312 219.472656 C 292.59375 219.472656 289.976562 216.855469 289.976562 213.628906 C 289.976562 210.402344 292.59375 207.789062 295.820312 207.789062 C 299.046875 207.789062 301.664062 210.402344 301.664062 213.628906 "></path>
<path style="fill-rule:nonzero;fill:rgb(30.588235%,62.745098%,88.235294%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(30.588235%,62.745098%,88.235294%);stroke-opacity:1;stroke-miterlimit:10;" d="M 368.941406 93.558594 C 368.941406 96.640625 366.441406 99.140625 363.359375 99.140625 C 360.277344 99.140625 357.777344 96.640625 357.777344 93.558594 C 357.777344 90.476562 360.277344 87.976562 363.359375 87.976562 C 366.441406 87.976562 368.941406 90.476562 368.941406 93.558594 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.313725%,50.196078%,70.980392%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.313725%,50.196078%,70.980392%);stroke-opacity:1;stroke-miterlimit:10;" d="M 320.722656 204.019531 C 320.722656 207.296875 318.066406 209.953125 314.789062 209.953125 C 311.511719 209.953125 308.855469 207.296875 308.855469 204.019531 C 308.855469 200.742188 311.511719 198.085938 314.789062 198.085938 C 318.066406 198.085938 320.722656 200.742188 320.722656 204.019531 "></path>
<path style="fill-rule:nonzero;fill:rgb(30.196078%,62.352941%,87.45098%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(30.196078%,62.352941%,87.45098%);stroke-opacity:1;stroke-miterlimit:10;" d="M 376.605469 104.242188 C 376.605469 107.386719 374.058594 109.933594 370.914062 109.933594 C 367.769531 109.933594 365.222656 107.386719 365.222656 104.242188 C 365.222656 101.097656 367.769531 98.550781 370.914062 98.550781 C 374.058594 98.550781 376.605469 101.097656 376.605469 104.242188 "></path>
<path style="fill-rule:nonzero;fill:rgb(10.196078%,22.352941%,33.72549%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(10.196078%,22.352941%,33.72549%);stroke-opacity:1;stroke-miterlimit:10;" d="M 145.21875 418.035156 C 145.21875 421.71875 142.230469 424.703125 138.550781 424.703125 C 134.867188 424.703125 131.882812 421.71875 131.882812 418.035156 C 131.882812 414.355469 134.867188 411.367188 138.550781 411.367188 C 142.230469 411.367188 145.21875 414.355469 145.21875 418.035156 "></path>
<path style="fill-rule:nonzero;fill:rgb(25.490196%,52.941176%,74.901961%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(25.490196%,52.941176%,74.901961%);stroke-opacity:1;stroke-miterlimit:10;" d="M 304.171875 156.644531 C 304.171875 159.660156 301.726562 162.105469 298.710938 162.105469 C 295.695312 162.105469 293.253906 159.660156 293.253906 156.644531 C 293.253906 153.628906 295.695312 151.1875 298.710938 151.1875 C 301.726562 151.1875 304.171875 153.628906 304.171875 156.644531 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.313725%,50.588235%,71.764706%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.313725%,50.588235%,71.764706%);stroke-opacity:1;stroke-miterlimit:10;" d="M 346.289062 217.472656 C 346.289062 220.933594 343.484375 223.742188 340.023438 223.742188 C 336.5625 223.742188 333.757812 220.933594 333.757812 217.472656 C 333.757812 214.011719 336.5625 211.207031 340.023438 211.207031 C 343.484375 211.207031 346.289062 214.011719 346.289062 217.472656 "></path>
<path style="fill-rule:nonzero;fill:rgb(20%,41.568627%,59.607843%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20%,41.568627%,59.607843%);stroke-opacity:1;stroke-miterlimit:10;" d="M 244.125 247.9375 C 244.125 251.003906 241.640625 253.488281 238.574219 253.488281 C 235.507812 253.488281 233.019531 251.003906 233.019531 247.9375 C 233.019531 244.871094 235.507812 242.386719 238.574219 242.386719 C 241.640625 242.386719 244.125 244.871094 244.125 247.9375 "></path>
<path style="fill-rule:nonzero;fill:rgb(20%,41.960784%,60%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20%,41.960784%,60%);stroke-opacity:1;stroke-miterlimit:10;" d="M 193.121094 204.179688 C 193.121094 210.378906 183.820312 210.378906 183.820312 204.179688 C 183.820312 197.976562 193.121094 197.976562 193.121094 204.179688 "></path>
<path style="fill-rule:nonzero;fill:rgb(31.372549%,64.705882%,90.588235%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(31.372549%,64.705882%,90.588235%);stroke-opacity:1;stroke-miterlimit:10;" d="M 397.933594 93.226562 C 397.933594 96.414062 395.347656 98.996094 392.160156 98.996094 C 388.972656 98.996094 386.390625 96.414062 386.390625 93.226562 C 386.390625 90.039062 388.972656 87.453125 392.160156 87.453125 C 395.347656 87.453125 397.933594 90.039062 397.933594 93.226562 "></path>
<path style="fill-rule:nonzero;fill:rgb(10.980392%,23.921569%,35.686275%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(10.980392%,23.921569%,35.686275%);stroke-opacity:1;stroke-miterlimit:10;" d="M 75.976562 347.414062 C 75.976562 351.640625 69.640625 351.640625 69.640625 347.414062 C 69.640625 343.191406 75.976562 343.191406 75.976562 347.414062 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.705882%,50.980392%,72.156863%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.705882%,50.980392%,72.156863%);stroke-opacity:1;stroke-miterlimit:10;" d="M 378.957031 237.8125 C 378.957031 241.535156 375.9375 244.550781 372.214844 244.550781 C 368.492188 244.550781 365.476562 241.535156 365.476562 237.8125 C 365.476562 234.089844 368.492188 231.070312 372.214844 231.070312 C 375.9375 231.070312 378.957031 234.089844 378.957031 237.8125 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.823529%,39.607843%,56.862745%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.823529%,39.607843%,56.862745%);stroke-opacity:1;stroke-miterlimit:10;" d="M 259.792969 286.5625 C 259.792969 289.941406 257.054688 292.683594 253.671875 292.683594 C 250.292969 292.683594 247.550781 289.941406 247.550781 286.5625 C 247.550781 283.183594 250.292969 280.441406 253.671875 280.441406 C 257.054688 280.441406 259.792969 283.183594 259.792969 286.5625 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.294118%,32.156863%,46.666667%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.294118%,32.156863%,46.666667%);stroke-opacity:1;stroke-miterlimit:10;" d="M 197.535156 332.464844 C 197.535156 335.707031 194.90625 338.335938 191.664062 338.335938 C 188.421875 338.335938 185.792969 335.707031 185.792969 332.464844 C 185.792969 329.222656 188.421875 326.59375 191.664062 326.59375 C 194.90625 326.59375 197.535156 329.222656 197.535156 332.464844 "></path>
<path style="fill-rule:nonzero;fill:rgb(17.647059%,36.862745%,53.333333%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(17.647059%,36.862745%,53.333333%);stroke-opacity:1;stroke-miterlimit:10;" d="M 242.648438 305.988281 C 242.648438 309.386719 239.894531 312.140625 236.496094 312.140625 C 233.097656 312.140625 230.34375 309.386719 230.34375 305.988281 C 230.34375 302.589844 233.097656 299.835938 236.496094 299.835938 C 239.894531 299.835938 242.648438 302.589844 242.648438 305.988281 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.470588%,34.509804%,50.196078%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.470588%,34.509804%,50.196078%);stroke-opacity:1;stroke-miterlimit:10;" d="M 184.296875 291.617188 C 184.296875 298.53125 173.921875 298.53125 173.921875 291.617188 C 173.921875 284.703125 184.296875 284.703125 184.296875 291.617188 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.313725%,50.196078%,70.980392%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.313725%,50.196078%,70.980392%);stroke-opacity:1;stroke-miterlimit:10;" d="M 204.652344 115.769531 C 204.652344 121.570312 195.957031 121.570312 195.957031 115.769531 C 195.957031 109.972656 204.652344 109.972656 204.652344 115.769531 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.039216%,38.431373%,54.901961%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.039216%,38.431373%,54.901961%);stroke-opacity:1;stroke-miterlimit:10;" d="M 123.222656 198.195312 C 123.222656 203.039062 115.957031 203.039062 115.957031 198.195312 C 115.957031 193.351562 123.222656 193.351562 123.222656 198.195312 "></path>
<path style="fill-rule:nonzero;fill:rgb(23.529412%,48.627451%,68.627451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(23.529412%,48.627451%,68.627451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 211.636719 140.457031 C 211.636719 146.492188 202.582031 146.492188 202.582031 140.457031 C 202.582031 134.417969 211.636719 134.417969 211.636719 140.457031 "></path>
<path style="fill-rule:nonzero;fill:rgb(19.607843%,41.176471%,58.823529%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(19.607843%,41.176471%,58.823529%);stroke-opacity:1;stroke-miterlimit:10;" d="M 164.253906 194.628906 C 164.253906 200.273438 155.789062 200.273438 155.789062 194.628906 C 155.789062 188.980469 164.253906 188.980469 164.253906 194.628906 "></path>
<path style="fill-rule:nonzero;fill:rgb(23.137255%,48.235294%,68.627451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(23.137255%,48.235294%,68.627451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 248.953125 170.78125 C 248.953125 177.519531 238.847656 177.519531 238.847656 170.78125 C 238.847656 164.042969 248.953125 164.042969 248.953125 170.78125 "></path>
<path style="fill-rule:nonzero;fill:rgb(29.803922%,61.176471%,85.882353%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(29.803922%,61.176471%,85.882353%);stroke-opacity:1;stroke-miterlimit:10;" d="M 425.03125 155.953125 C 425.03125 159.464844 422.1875 162.308594 418.675781 162.308594 C 415.164062 162.308594 412.320312 159.464844 412.320312 155.953125 C 412.320312 152.441406 415.164062 149.597656 418.675781 149.597656 C 422.1875 149.597656 425.03125 152.441406 425.03125 155.953125 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.431373%,38.431373%,55.294118%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.431373%,38.431373%,55.294118%);stroke-opacity:1;stroke-miterlimit:10;" d="M 129.140625 200.238281 C 129.140625 205.226562 121.660156 205.226562 121.660156 200.238281 C 121.660156 195.25 129.140625 195.25 129.140625 200.238281 "></path>
<path style="fill-rule:nonzero;fill:rgb(22.352941%,46.666667%,66.666667%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(22.352941%,46.666667%,66.666667%);stroke-opacity:1;stroke-miterlimit:10;" d="M 168.492188 128.371094 C 168.492188 133.703125 160.488281 133.703125 160.488281 128.371094 C 160.488281 123.035156 168.492188 123.035156 168.492188 128.371094 "></path>
<path style="fill-rule:nonzero;fill:rgb(21.176471%,44.313725%,63.137255%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(21.176471%,44.313725%,63.137255%);stroke-opacity:1;stroke-miterlimit:10;" d="M 283.957031 246.785156 C 283.957031 250.078125 281.289062 252.746094 277.996094 252.746094 C 274.703125 252.746094 272.03125 250.078125 272.03125 246.785156 C 272.03125 243.488281 274.703125 240.820312 277.996094 240.820312 C 281.289062 240.820312 283.957031 243.488281 283.957031 246.785156 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.901961%,31.764706%,46.27451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.901961%,31.764706%,46.27451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 174.414062 321.199219 C 174.414062 328.332031 163.71875 328.332031 163.71875 321.199219 C 163.71875 314.070312 174.414062 314.070312 174.414062 321.199219 "></path>
<path style="fill-rule:nonzero;fill:rgb(17.647059%,36.862745%,53.333333%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(17.647059%,36.862745%,53.333333%);stroke-opacity:1;stroke-miterlimit:10;" d="M 245.90625 306.726562 C 245.90625 310.152344 243.128906 312.929688 239.703125 312.929688 C 236.277344 312.929688 233.5 310.152344 233.5 306.726562 C 233.5 303.300781 236.277344 300.523438 239.703125 300.523438 C 243.128906 300.523438 245.90625 303.300781 245.90625 306.726562 "></path>
<path style="fill-rule:nonzero;fill:rgb(7.45098%,16.862745%,26.666667%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(7.45098%,16.862745%,26.666667%);stroke-opacity:1;stroke-miterlimit:10;" d="M 84.765625 448.742188 C 84.765625 455.914062 74.011719 455.914062 74.011719 448.742188 C 74.011719 441.570312 84.765625 441.570312 84.765625 448.742188 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.039216%,37.647059%,54.509804%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.039216%,37.647059%,54.509804%);stroke-opacity:1;stroke-miterlimit:10;" d="M 198.03125 260.40625 C 198.03125 267.207031 187.828125 267.207031 187.828125 260.40625 C 187.828125 253.605469 198.03125 253.605469 198.03125 260.40625 "></path>
<path style="fill-rule:nonzero;fill:rgb(29.019608%,60.392157%,84.705882%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(29.019608%,60.392157%,84.705882%);stroke-opacity:1;stroke-miterlimit:10;" d="M 390.878906 139.746094 C 390.878906 143.0625 388.1875 145.753906 384.871094 145.753906 C 381.554688 145.753906 378.863281 143.0625 378.863281 139.746094 C 378.863281 136.429688 381.554688 133.738281 384.871094 133.738281 C 388.1875 133.738281 390.878906 136.429688 390.878906 139.746094 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.039216%,37.647059%,54.509804%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.039216%,37.647059%,54.509804%);stroke-opacity:1;stroke-miterlimit:10;" d="M 223.414062 280.433594 C 223.414062 283.53125 220.902344 286.042969 217.804688 286.042969 C 214.703125 286.042969 212.191406 283.53125 212.191406 280.433594 C 212.191406 277.332031 214.703125 274.820312 217.804688 274.820312 C 220.902344 274.820312 223.414062 277.332031 223.414062 280.433594 "></path>
<path style="fill-rule:nonzero;fill:rgb(29.803922%,61.960784%,86.666667%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(29.803922%,61.960784%,86.666667%);stroke-opacity:1;stroke-miterlimit:10;" d="M 359.550781 98.046875 C 359.550781 101.109375 357.070312 103.589844 354.007812 103.589844 C 350.949219 103.589844 348.46875 101.109375 348.46875 98.046875 C 348.46875 94.988281 350.949219 92.507812 354.007812 92.507812 C 357.070312 92.507812 359.550781 94.988281 359.550781 98.046875 "></path>
<path style="fill-rule:nonzero;fill:rgb(22.352941%,46.666667%,66.27451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(22.352941%,46.666667%,66.27451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 279.722656 214.097656 C 279.722656 217.210938 277.195312 219.738281 274.082031 219.738281 C 270.964844 219.738281 268.441406 217.210938 268.441406 214.097656 C 268.441406 210.980469 270.964844 208.453125 274.082031 208.453125 C 277.195312 208.453125 279.722656 210.980469 279.722656 214.097656 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.294118%,32.54902%,47.45098%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.294118%,32.54902%,47.45098%);stroke-opacity:1;stroke-miterlimit:10;" d="M 145.316406 285.222656 C 145.316406 291.226562 136.3125 291.226562 136.3125 285.222656 C 136.3125 279.21875 145.316406 279.21875 145.316406 285.222656 "></path>
<path style="fill-rule:nonzero;fill:rgb(11.372549%,24.313725%,36.470588%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(11.372549%,24.313725%,36.470588%);stroke-opacity:1;stroke-miterlimit:10;" d="M 156.183594 400.296875 C 156.183594 403.828125 153.320312 406.691406 149.789062 406.691406 C 146.257812 406.691406 143.394531 403.828125 143.394531 400.296875 C 143.394531 396.765625 146.257812 393.902344 149.789062 393.902344 C 153.320312 393.902344 156.183594 396.765625 156.183594 400.296875 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.294118%,32.54902%,47.45098%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.294118%,32.54902%,47.45098%);stroke-opacity:1;stroke-miterlimit:10;" d="M 233.675781 351.84375 C 233.675781 355.578125 230.652344 358.601562 226.917969 358.601562 C 223.1875 358.601562 220.164062 355.578125 220.164062 351.84375 C 220.164062 348.113281 223.1875 345.089844 226.917969 345.089844 C 230.652344 345.089844 233.675781 348.113281 233.675781 351.84375 "></path>
<path style="fill-rule:nonzero;fill:rgb(10.588235%,22.745098%,34.509804%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(10.588235%,22.745098%,34.509804%);stroke-opacity:1;stroke-miterlimit:10;" d="M 127.667969 400.261719 C 127.667969 403.367188 125.148438 405.882812 122.042969 405.882812 C 118.9375 405.882812 116.417969 403.367188 116.417969 400.261719 C 116.417969 397.15625 118.9375 394.636719 122.042969 394.636719 C 125.148438 394.636719 127.667969 397.15625 127.667969 400.261719 "></path>
<path style="fill-rule:nonzero;fill:rgb(21.568627%,45.098039%,64.313725%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(21.568627%,45.098039%,64.313725%);stroke-opacity:1;stroke-miterlimit:10;" d="M 274.277344 229.339844 C 274.277344 232.492188 271.71875 235.050781 268.566406 235.050781 C 265.414062 235.050781 262.855469 232.492188 262.855469 229.339844 C 262.855469 226.183594 265.414062 223.628906 268.566406 223.628906 C 271.71875 223.628906 274.277344 226.183594 274.277344 229.339844 "></path>
<path style="fill-rule:nonzero;fill:rgb(21.176471%,44.313725%,63.137255%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(21.176471%,44.313725%,63.137255%);stroke-opacity:1;stroke-miterlimit:10;" d="M 258.070312 226.726562 C 258.070312 229.777344 255.597656 232.253906 252.546875 232.253906 C 249.496094 232.253906 247.019531 229.777344 247.019531 226.726562 C 247.019531 223.675781 249.496094 221.203125 252.546875 221.203125 C 255.597656 221.203125 258.070312 223.675781 258.070312 226.726562 "></path>
<path style="fill-rule:nonzero;fill:rgb(9.803922%,21.568627%,32.54902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(9.803922%,21.568627%,32.54902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 116.507812 411.554688 C 116.507812 414.621094 114.019531 417.109375 110.953125 417.109375 C 107.882812 417.109375 105.398438 414.621094 105.398438 411.554688 C 105.398438 408.488281 107.882812 406 110.953125 406 C 114.019531 406 116.507812 408.488281 116.507812 411.554688 "></path>
<path style="fill-rule:nonzero;fill:rgb(19.607843%,40.784314%,58.823529%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(19.607843%,40.784314%,58.823529%);stroke-opacity:1;stroke-miterlimit:10;" d="M 176.886719 205.222656 C 176.886719 211.164062 167.976562 211.164062 167.976562 205.222656 C 167.976562 199.285156 176.886719 199.285156 176.886719 205.222656 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.117647%,29.803922%,43.529412%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.117647%,29.803922%,43.529412%);stroke-opacity:1;stroke-miterlimit:10;" d="M 65.277344 262.050781 C 65.277344 265.125 60.664062 265.125 60.664062 262.050781 C 60.664062 258.976562 65.277344 258.976562 65.277344 262.050781 "></path>
<path style="fill-rule:nonzero;fill:rgb(9.803922%,21.960784%,32.941176%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(9.803922%,21.960784%,32.941176%);stroke-opacity:1;stroke-miterlimit:10;" d="M 77.660156 377.246094 C 77.660156 381.894531 70.691406 381.894531 70.691406 377.246094 C 70.691406 372.601562 77.660156 372.601562 77.660156 377.246094 "></path>
<path style="fill-rule:nonzero;fill:rgb(25.882353%,53.333333%,75.294118%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(25.882353%,53.333333%,75.294118%);stroke-opacity:1;stroke-miterlimit:10;" d="M 279.171875 135.195312 C 279.171875 142.03125 268.914062 142.03125 268.914062 135.195312 C 268.914062 128.359375 279.171875 128.359375 279.171875 135.195312 "></path>
<path style="fill-rule:nonzero;fill:rgb(33.72549%,69.411765%,96.862745%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(33.72549%,69.411765%,96.862745%);stroke-opacity:1;stroke-miterlimit:10;" d="M 383.320312 30.199219 C 383.320312 37.355469 372.585938 37.355469 372.585938 30.199219 C 372.585938 23.042969 383.320312 23.042969 383.320312 30.199219 "></path>
<path style="fill-rule:nonzero;fill:rgb(19.215686%,40%,57.647059%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(19.215686%,40%,57.647059%);stroke-opacity:1;stroke-miterlimit:10;" d="M 250.300781 271.871094 C 250.300781 275.101562 247.679688 277.722656 244.449219 277.722656 C 241.222656 277.722656 238.601562 275.101562 238.601562 271.871094 C 238.601562 268.640625 241.222656 266.023438 244.449219 266.023438 C 247.679688 266.023438 250.300781 268.640625 250.300781 271.871094 "></path>
<path style="fill-rule:nonzero;fill:rgb(22.352941%,46.27451%,65.882353%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(22.352941%,46.27451%,65.882353%);stroke-opacity:1;stroke-miterlimit:10;" d="M 312.140625 245.058594 C 312.140625 248.496094 309.355469 251.28125 305.917969 251.28125 C 302.480469 251.28125 299.695312 248.496094 299.695312 245.058594 C 299.695312 241.621094 302.480469 238.835938 305.917969 238.835938 C 309.355469 238.835938 312.140625 241.621094 312.140625 245.058594 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.313725%,50.588235%,71.764706%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.313725%,50.588235%,71.764706%);stroke-opacity:1;stroke-miterlimit:10;" d="M 244.855469 140.167969 C 244.855469 146.636719 235.160156 146.636719 235.160156 140.167969 C 235.160156 133.703125 244.855469 133.703125 244.855469 140.167969 "></path>
<path style="fill-rule:nonzero;fill:rgb(28.235294%,58.431373%,81.960784%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(28.235294%,58.431373%,81.960784%);stroke-opacity:1;stroke-miterlimit:10;" d="M 320.453125 107.195312 C 320.453125 114.273438 309.835938 114.273438 309.835938 107.195312 C 309.835938 100.117188 320.453125 100.117188 320.453125 107.195312 "></path>
<path style="fill-rule:nonzero;fill:rgb(32.941176%,68.235294%,94.901961%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(32.941176%,68.235294%,94.901961%);stroke-opacity:1;stroke-miterlimit:10;" d="M 394.699219 54.136719 C 394.699219 57.199219 392.214844 59.683594 389.152344 59.683594 C 386.085938 59.683594 383.601562 57.199219 383.601562 54.136719 C 383.601562 51.070312 386.085938 48.589844 389.152344 48.589844 C 392.214844 48.589844 394.699219 51.070312 394.699219 54.136719 "></path>
<path style="fill-rule:nonzero;fill:rgb(13.72549%,29.803922%,43.529412%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(13.72549%,29.803922%,43.529412%);stroke-opacity:1;stroke-miterlimit:10;" d="M 56.878906 258.714844 C 56.878906 260.796875 53.757812 260.796875 53.757812 258.714844 C 53.757812 256.632812 56.878906 256.632812 56.878906 258.714844 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.686275%,32.941176%,47.843137%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.686275%,32.941176%,47.843137%);stroke-opacity:1;stroke-miterlimit:10;" d="M 103.53125 251.332031 C 103.53125 255.96875 96.574219 255.96875 96.574219 251.332031 C 96.574219 246.691406 103.53125 246.691406 103.53125 251.332031 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.705882%,51.372549%,72.54902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.705882%,51.372549%,72.54902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 272.058594 154.320312 C 272.058594 161.214844 261.714844 161.214844 261.714844 154.320312 C 261.714844 147.421875 272.058594 147.421875 272.058594 154.320312 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.294118%,32.156863%,47.058824%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.294118%,32.156863%,47.058824%);stroke-opacity:1;stroke-miterlimit:10;" d="M 199.070312 330.535156 C 199.070312 333.777344 196.445312 336.402344 193.203125 336.402344 C 189.964844 336.402344 187.335938 333.777344 187.335938 330.535156 C 187.335938 327.292969 189.964844 324.667969 193.203125 324.667969 C 196.445312 324.667969 199.070312 327.292969 199.070312 330.535156 "></path>
<path style="fill-rule:nonzero;fill:rgb(21.176471%,43.921569%,62.352941%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(21.176471%,43.921569%,62.352941%);stroke-opacity:1;stroke-miterlimit:10;" d="M 269.050781 241.34375 C 269.050781 244.527344 266.472656 247.105469 263.289062 247.105469 C 260.109375 247.105469 257.527344 244.527344 257.527344 241.34375 C 257.527344 238.164062 260.109375 235.582031 263.289062 235.582031 C 266.472656 235.582031 269.050781 238.164062 269.050781 241.34375 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.039216%,38.039216%,54.901961%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.039216%,38.039216%,54.901961%);stroke-opacity:1;stroke-miterlimit:10;" d="M 220.066406 274.632812 C 220.066406 277.675781 217.597656 280.144531 214.554688 280.144531 C 211.507812 280.144531 209.042969 277.675781 209.042969 274.632812 C 209.042969 271.589844 211.507812 269.121094 214.554688 269.121094 C 217.597656 269.121094 220.066406 271.589844 220.066406 274.632812 "></path>
<path style="fill-rule:nonzero;fill:rgb(23.529412%,49.019608%,69.411765%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(23.529412%,49.019608%,69.411765%);stroke-opacity:1;stroke-miterlimit:10;" d="M 343.988281 235.152344 C 343.988281 238.695312 341.117188 241.566406 337.574219 241.566406 C 334.03125 241.566406 331.160156 238.695312 331.160156 235.152344 C 331.160156 231.609375 334.03125 228.738281 337.574219 228.738281 C 341.117188 228.738281 343.988281 231.609375 343.988281 235.152344 "></path>
<path style="fill-rule:nonzero;fill:rgb(30.588235%,63.137255%,88.627451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(30.588235%,63.137255%,88.627451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 363.238281 83.578125 C 363.238281 86.613281 360.777344 89.070312 357.746094 89.070312 C 354.714844 89.070312 352.253906 86.613281 352.253906 83.578125 C 352.253906 80.546875 354.714844 78.089844 357.746094 78.089844 C 360.777344 78.089844 363.238281 80.546875 363.238281 83.578125 "></path>
<path style="fill-rule:nonzero;fill:rgb(27.843137%,57.647059%,80.784314%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(27.843137%,57.647059%,80.784314%);stroke-opacity:1;stroke-miterlimit:10;" d="M 397.601562 176.535156 C 397.601562 180.027344 394.769531 182.855469 391.277344 182.855469 C 387.785156 182.855469 384.953125 180.027344 384.953125 176.535156 C 384.953125 173.042969 387.785156 170.210938 391.277344 170.210938 C 394.769531 170.210938 397.601562 173.042969 397.601562 176.535156 "></path>
<path style="fill-rule:nonzero;fill:rgb(30.196078%,62.352941%,87.058824%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(30.196078%,62.352941%,87.058824%);stroke-opacity:1;stroke-miterlimit:10;" d="M 316.175781 60.226562 C 316.175781 66.964844 306.066406 66.964844 306.066406 60.226562 C 306.066406 53.488281 316.175781 53.488281 316.175781 60.226562 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.313725%,50.588235%,71.764706%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.313725%,50.588235%,71.764706%);stroke-opacity:1;stroke-miterlimit:10;" d="M 298.445312 179.90625 C 298.445312 182.976562 295.957031 185.46875 292.882812 185.46875 C 289.8125 185.46875 287.320312 182.976562 287.320312 179.90625 C 287.320312 176.832031 289.8125 174.339844 292.882812 174.339844 C 295.957031 174.339844 298.445312 176.832031 298.445312 179.90625 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.117647%,30.196078%,44.313725%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.117647%,30.196078%,44.313725%);stroke-opacity:1;stroke-miterlimit:10;" d="M 85.398438 271.820312 C 85.398438 275.960938 79.191406 275.960938 79.191406 271.820312 C 79.191406 267.683594 85.398438 267.683594 85.398438 271.820312 "></path>
<path style="fill-rule:nonzero;fill:rgb(30.196078%,62.352941%,87.058824%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(30.196078%,62.352941%,87.058824%);stroke-opacity:1;stroke-miterlimit:10;" d="M 360.070312 94.203125 C 360.070312 97.253906 357.597656 99.726562 354.546875 99.726562 C 351.492188 99.726562 349.019531 97.253906 349.019531 94.203125 C 349.019531 91.152344 351.492188 88.679688 354.546875 88.679688 C 357.597656 88.679688 360.070312 91.152344 360.070312 94.203125 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.039216%,37.647059%,54.117647%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.039216%,37.647059%,54.117647%);stroke-opacity:1;stroke-miterlimit:10;" d="M 190.984375 257.847656 C 190.984375 264.496094 181.011719 264.496094 181.011719 257.847656 C 181.011719 251.199219 190.984375 251.199219 190.984375 257.847656 "></path>
<path style="fill-rule:nonzero;fill:rgb(23.529412%,49.019608%,69.411765%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(23.529412%,49.019608%,69.411765%);stroke-opacity:1;stroke-miterlimit:10;" d="M 328.089844 224.0625 C 328.089844 227.46875 325.328125 230.230469 321.921875 230.230469 C 318.511719 230.230469 315.75 227.46875 315.75 224.0625 C 315.75 220.65625 318.511719 217.890625 321.921875 217.890625 C 325.328125 217.890625 328.089844 220.65625 328.089844 224.0625 "></path>
<path style="fill-rule:nonzero;fill:rgb(10.196078%,22.745098%,34.117647%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(10.196078%,22.745098%,34.117647%);stroke-opacity:1;stroke-miterlimit:10;" d="M 74.125 365.214844 C 74.125 369.5 67.699219 369.5 67.699219 365.214844 C 67.699219 360.933594 74.125 360.933594 74.125 365.214844 "></path>
<path style="fill-rule:nonzero;fill:rgb(19.215686%,40%,57.254902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(19.215686%,40%,57.254902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 190.480469 228.695312 C 190.480469 235.054688 180.941406 235.054688 180.941406 228.695312 C 180.941406 222.335938 190.480469 222.335938 190.480469 228.695312 "></path>
<path style="fill-rule:nonzero;fill:rgb(23.921569%,49.411765%,70.196078%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(23.921569%,49.411765%,70.196078%);stroke-opacity:1;stroke-miterlimit:10;" d="M 248.394531 155.644531 C 248.394531 162.261719 238.464844 162.261719 238.464844 155.644531 C 238.464844 149.027344 248.394531 149.027344 248.394531 155.644531 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.294118%,32.54902%,47.45098%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.294118%,32.54902%,47.45098%);stroke-opacity:1;stroke-miterlimit:10;" d="M 57.164062 222.230469 C 57.164062 224.128906 54.320312 224.128906 54.320312 222.230469 C 54.320312 220.335938 57.164062 220.335938 57.164062 222.230469 "></path>
<path style="fill-rule:nonzero;fill:rgb(11.764706%,25.490196%,38.039216%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(11.764706%,25.490196%,38.039216%);stroke-opacity:1;stroke-miterlimit:10;" d="M 98.117188 343.941406 C 98.117188 349.179688 90.257812 349.179688 90.257812 343.941406 C 90.257812 338.703125 98.117188 338.703125 98.117188 343.941406 "></path>
<path style="fill-rule:nonzero;fill:rgb(27.058824%,55.686275%,78.431373%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(27.058824%,55.686275%,78.431373%);stroke-opacity:1;stroke-miterlimit:10;" d="M 357.410156 167.089844 C 357.410156 170.378906 354.742188 173.042969 351.457031 173.042969 C 348.167969 173.042969 345.503906 170.378906 345.503906 167.089844 C 345.503906 163.800781 348.167969 161.136719 351.457031 161.136719 C 354.742188 161.136719 357.410156 163.800781 357.410156 167.089844 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.470588%,34.509804%,50.196078%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.470588%,34.509804%,50.196078%);stroke-opacity:1;stroke-miterlimit:10;" d="M 205.761719 305.636719 C 205.761719 308.753906 203.234375 311.285156 200.113281 311.285156 C 196.996094 311.285156 194.464844 308.753906 194.464844 305.636719 C 194.464844 302.515625 196.996094 299.988281 200.113281 299.988281 C 203.234375 299.988281 205.761719 302.515625 205.761719 305.636719 "></path>
<path style="fill-rule:nonzero;fill:rgb(27.843137%,58.039216%,81.568627%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(27.843137%,58.039216%,81.568627%);stroke-opacity:1;stroke-miterlimit:10;" d="M 294.457031 92.914062 C 294.457031 99.636719 284.378906 99.636719 284.378906 92.914062 C 284.378906 86.195312 294.457031 86.195312 294.457031 92.914062 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.294118%,32.54902%,47.45098%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.294118%,32.54902%,47.45098%);stroke-opacity:1;stroke-miterlimit:10;" d="M 202.113281 327.683594 C 202.113281 330.929688 199.484375 333.558594 196.238281 333.558594 C 192.992188 333.558594 190.363281 330.929688 190.363281 327.683594 C 190.363281 324.441406 192.992188 321.808594 196.238281 321.808594 C 199.484375 321.808594 202.113281 324.441406 202.113281 327.683594 "></path>
<path style="fill-rule:nonzero;fill:rgb(22.745098%,47.45098%,67.45098%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(22.745098%,47.45098%,67.45098%);stroke-opacity:1;stroke-miterlimit:10;" d="M 199.375 144.640625 C 199.375 150.53125 190.539062 150.53125 190.539062 144.640625 C 190.539062 138.75 199.375 138.75 199.375 144.640625 "></path>
<path style="fill-rule:nonzero;fill:rgb(30.588235%,63.529412%,89.019608%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(30.588235%,63.529412%,89.019608%);stroke-opacity:1;stroke-miterlimit:10;" d="M 291.1875 26.585938 C 291.1875 32.90625 281.707031 32.90625 281.707031 26.585938 C 281.707031 20.265625 291.1875 20.265625 291.1875 26.585938 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.901961%,31.764706%,46.27451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.901961%,31.764706%,46.27451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 126.851562 283.800781 C 126.851562 289.332031 118.550781 289.332031 118.550781 283.800781 C 118.550781 278.265625 126.851562 278.265625 126.851562 283.800781 "></path>
<path style="fill-rule:nonzero;fill:rgb(25.882353%,53.333333%,75.294118%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(25.882353%,53.333333%,75.294118%);stroke-opacity:1;stroke-miterlimit:10;" d="M 322.890625 168.945312 C 322.890625 172.089844 320.339844 174.636719 317.195312 174.636719 C 314.050781 174.636719 311.503906 172.089844 311.503906 168.945312 C 311.503906 165.800781 314.050781 163.25 317.195312 163.25 C 320.339844 163.25 322.890625 165.800781 322.890625 168.945312 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.901961%,31.764706%,46.27451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.901961%,31.764706%,46.27451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 204.503906 341.523438 C 204.503906 344.902344 201.761719 347.644531 198.382812 347.644531 C 195.003906 347.644531 192.261719 344.902344 192.261719 341.523438 C 192.261719 338.144531 195.003906 335.402344 198.382812 335.402344 C 201.761719 335.402344 204.503906 338.144531 204.503906 341.523438 "></path>
<path style="fill-rule:nonzero;fill:rgb(12.54902%,27.058824%,40%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(12.54902%,27.058824%,40%);stroke-opacity:1;stroke-miterlimit:10;" d="M 135.699219 351.3125 C 135.699219 357.941406 125.75 357.941406 125.75 351.3125 C 125.75 344.679688 135.699219 344.679688 135.699219 351.3125 "></path>
<path style="fill-rule:nonzero;fill:rgb(11.372549%,24.705882%,36.862745%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(11.372549%,24.705882%,36.862745%);stroke-opacity:1;stroke-miterlimit:10;" d="M 66.085938 331.203125 C 66.085938 334.660156 60.902344 334.660156 60.902344 331.203125 C 60.902344 327.75 66.085938 327.75 66.085938 331.203125 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.294118%,32.941176%,47.843137%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.294118%,32.941176%,47.843137%);stroke-opacity:1;stroke-miterlimit:10;" d="M 221.289062 341.601562 C 221.289062 345.125 218.429688 347.984375 214.90625 347.984375 C 211.378906 347.984375 208.523438 345.125 208.523438 341.601562 C 208.523438 338.074219 211.378906 335.21875 214.90625 335.21875 C 218.429688 335.21875 221.289062 338.074219 221.289062 341.601562 "></path>
<path style="fill-rule:nonzero;fill:rgb(20.392157%,42.352941%,60.784314%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20.392157%,42.352941%,60.784314%);stroke-opacity:1;stroke-miterlimit:10;" d="M 184.46875 192.273438 C 184.46875 198.246094 175.507812 198.246094 175.507812 192.273438 C 175.507812 186.300781 184.46875 186.300781 184.46875 192.273438 "></path>
<path style="fill-rule:nonzero;fill:rgb(20.392157%,42.352941%,60.784314%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20.392157%,42.352941%,60.784314%);stroke-opacity:1;stroke-miterlimit:10;" d="M 217.308594 218.082031 C 217.308594 224.777344 207.265625 224.777344 207.265625 218.082031 C 207.265625 211.386719 217.308594 211.386719 217.308594 218.082031 "></path>
<path style="fill-rule:nonzero;fill:rgb(30.980392%,63.921569%,89.411765%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(30.980392%,63.921569%,89.411765%);stroke-opacity:1;stroke-miterlimit:10;" d="M 303.613281 30.917969 C 303.613281 37.378906 293.921875 37.378906 293.921875 30.917969 C 293.921875 24.457031 303.613281 24.457031 303.613281 30.917969 "></path>
<path style="fill-rule:nonzero;fill:rgb(21.960784%,45.490196%,64.705882%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(21.960784%,45.490196%,64.705882%);stroke-opacity:1;stroke-miterlimit:10;" d="M 188.078125 157.898438 C 188.078125 163.699219 179.375 163.699219 179.375 157.898438 C 179.375 152.09375 188.078125 152.09375 188.078125 157.898438 "></path>
<path style="fill-rule:nonzero;fill:rgb(29.803922%,61.568627%,86.27451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(29.803922%,61.568627%,86.27451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 419.730469 148.867188 C 419.730469 152.328125 416.921875 155.136719 413.460938 155.136719 C 410 155.136719 407.191406 152.328125 407.191406 148.867188 C 407.191406 145.40625 410 142.597656 413.460938 142.597656 C 416.921875 142.597656 419.730469 145.40625 419.730469 148.867188 "></path>
<path style="fill-rule:nonzero;fill:rgb(19.215686%,40%,57.647059%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(19.215686%,40%,57.647059%);stroke-opacity:1;stroke-miterlimit:10;" d="M 150.089844 196.203125 C 150.089844 201.59375 142 201.59375 142 196.203125 C 142 190.808594 150.089844 190.808594 150.089844 196.203125 "></path>
<path style="fill-rule:nonzero;fill:rgb(7.45098%,16.862745%,26.27451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(7.45098%,16.862745%,26.27451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 61.179688 434.894531 C 61.179688 438.917969 55.144531 438.917969 55.144531 434.894531 C 55.144531 430.867188 61.179688 430.867188 61.179688 434.894531 "></path>
<path style="fill-rule:nonzero;fill:rgb(25.490196%,52.941176%,74.509804%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(25.490196%,52.941176%,74.509804%);stroke-opacity:1;stroke-miterlimit:10;" d="M 209.046875 86.332031 C 209.046875 92.035156 200.488281 92.035156 200.488281 86.332031 C 200.488281 80.625 209.046875 80.625 209.046875 86.332031 "></path>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="20.21875" y="376.40332"></use>
  <use href="#glyph0-2" x="25.21875" y="376.40332"></use>
  <use href="#glyph0-3" x="27.21875" y="376.40332"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="20.21875" y="261.852539"></use>
  <use href="#glyph0-2" x="25.21875" y="261.852539"></use>
  <use href="#glyph0-4" x="27.21875" y="261.852539"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-5" x="20.21875" y="147.297852"></use>
  <use href="#glyph0-2" x="25.21875" y="147.297852"></use>
  <use href="#glyph0-6" x="27.21875" y="147.297852"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-5" x="20.21875" y="32.743164"></use>
  <use href="#glyph0-2" x="25.21875" y="32.743164"></use>
  <use href="#glyph0-7" x="27.21875" y="32.743164"></use>
</g>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 34.410156 373.488281 L 37.152344 373.488281 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 34.410156 258.9375 L 37.152344 258.9375 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 34.410156 144.382812 L 37.152344 144.382812 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 34.410156 29.828125 L 37.152344 29.828125 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 51.1875 472.589844 L 51.1875 469.847656 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 143.566406 472.589844 L 143.566406 469.847656 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 235.945312 472.589844 L 235.945312 469.847656 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 328.324219 472.589844 L 328.324219 469.847656 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 420.703125 472.589844 L 420.703125 469.847656 "></path>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="42.6875" y="481.196289"></use>
  <use href="#glyph0-2" x="47.6875" y="481.196289"></use>
  <use href="#glyph0-1" x="49.6875" y="481.196289"></use>
  <use href="#glyph0-1" x="54.6875" y="481.196289"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="135.066406" y="481.196289"></use>
  <use href="#glyph0-2" x="140.066406" y="481.196289"></use>
  <use href="#glyph0-6" x="142.066406" y="481.196289"></use>
  <use href="#glyph0-8" x="147.066406" y="481.196289"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="227.445312" y="481.196289"></use>
  <use href="#glyph0-2" x="232.445312" y="481.196289"></use>
  <use href="#glyph0-8" x="234.445312" y="481.196289"></use>
  <use href="#glyph0-1" x="239.445312" y="481.196289"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="319.824219" y="481.196289"></use>
  <use href="#glyph0-2" x="324.824219" y="481.196289"></use>
  <use href="#glyph0-9" x="326.824219" y="481.196289"></use>
  <use href="#glyph0-8" x="331.824219" y="481.196289"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-5" x="412.203125" y="481.196289"></use>
  <use href="#glyph0-2" x="417.203125" y="481.196289"></use>
  <use href="#glyph0-1" x="419.203125" y="481.196289"></use>
  <use href="#glyph0-1" x="424.203125" y="481.196289"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-1" x="234.496094" y="494.538086"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph2-1" x="13.499023" y="240.164062"></use>
</g>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 447.800781 214.90625 L 498.519531 214.90625 L 498.519531 134.628906 L 447.800781 134.628906 Z M 447.800781 214.90625 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-2" x="453.28125" y="149.624023"></use>
  <use href="#glyph1-1" x="457.28125" y="149.624023"></use>
  <use href="#glyph1-3" x="462.28125" y="149.624023"></use>
  <use href="#glyph1-4" x="465.28125" y="149.624023"></use>
  <use href="#glyph1-5" x="470.28125" y="149.624023"></use>
</g>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(94.901961%,94.901961%,94.901961%);fill-opacity:1;" d="M 453.28125 174.867188 L 470.5625 174.867188 L 470.5625 157.585938 L 453.28125 157.585938 Z M 453.28125 174.867188 "></path>
<path style="fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 465.957031 166.226562 C 465.957031 171.605469 457.886719 171.605469 457.886719 166.226562 C 457.886719 160.847656 465.957031 160.847656 465.957031 166.226562 "></path>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(94.901961%,94.901961%,94.901961%);fill-opacity:1;" d="M 453.28125 192.144531 L 470.5625 192.144531 L 470.5625 174.863281 L 453.28125 174.863281 Z M 453.28125 192.144531 "></path>
<path style="fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 467.089844 183.503906 C 467.089844 190.394531 456.753906 190.394531 456.753906 183.503906 C 456.753906 176.613281 467.089844 176.613281 467.089844 183.503906 "></path>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(94.901961%,94.901961%,94.901961%);fill-opacity:1;" d="M 453.28125 209.425781 L 470.5625 209.425781 L 470.5625 192.144531 L 453.28125 192.144531 Z M 453.28125 209.425781 "></path>
<path style="fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 467.953125 200.785156 C 467.953125 204.117188 465.253906 206.816406 461.921875 206.816406 C 458.589844 206.816406 455.890625 204.117188 455.890625 200.785156 C 455.890625 197.453125 458.589844 194.753906 461.921875 194.753906 C 465.253906 194.753906 467.953125 197.453125 467.953125 200.785156 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-1" x="476.042969" y="169.141602"></use>
  <use href="#glyph0-2" x="481.042969" y="169.141602"></use>
  <use href="#glyph0-6" x="483.042969" y="169.141602"></use>
  <use href="#glyph0-8" x="488.042969" y="169.141602"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-1" x="476.042969" y="186.418945"></use>
  <use href="#glyph0-2" x="481.042969" y="186.418945"></use>
  <use href="#glyph0-8" x="483.042969" y="186.418945"></use>
  <use href="#glyph0-1" x="488.042969" y="186.418945"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-1" x="476.042969" y="203.700195"></use>
  <use href="#glyph0-2" x="481.042969" y="203.700195"></use>
  <use href="#glyph0-9" x="483.042969" y="203.700195"></use>
  <use href="#glyph0-8" x="488.042969" y="203.700195"></use>
</g>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 447.800781 340.703125 L 493.519531 340.703125 L 493.519531 225.863281 L 447.800781 225.863281 Z M 447.800781 340.703125 "></path>
<g clip-path="url(#clip19)" clip-rule="nonzero">
<rect x="0" y="0" width="504" height="504" style="fill:url(#pattern0);stroke:none;"></rect>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-1" x="476.042969" y="326.825195"></use>
  <use href="#glyph0-2" x="481.042969" y="326.825195"></use>
  <use href="#glyph0-8" x="483.042969" y="326.825195"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-5" x="476.042969" y="307.926758"></use>
  <use href="#glyph0-2" x="481.042969" y="307.926758"></use>
  <use href="#glyph0-1" x="483.042969" y="307.926758"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-5" x="476.042969" y="289.032227"></use>
  <use href="#glyph0-2" x="481.042969" y="289.032227"></use>
  <use href="#glyph0-8" x="483.042969" y="289.032227"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-6" x="476.042969" y="270.137695"></use>
  <use href="#glyph0-2" x="481.042969" y="270.137695"></use>
  <use href="#glyph0-1" x="483.042969" y="270.137695"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-2" x="453.28125" y="240.862305"></use>
  <use href="#glyph1-1" x="457.28125" y="240.862305"></use>
  <use href="#glyph1-6" x="462.28125" y="240.862305"></use>
  <use href="#glyph1-7" x="465.28125" y="240.862305"></use>
  <use href="#glyph1-6" x="471.28125" y="240.862305"></use>
  <use href="#glyph1-4" x="474.28125" y="240.862305"></use>
  <use href="#glyph1-5" x="479.28125" y="240.862305"></use>
</g>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 453.28125 323.910156 L 456.738281 323.910156 "></path>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 453.28125 305.011719 L 456.738281 305.011719 "></path>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 453.28125 286.117188 L 456.738281 286.117188 "></path>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 453.28125 267.222656 L 456.738281 267.222656 "></path>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 467.105469 323.910156 L 470.5625 323.910156 "></path>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 467.105469 305.011719 L 470.5625 305.011719 "></path>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 467.105469 286.117188 L 470.5625 286.117188 "></path>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 467.105469 267.222656 L 470.5625 267.222656 "></path>
</g>
</svg>

<p>Any plot (function or object) can be saved to file or converted to BufferedImage object.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb132"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>(r-&gt;clj (plot-&gt;file <span class="st">"notebooks/images/histogram.jpg"</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>                    (<span class="kw">fn</span> [] (hist [<span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span>]</span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">:main</span> <span class="st">"Histogram"</span></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">:xlab</span> <span class="st">"data: [1 1 1 1 2 3 4 5]"</span>))</span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">:width</span> <span class="dv">800</span> <span class="at">:height</span> <span class="dv">400</span> <span class="at">:quality</span> <span class="dv">50</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb133"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:breaks</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span>],</span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a> <span class="at">:counts</span> [<span class="dv">5</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span>],</span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a> <span class="at">:density</span> [<span class="fl">0.625</span> <span class="fl">0.125</span> <span class="fl">0.125</span> <span class="fl">0.125</span>],</span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a> <span class="at">:mids</span> [<span class="fl">1.5</span> <span class="fl">2.5</span> <span class="fl">3.5</span> <span class="fl">4.5</span>],</span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a> <span class="at">:xname</span> [<span class="st">"c(1L, 1L, 1L, 1L, 2L, 3L, 4L, 5L)"</span>],</span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a> <span class="at">:equidist</span> [<span class="va">true</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb134"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>(kind/hiccup [<span class="at">:image</span> {<span class="at">:src</span> <span class="st">"notebooks/images/histogram.jpg"</span>}])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<img src="notebooks/images/histogram.jpg">
<div class="sourceClojure">
<div class="sourceCode" id="cb135"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>(plot-&gt;buffered-image (<span class="kw">fn</span> [] (hist [<span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span>])) <span class="at">:width</span> <span class="dv">222</span> <span class="at">:height</span> <span class="dv">149</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-image">
<img src="clojisr.v1.tutorial_files/0.png">
</div>
</section>
<section id="intermediary-representation-as-java-objects." class="level2">
<h2 class="anchored" data-anchor-id="intermediary-representation-as-java-objects.">Intermediary representation as Java objects.</h2>
<p>Clojisr relies on the fact of an intemediary representation of java, as Java objects. This is usually hidden from the user, but may be useful sometimes. In the current implementation, this is based on <a href="https://github.com/s-u/REngine">REngine</a>.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb136"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">import</span> (org.rosuda.REngine REXP REXPInteger REXPDouble))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb137"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>org.rosuda.REngine.REXPDouble</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can convert data between R and Java.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb138"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1:9"</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb139"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>org.rosuda.REngine.REXPInteger</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb140"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (REXPInteger. <span class="dv">1</span>)</span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>    java-&gt;r</span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb141"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can further convert data from the java representation to Clojure.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb142"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1:9"</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb143"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On the opposite direction, we can also convert Clojure data into the Java represenattion.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb144"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (<span class="kw">range</span> <span class="dv">1</span> <span class="dv">10</span>)</span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>    clj-&gt;java</span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb145"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>org.rosuda.REngine.REXPInteger</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb146"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (<span class="kw">range</span> <span class="dv">1</span> <span class="dv">10</span>)</span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>    clj-&gt;java</span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb147"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There is an alternative way of conversion from Java to Clojure, naively converting the internal Java representation to a Clojure data structure. It can be handy when one wants to have plain access to all the metadata (R attributes), etc.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb148"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> <span class="st">"1:9"</span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>     r</span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>     r-&gt;java</span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a>     java-&gt;native-clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb149"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb150"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> <span class="st">"data.frame(x=1:3,y=factor('a','a','b'))"</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>     r</span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a>     r-&gt;java</span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a>     java-&gt;native-clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb151"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:x</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="at">:y</span> [<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can evaluate R code and immediately return the result as a java object, without ever creating a handle to an R object holding the result:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb152"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1+2"</span></span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>    eval-r-&gt;java</span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb153"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>org.rosuda.REngine.REXPDouble</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb154"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1+2"</span></span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>    eval-r-&gt;java</span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a>    (.asDoubles)</span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">vec</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb155"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">3.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="more-data-conversion-examples" class="level2">
<h2 class="anchored" data-anchor-id="more-data-conversion-examples">More data conversion examples</h2>
<p>Convertion between R and Clojure always passes through Java. To stress this, we write it explicitly in the following examples.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb156"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"list(a=1:2,b='hi!')"</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb156-4"><a href="#cb156-4" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb157"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>], <span class="at">:b</span> [<span class="st">"hi!"</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Partially named lists are also supported</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb158"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"list(a=1:2,'hi!')"</span></span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb159"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>], <span class="dv">1</span> [<span class="st">"hi!"</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb160"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"table(c('a','b','a','b','a','b','a','b'), c(1,1,2,2,3,3,1,1))"</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj</span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true" tabindex="-1"></a>    dataset/mapseq-reader</span>
<span id="cb160-6"><a href="#cb160-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb161"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>#{{<span class="dv">0</span> <span class="st">"a"</span>, <span class="dv">1</span> <span class="st">"2"</span>, :$value <span class="dv">2</span>}</span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"b"</span>, <span class="dv">1</span> <span class="st">"3"</span>, :$value <span class="dv">1</span>}</span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"a"</span>, <span class="dv">1</span> <span class="st">"1"</span>, :$value <span class="dv">2</span>}</span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"a"</span>, <span class="dv">1</span> <span class="st">"3"</span>, :$value <span class="dv">1</span>}</span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"b"</span>, <span class="dv">1</span> <span class="st">"2"</span>, :$value <span class="dv">1</span>}</span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"b"</span>, <span class="dv">1</span> <span class="st">"1"</span>, :$value <span class="dv">1</span>}}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb162"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> {<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>] <span class="at">:b</span> <span class="st">"hi!"</span>}</span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a>    clj-&gt;java</span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a>    java-&gt;r</span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb163"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>], <span class="at">:b</span> [<span class="st">"hi!"</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb164"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> {<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>] <span class="at">:b</span> <span class="st">"hi!"</span>}</span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a>     clj-&gt;java</span>
<span id="cb164-3"><a href="#cb164-3" aria-hidden="true" tabindex="-1"></a>     java-&gt;r</span>
<span id="cb164-4"><a href="#cb164-4" aria-hidden="true" tabindex="-1"></a>     ((r <span class="st">"deparse"</span>))</span>
<span id="cb164-5"><a href="#cb164-5" aria-hidden="true" tabindex="-1"></a>     r-&gt;java</span>
<span id="cb164-6"><a href="#cb164-6" aria-hidden="true" tabindex="-1"></a>     java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb165"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>[<span class="st">"list(a = 1:2, b = </span><span class="sc">\"</span><span class="st">hi!</span><span class="sc">\"</span><span class="st">)"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="basic-types-convertion-clj-r-clj" class="level3">
<h3 class="anchored" data-anchor-id="basic-types-convertion-clj-r-clj">Basic types convertion clj-&gt;r-&gt;clj</h3>
<div class="sourceClojure">
<div class="sourceCode" id="cb166"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> clj-&gt;r-&gt;clj </span>(<span class="kw">comp</span> r-&gt;clj r))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb167"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj <span class="va">nil</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb168"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb169"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj [<span class="dv">10</span> <span class="dv">11</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb170"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">10</span> <span class="dv">11</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb171"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj [<span class="fl">10.0</span> <span class="fl">11.0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb172"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">10.0</span> <span class="fl">11.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb173"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj (<span class="kw">list</span> <span class="fl">10.0</span> <span class="fl">11.0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb174"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">10.0</span> <span class="fl">11.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb175"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj {<span class="at">:a</span> <span class="dv">1</span> <span class="at">:b</span> <span class="dv">2</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb176"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span>], <span class="at">:b</span> [<span class="dv">2</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="various-r-objects" class="level3">
<h3 class="anchored" data-anchor-id="various-r-objects">Various R objects</h3>
<p>Named list</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb177"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"list(a=1L,b=c(10,20),c='hi!')"</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb178"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span>], <span class="at">:b</span> [<span class="fl">10.0</span> <span class="fl">20.0</span>], <span class="at">:c</span> [<span class="st">"hi!"</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Array of doubles</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb179"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"c(10,20,30)"</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb180"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">10.0</span> <span class="fl">20.0</span> <span class="fl">30.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Array of longs</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb181"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"c(10L,20L,30L)"</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb182"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">10</span> <span class="dv">20</span> <span class="dv">30</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Timeseries</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb183"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="at">'euro</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj</span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">first</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb184"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fl">13.7603</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Pairlist</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb185"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> r.stats/dnorm</span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>    r.base/formals</span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj</span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">keys</span></span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">sort</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb186"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">:log</span> <span class="at">:mean</span> <span class="at">:sd</span> <span class="at">:x</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>NULL</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb187"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"NULL"</span></span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb188"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>TRUE/FALSE</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb189"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"TRUE"</span></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb190"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>[<span class="va">true</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="inspecting-r-functions" class="level2">
<h2 class="anchored" data-anchor-id="inspecting-r-functions">Inspecting R functions</h2>
<p>The <code>mean</code> function is defined to expect arguments <code>x</code> and <code>...</code>. These arguments have no default values (thus, its formals have empty symbols as values):</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb191"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="at">'mean</span></span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a>    r.base/formals</span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb192"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:x</span> , <span class="at">:...</span> }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It is an <a href="http://adv-r.had.co.nz/S3.html">S3 generic function</a> function, which we can realize by printing it:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb193"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a>(r <span class="at">'mean</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb194"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>function (x, ...) </span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a>UseMethod(<span class="st">"mean"</span>)</span>
<span id="cb194-3"><a href="#cb194-3" aria-hidden="true" tabindex="-1"></a>&lt;bytecode: <span class="bn">0x5ecf693147a0</span>&gt;</span>
<span id="cb194-4"><a href="#cb194-4" aria-hidden="true" tabindex="-1"></a>&lt;environment: namespace<span class="at">:base</span>&gt;</span>
<span id="cb194-5"><a href="#cb194-5" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>So, we can expect possibly more details when inspecting its default implementation. Now, we see some arguments that do have default values.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb195"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="at">'mean.default</span></span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a>    r.base/formals</span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb196"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:x</span> , <span class="at">:trim</span> [<span class="fl">0.0</span>], <span class="at">:na.rm</span> [<span class="va">false</span>], <span class="at">:...</span> }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="r-function-arglists" class="level2">
<h2 class="anchored" data-anchor-id="r-function-arglists">R-function-arglists</h2>
<p>As we saw earlier, R functions are Clojure functions. The arglists of functions brought up by <code>require-r</code> match the expected arguments. Here are some examples:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb197"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a>(require-r</span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a> '[base]</span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a> '[stats]</span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true" tabindex="-1"></a> '[grDevices])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb198"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb199"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> [<span class="va">#'r.base/mean,</span> <span class="va">#'r.base/mean-default,</span> <span class="va">#'r.stats/arima0,</span></span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a>      <span class="va">#'r.grDevices/dev-off,</span> <span class="va">#'r.base/Sys-info,</span> <span class="va">#'r.base/summary-default</span></span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a>      <span class="co">;; Primitive functions:</span></span>
<span id="cb199-4"><a href="#cb199-4" aria-hidden="true" tabindex="-1"></a>      <span class="va">#'r.base/sin,</span> <span class="va">#'r.base/sum</span>]</span>
<span id="cb199-5"><a href="#cb199-5" aria-hidden="true" tabindex="-1"></a>     (<span class="kw">map</span> (<span class="kw">fn</span> [f]</span>
<span id="cb199-6"><a href="#cb199-6" aria-hidden="true" tabindex="-1"></a>            (<span class="kw">-&gt;</span> f</span>
<span id="cb199-7"><a href="#cb199-7" aria-hidden="true" tabindex="-1"></a>                <span class="kw">meta</span></span>
<span id="cb199-8"><a href="#cb199-8" aria-hidden="true" tabindex="-1"></a>                (<span class="kw">update</span> <span class="at">:ns</span> (<span class="kw">comp</span> <span class="kw">symbol</span> <span class="kw">str</span>))))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb200"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a>({<span class="at">:arglists</span> ([x &amp; {<span class="at">:keys</span> [...]}]), <span class="at">:name</span> mean, <span class="at">:ns</span> r.base}</span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([x &amp; {<span class="at">:keys</span> [trim na.rm ...]}]),</span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">:name</span> mean-default,</span>
<span id="cb200-4"><a href="#cb200-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">:ns</span> r.base}</span>
<span id="cb200-5"><a href="#cb200-5" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span></span>
<span id="cb200-6"><a href="#cb200-6" aria-hidden="true" tabindex="-1"></a>  ([x</span>
<span id="cb200-7"><a href="#cb200-7" aria-hidden="true" tabindex="-1"></a>    &amp;</span>
<span id="cb200-8"><a href="#cb200-8" aria-hidden="true" tabindex="-1"></a>    {<span class="at">:keys</span></span>
<span id="cb200-9"><a href="#cb200-9" aria-hidden="true" tabindex="-1"></a>     [order</span>
<span id="cb200-10"><a href="#cb200-10" aria-hidden="true" tabindex="-1"></a>      seasonal</span>
<span id="cb200-11"><a href="#cb200-11" aria-hidden="true" tabindex="-1"></a>      xreg</span>
<span id="cb200-12"><a href="#cb200-12" aria-hidden="true" tabindex="-1"></a>      include.mean</span>
<span id="cb200-13"><a href="#cb200-13" aria-hidden="true" tabindex="-1"></a>      delta</span>
<span id="cb200-14"><a href="#cb200-14" aria-hidden="true" tabindex="-1"></a>      transform.pars</span>
<span id="cb200-15"><a href="#cb200-15" aria-hidden="true" tabindex="-1"></a>      fixed</span>
<span id="cb200-16"><a href="#cb200-16" aria-hidden="true" tabindex="-1"></a>      init</span>
<span id="cb200-17"><a href="#cb200-17" aria-hidden="true" tabindex="-1"></a>      method</span>
<span id="cb200-18"><a href="#cb200-18" aria-hidden="true" tabindex="-1"></a>      n.<span class="kw">cond</span></span>
<span id="cb200-19"><a href="#cb200-19" aria-hidden="true" tabindex="-1"></a>      optim.control]}]),</span>
<span id="cb200-20"><a href="#cb200-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">:name</span> arima0,</span>
<span id="cb200-21"><a href="#cb200-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">:ns</span> r.stats}</span>
<span id="cb200-22"><a href="#cb200-22" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([&amp; {<span class="at">:keys</span> [which]}]), <span class="at">:name</span> dev-off, <span class="at">:ns</span> r.grDevices}</span>
<span id="cb200-23"><a href="#cb200-23" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([]), <span class="at">:name</span> Sys-info, <span class="at">:ns</span> r.base}</span>
<span id="cb200-24"><a href="#cb200-24" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([object &amp; {<span class="at">:keys</span> [... digits quantile.<span class="kw">type</span>]}]),</span>
<span id="cb200-25"><a href="#cb200-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">:name</span> summary-default,</span>
<span id="cb200-26"><a href="#cb200-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">:ns</span> r.base}</span>
<span id="cb200-27"><a href="#cb200-27" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([x]), <span class="at">:name</span> sin, <span class="at">:ns</span> r.base}</span>
<span id="cb200-28"><a href="#cb200-28" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([&amp; {<span class="at">:keys</span> [... na.rm]}]), <span class="at">:name</span> sum, <span class="at">:ns</span> r.base})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="background-color:grey;height:2px;width:100%;"></div>
<div><pre><small><small>source: notebooks/clojisr/v1/tutorial.clj</small></small></pre></div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>