<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.10">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>clojisr.v1.tutorial</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="clojisr.v1.tutorial_files/libs/clipboard/clipboard.min.js"></script>
<script src="clojisr.v1.tutorial_files/libs/quarto-html/quarto.js"></script>
<script src="clojisr.v1.tutorial_files/libs/quarto-html/popper.min.js"></script>
<script src="clojisr.v1.tutorial_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="clojisr.v1.tutorial_files/libs/quarto-html/anchor.min.js"></script>
<link href="clojisr.v1.tutorial_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="clojisr.v1.tutorial_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="clojisr.v1.tutorial_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="clojisr.v1.tutorial_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="clojisr.v1.tutorial_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link rel="icon" href="data:,">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#clojisr-tutorial" id="toc-clojisr-tutorial" class="nav-link active" data-scroll-target="#clojisr-tutorial">Clojisr tutorial</a>
  <ul>
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup">Setup</a></li>
  <li><a href="#basic-examples" id="toc-basic-examples" class="nav-link" data-scroll-target="#basic-examples">Basic examples</a></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions">Functions</a></li>
  <li><a href="#r-dataframes-and-tech.ml.dataset-datasets" id="toc-r-dataframes-and-tech.ml.dataset-datasets" class="nav-link" data-scroll-target="#r-dataframes-and-tech.ml.dataset-datasets">R dataframes and tech.ml.dataset datasets</a></li>
  <li><a href="#r-objects" id="toc-r-objects" class="nav-link" data-scroll-target="#r-objects">R objects</a></li>
  <li><a href="#generating-code" id="toc-generating-code" class="nav-link" data-scroll-target="#generating-code">Generating code</a></li>
  <li><a href="#running-generated-code" id="toc-running-generated-code" class="nav-link" data-scroll-target="#running-generated-code">Running generated code</a></li>
  <li><a href="#requiring-r-packages" id="toc-requiring-r-packages" class="nav-link" data-scroll-target="#requiring-r-packages">Requiring R packages</a></li>
  <li><a href="#data-visualization" id="toc-data-visualization" class="nav-link" data-scroll-target="#data-visualization">Data visualization</a></li>
  <li><a href="#intermediary-representation-as-java-objects." id="toc-intermediary-representation-as-java-objects." class="nav-link" data-scroll-target="#intermediary-representation-as-java-objects.">Intermediary representation as Java objects.</a></li>
  <li><a href="#more-data-conversion-examples" id="toc-more-data-conversion-examples" class="nav-link" data-scroll-target="#more-data-conversion-examples">More data conversion examples</a>
  <ul class="collapse">
  <li><a href="#basic-types-convertion-clj-r-clj" id="toc-basic-types-convertion-clj-r-clj" class="nav-link" data-scroll-target="#basic-types-convertion-clj-r-clj">Basic types convertion clj-&gt;r-&gt;clj</a></li>
  <li><a href="#various-r-objects" id="toc-various-r-objects" class="nav-link" data-scroll-target="#various-r-objects">Various R objects</a></li>
  </ul></li>
  <li><a href="#inspecting-r-functions" id="toc-inspecting-r-functions" class="nav-link" data-scroll-target="#inspecting-r-functions">Inspecting R functions</a></li>
  <li><a href="#r-function-arglists" id="toc-r-function-arglists" class="nav-link" data-scroll-target="#r-function-arglists">R-function-arglists</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">




<style></style>
<style>.printedClojure .sourceCode {
  background-color: transparent;
  border-style: none;
}
</style>
<style>.clay-limit-image-width .clay-image {max-width: 100%}
</style>
<script src="clojisr.v1.tutorial_files/md-default1.js" type="text/javascript"></script>
<script src="clojisr.v1.tutorial_files/md-default2.js" type="text/javascript"></script>
<section id="clojisr-tutorial" class="level1">
<h1>Clojisr tutorial</h1>
<section id="setup" class="level2">
<h2 class="anchored" data-anchor-id="setup">Setup</h2>
<div class="sourceClojure">
<div class="sourceCode" id="cb1"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">ns</span> clojisr.v1.tutorial</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  (<span class="at">:require</span> [clojisr.v1.r <span class="at">:as</span> r <span class="at">:refer</span> [r eval-r-&gt;java r-&gt;java java-&gt;r java-&gt;clj java-&gt;native-clj clj-&gt;java r-&gt;clj clj-&gt;r -&gt;code r+ colon require-r]]</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>            [clojisr.v1.robject <span class="at">:as</span> robject]</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>            [clojisr.v1.session <span class="at">:as</span> session]</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>            [tech.v3.dataset <span class="at">:as</span> dataset]</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>            [scicloj.kindly.v4.kind <span class="at">:as</span> kind]</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>            [scicloj.kindly.v4.api <span class="at">:as</span> kindly]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="basic-examples" class="level2">
<h2 class="anchored" data-anchor-id="basic-examples">Basic examples</h2>
<p>Let us start by some basic usage examples of Clojisr.</p>
<p>First, let us make sure that we use the Rserve backend (in case we were using another engine instead earlier), and that there are no R sessions currently running. This is typically not needed if you just started working. Here, we do it just in case.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb2"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>(r/set-default-session-type! <span class="at">:rserve</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb3"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:session-type</span> <span class="at">:rserve</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb4"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>(r/discard-all-sessions)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb5"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>{}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now let us run some R code, and keep a Clojure handle to the return value.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb6"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> x </span>(r <span class="st">"1+2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The thing we created is something called an ROBject.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb7"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">class</span> x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb8"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>clojisr.v1.robject.RObject</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If we wish, we can convert an ROBject to Clojure:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb9"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>(r-&gt;clj x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb10"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">3.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us see more examples of creating ROBjects and converting them to Clojure:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb11"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> <span class="st">"list(A=1,B=2,'#123strange&lt;text&gt; ()'=3)"</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>     r</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>     r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb12"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:A</span> [<span class="fl">1.0</span>], <span class="at">:B</span> [<span class="fl">2.0</span>], <span class="st">"#123strange&lt;text&gt; ()"</span> [<span class="fl">3.0</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the other direction, we can convert Clojure data to R data. Note that <code>nil</code> is turned to <code>NA</code>.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb13"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> [<span class="dv">1</span> <span class="va">nil</span> <span class="dv">3</span>]</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    clj-&gt;r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb14"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">1</span> NA  <span class="dv">3</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can run code on a separate R session (specify session-args which are different than the default ones).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb15"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1+2"</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    (r <span class="at">:session-args</span> {<span class="at">:session-name</span> <span class="st">"mysession"</span>})</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb16"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">3.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="functions" class="level2">
<h2 class="anchored" data-anchor-id="functions">Functions</h2>
<p>An R function is also a Clojure function.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb17"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> f </span>(r <span class="st">"function(x) x*10"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us apply it to Clojure data (implicitly converting that data to R).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb18"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="dv">5</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb19"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">50.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can also apply it to R data.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb20"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"5*5"</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb21"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">250.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Functions can get named arguments. Here we pass the <code>na.rm</code> argument, that tells R whether to remove missing values whenn computing the mean.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb22"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>(r-&gt;clj ((r <span class="st">"mean"</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>         [<span class="dv">1</span> <span class="va">nil</span> <span class="dv">3</span>]</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">:na.rm</span> <span class="va">true</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb23"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">2.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Another example:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb24"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [f (r <span class="st">"function(w,x,y=10,z=20) w+x+y+z"</span>)]</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;&gt;</span> [(f <span class="dv">1</span> <span class="dv">2</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>        (f <span class="dv">1</span> <span class="dv">2</span> <span class="at">:y</span> <span class="dv">100</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>        (f <span class="dv">1</span> <span class="dv">2</span> <span class="at">:z</span> <span class="dv">100</span>)]</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>       (<span class="kw">map</span> r-&gt;clj)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb25"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>([<span class="fl">33.0</span>] [<span class="fl">123.0</span>] [<span class="fl">113.0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Some functions are already created in Clojisr and given special names for convenience. Here are some examples:</p>
<p>R addition:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb26"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> (r+ <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>     r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb27"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">6</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>R colon (<code>:</code>), for creating a range of integers, like <code>0:9</code>:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb28"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>(r-&gt;clj (colon <span class="dv">0</span> <span class="dv">9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb29"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="r-dataframes-and-tech.ml.dataset-datasets" class="level2">
<h2 class="anchored" data-anchor-id="r-dataframes-and-tech.ml.dataset-datasets">R dataframes and tech.ml.dataset datasets</h2>
<p>At Clojure, we have a structure that is equivalent to R dataframes: a <a href="https://github.com/techascent/tech.ml.dataset">tech.ml.dataset</a> dataset.</p>
<p>Let us create such a dataset, pass it to an R function to compute the row means, and then convert the return value back to Clojure.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb30"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [row-means (r <span class="st">"function(data) rowMeans(data)"</span>)]</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> {<span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]}</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>      dataset/-&gt;dataset</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>      row-means</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>      r-&gt;clj))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb31"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">2.5</span> <span class="fl">3.5</span> <span class="fl">4.5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us see some more dataset proccessing through R.</p>
<p>Loading the R package <a href="https://dplyr.tidyverse.org/">dplyr</a> (assuming it is installed).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb32"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>(r <span class="st">"library(dplyr)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb33"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"dplyr"</span>     <span class="st">"Rserve"</span>    <span class="st">"stats"</span>     <span class="st">"graphics"</span>  <span class="st">"grDevices"</span> <span class="st">"utils"</span>    </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">7</span>] <span class="st">"datasets"</span>  <span class="st">"methods"</span>   <span class="st">"base"</span>     </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Using dplyr to process some Clojure dataset, and convert back to the resulting dataset.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb34"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [filter-by-x  (r <span class="st">"function(data) filter(data, x&gt;=2)"</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>      add-z-column (r <span class="st">"function(data) mutate(data, z=x+y)"</span>)]</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> {<span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]}</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>      dataset/-&gt;dataset</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>      filter-by-x</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>      add-z-column</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>      r-&gt;clj))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>_unnamed [2 3]:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">:x</th>
<th style="text-align: right;">:y</th>
<th style="text-align: right;">:z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">9</td>
</tr>
</tbody>
</table>
</div>
<p><a href="https://tibble.tidyverse.org">Tibbles</a>, which are a more recent R dataframe notion, are also supported, as a special case of data frames.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb35"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>(r <span class="st">"library(tibble)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb36"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">"tibble"</span>    <span class="st">"dplyr"</span>     <span class="st">"Rserve"</span>    <span class="st">"stats"</span>     <span class="st">"graphics"</span>  <span class="st">"grDevices"</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] <span class="st">"utils"</span>     <span class="st">"datasets"</span>  <span class="st">"methods"</span>   <span class="st">"base"</span>     </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb37"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [tibble (r <span class="st">"tibble"</span>)]</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  (tibble</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>   <span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>   <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb38"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a># A tibble: <span class="dv">3</span> × <span class="dv">2</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>      x     y</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  &lt;int&gt; &lt;int&gt;</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">2</span>     <span class="dv">5</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">3</span>     <span class="dv">6</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb39"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [tibble (r <span class="st">"tibble"</span>)]</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> (tibble</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>])</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>      r-&gt;clj</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>      dataset/mapseq-reader))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb40"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>[{<span class="at">:x</span> <span class="dv">1</span>, <span class="at">:y</span> <span class="dv">4</span>} {<span class="at">:x</span> <span class="dv">2</span>, <span class="at">:y</span> <span class="dv">5</span>} {<span class="at">:x</span> <span class="dv">3</span>, <span class="at">:y</span> <span class="dv">6</span>}]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="r-objects" class="level2">
<h2 class="anchored" data-anchor-id="r-objects">R objects</h2>
<p>Clojisr holds handles to R objects, that are stored in memory at the R session, where they are assigned random names.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb41"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> one+two </span>(r <span class="st">"1+2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb42"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">class</span> one+two)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb43"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>clojisr.v1.robject.RObject</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The name of an object is the place where it is held at R (inside an R <a href="http://adv-r.had.co.nz/Environments.html">evnironment</a> called <code>.MEM</code>).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb44"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">:object-name</span> one+two)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb45"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x1458a70e1f7e41b0"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="generating-code" class="level2">
<h2 class="anchored" data-anchor-id="generating-code">Generating code</h2>
<p>Let us see the mechanism by which clojisr generates R code, and the rules defining it.</p>
<p>Since we are playing a bit with the internals here, we will need a reference to the R session:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb46"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> session</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  (session/fetch-or-make <span class="va">nil</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For the following examples, we will use some <strong>dummy</strong> handles to R objects with given names:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb47"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> x </span>(robject/-&gt;RObject <span class="st">"robject_x"</span> session <span class="va">nil</span> <span class="va">nil</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb48"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> y </span>(robject/-&gt;RObject <span class="st">"robject_y"</span> session <span class="va">nil</span> <span class="va">nil</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>.. and some <strong>real</strong> handles to R objects:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb49"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> minus-eleven </span>(r <span class="st">"-11"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb50"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> abs </span>(r <span class="st">"abs"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The function <code>-&gt;code</code> generates R code according to a certain set of rules. Here we describe some of these rules briefly. We also wrote a dedicated tutorial about the rule set more thoroughly.</p>
<p>For an ROBject, the generated code is just the ROBject name.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb51"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb52"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="st">"robject_x"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a clojure value, we use some form analysis and generate proper R string or values.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb53"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code <span class="st">"hello"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb54"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="st">"</span><span class="sc">\"</span><span class="st">hello</span><span class="sc">\"</span><span class="st">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb55"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb56"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="st">"c(1L,2L,3L)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a symbol, we generate the code with the corresponding R symbol.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb57"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code <span class="at">'x</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb58"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="st">"x"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A sequential structure (list, vector, etc.) can be interpreted as a compound expression, for which code generation is defined accorting to the first list element.</p>
<p>For a list beginning with the symbol <code>'function</code>, we generate an R function definition.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb59"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb60"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {x}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a vector instead of list, we create R vector.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb61"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '[function [x y] x])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb62"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="st">"c(function,c(x,y),x)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a list beginning with the symbol <code>'formula</code>, we generate an R <code>~</code>-formula.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb63"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(formula x y))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb64"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="st">"(x~y)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a list beginning with a symbol known to be a binary operator, we generate nested calls.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb65"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(<span class="kw">+</span> x y z))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb66"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="st">"((x+y)+z)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a list beginning with another symbol, we generate a function call with that symbol as the function name.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb67"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(f x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb68"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="st">"f(x)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a list beginning with an R object that is a function, we generate a function call with that object as the function. If you create the list using the quote sign (<code>'</code>), don’t forget to unquote symbols refering to things you defined on the Clojure side.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb69"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(<span class="at">~abs</span> x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb70"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x3a1c5908fa48442b(x)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>All other sequential things (that is, those not beginning with a symbol or R function) are intepreted as data, converted implicitly R data representation.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb71"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code `(<span class="at">~abs</span> (<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb72"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x3a1c5908fa48442b(c(1L,2L,3L))"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Some more examples, showing how these rules compose:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb73"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (f y)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb74"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {f(y)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb75"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (f <span class="at">~y</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb76"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {f(robject_y)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb77"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (<span class="kw">+</span> x y)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb78"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {(x+y)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb79"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code (<span class="kw">list</span> <span class="at">'function</span> '[x y] (<span class="kw">list</span> <span class="at">'+</span> <span class="at">'x</span> <span class="at">'y</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb80"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {(x+y)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb81"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (<span class="kw">print</span> x) (f x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb82"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {print(x);f(x)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb83"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (<span class="at">~abs</span> x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb84"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {.MEM$x3a1c5908fa48442b(x)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb85"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(<span class="at">~abs</span> <span class="at">~minus-eleven</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb86"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x3a1c5908fa48442b(.MEM$x1b45b9e80178486f)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb87"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(<span class="at">~abs</span> -<span class="dv">11</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb88"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x3a1c5908fa48442b(-11L)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Use syntax quote ` in case you want to use local bindings.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb89"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [minus-ten -<span class="dv">10</span>]</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  (-&gt;code `(<span class="at">~abs</span> <span class="at">~minus-ten</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb90"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x3a1c5908fa48442b(-10L)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="running-generated-code" class="level2">
<h2 class="anchored" data-anchor-id="running-generated-code">Running generated code</h2>
<p>Clojure forms can be run as R code. Behind the scences, they are turned to R code using the <code>-&gt;code</code> function described above. For example:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb91"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> '(<span class="at">~abs</span> ~(<span class="kw">range</span> -<span class="dv">3</span> <span class="dv">0</span>))</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb92"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span> <span class="dv">2</span> <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Or, equivalently:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb93"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> '(<span class="at">~abs</span> ~(<span class="kw">range</span> -<span class="dv">3</span> <span class="dv">0</span>))</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>    -&gt;code</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb94"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span> <span class="dv">2</span> <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us repeat the basic examples from the beginning of this tutorial, this time generating code rather than writing it as Strings.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb95"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> x </span>(r '(<span class="kw">+</span> <span class="dv">1</span> <span class="dv">2</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb96"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>(r-&gt;clj x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb97"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb98"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> f </span>(r '(function [x] (<span class="kw">*</span> x <span class="dv">10</span>))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb99"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="dv">5</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb100"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">50</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb101"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"5*5"</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb102"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">250.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb103"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [row-means (r '(function [data] (rowMeans data)))]</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> {<span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]}</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>      dataset/-&gt;dataset</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>      row-means</span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>      r-&gt;clj))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb104"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">2.5</span> <span class="fl">3.5</span> <span class="fl">4.5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb105"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>(r '(library dplyr))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb106"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">"tibble"</span>    <span class="st">"dplyr"</span>     <span class="st">"Rserve"</span>    <span class="st">"stats"</span>     <span class="st">"graphics"</span>  <span class="st">"grDevices"</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] <span class="st">"utils"</span>     <span class="st">"datasets"</span>  <span class="st">"methods"</span>   <span class="st">"base"</span>     </span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb107"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [filter-by-x  (r '(function [data] (<span class="kw">filter</span> data (<span class="kw">&gt;=</span> x <span class="dv">2</span>))))</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>      add-z-column (r '(function [data] (mutate data (<span class="kw">=</span> z (<span class="kw">+</span> x y)))))]</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;&gt;</span> {<span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]}</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>       dataset/-&gt;dataset</span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>       filter-by-x</span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>       add-z-column</span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>       r-&gt;clj))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>_unnamed [2 3]:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">:x</th>
<th style="text-align: right;">:y</th>
<th style="text-align: right;">:z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">9</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="requiring-r-packages" class="level2">
<h2 class="anchored" data-anchor-id="requiring-r-packages">Requiring R packages</h2>
<p>Sometimes, we want to bring to the Clojure world functions and data from R packages. Here, we try to follow the <a href="https://github.com/cnuernber/libpython-clj/blob/master/test/libpython_clj/require_python_test.clj">require-python</a> syntax of <a href="https://github.com/cnuernber/libpython-clj">libpython-clj</a> (though currently in a less sophisticated way.)</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb108"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>(require-r '[stats <span class="at">:as</span> statz <span class="at">:refer</span> [median]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb109"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb110"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>    r.stats/median</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj</span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb111"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb112"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>    statz/median</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb113"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb114"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>    median</span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb115"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb116"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>(require-r '[datasets <span class="at">:as</span> datasetz <span class="at">:refer</span> [euro]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb117"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb118"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>[r.datasets/euro</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a> datasetz/euro</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a> euro]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb119"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>[        ATS         BEF         DEM         ESP         FIM         FRF </span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="fl">13.760300</span>   <span class="fl">40.339900</span>    <span class="fl">1.955830</span>  <span class="fl">166.386000</span>    <span class="fl">5.945730</span>    <span class="fl">6.559570</span> </span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>        IEP         ITL         LUF         NLG         PTE </span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>   <span class="fl">0.787564</span> <span class="fl">1936.270000</span>   <span class="fl">40.339900</span>    <span class="fl">2.203710</span>  <span class="fl">200.482000</span> </span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>         ATS         BEF         DEM         ESP         FIM         FRF </span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a>  <span class="fl">13.760300</span>   <span class="fl">40.339900</span>    <span class="fl">1.955830</span>  <span class="fl">166.386000</span>    <span class="fl">5.945730</span>    <span class="fl">6.559570</span> </span>
<span id="cb119-8"><a href="#cb119-8" aria-hidden="true" tabindex="-1"></a>        IEP         ITL         LUF         NLG         PTE </span>
<span id="cb119-9"><a href="#cb119-9" aria-hidden="true" tabindex="-1"></a>   <span class="fl">0.787564</span> <span class="fl">1936.270000</span>   <span class="fl">40.339900</span>    <span class="fl">2.203710</span>  <span class="fl">200.482000</span> </span>
<span id="cb119-10"><a href="#cb119-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-11"><a href="#cb119-11" aria-hidden="true" tabindex="-1"></a>         ATS         BEF         DEM         ESP         FIM         FRF </span>
<span id="cb119-12"><a href="#cb119-12" aria-hidden="true" tabindex="-1"></a>  <span class="fl">13.760300</span>   <span class="fl">40.339900</span>    <span class="fl">1.955830</span>  <span class="fl">166.386000</span>    <span class="fl">5.945730</span>    <span class="fl">6.559570</span> </span>
<span id="cb119-13"><a href="#cb119-13" aria-hidden="true" tabindex="-1"></a>        IEP         ITL         LUF         NLG         PTE </span>
<span id="cb119-14"><a href="#cb119-14" aria-hidden="true" tabindex="-1"></a>   <span class="fl">0.787564</span> <span class="fl">1936.270000</span>   <span class="fl">40.339900</span>    <span class="fl">2.203710</span>  <span class="fl">200.482000</span> </span>
<span id="cb119-15"><a href="#cb119-15" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb120"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>(require-r '[base <span class="at">:refer</span> [$]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb121"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb122"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> {<span class="at">:a</span> <span class="dv">1</span> <span class="at">:b</span> <span class="dv">2</span>}</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>    ($ <span class="at">'a</span>)</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb123"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-visualization" class="level2">
<h2 class="anchored" data-anchor-id="data-visualization">Data visualization</h2>
<p>Functions creating R plots or any plotting objects generated by various R libraries can be wrapped in a way that returns an SVG, BufferedImage or can be saved to a file. All of them accept additional parameters specified in <code>grDevices</code> R package.</p>
<p>Currently there is a bug that sometimes causes axes and labels to disappear when rendered inside a larger HTML.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb124"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>(require-r '[graphics <span class="at">:refer</span> [plot hist]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb125"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb126"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>(require-r '[ggplot2 <span class="at">:refer</span> [ggplot aes geom_point xlab ylab labs]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb127"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb128"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">require</span> '[clojisr.v1.applications.plotting <span class="at">:refer</span> [plot-&gt;svg plot-&gt;file plot-&gt;buffered-image]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>First example, simple plotting function as SVG string.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb129"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>(plot-&gt;svg</span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a> (<span class="kw">fn</span> []</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>   (<span class="kw">-&gt;&gt;</span> <span class="kw">rand</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a>        (<span class="kw">repeatedly</span> <span class="dv">30</span>)</span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>        (reductions <span class="kw">+</span>)</span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a>        (plot <span class="at">:xlab</span> <span class="st">"t"</span></span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">:ylab</span> <span class="st">"y"</span></span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">:type</span> <span class="st">"l"</span>))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!--?xml version="1.0" encoding="UTF-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="504pt" height="504pt" viewbox="0 0 504 504" version="1.1">
<defs>
<g>
<symbol overflow="visible" id="glyph0-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph0-1">
<path style="stroke:none;" d="M 3.296875 -8.671875 C 2.515625 -8.671875 1.78125 -8.3125 1.34375 -7.734375 C 0.796875 -6.953125 0.515625 -5.8125 0.515625 -4.203125 C 0.515625 -1.265625 1.46875 0.28125 3.296875 0.28125 C 5.09375 0.28125 6.078125 -1.265625 6.078125 -4.125 C 6.078125 -5.8125 5.8125 -6.9375 5.25 -7.734375 C 4.8125 -8.328125 4.109375 -8.671875 3.296875 -8.671875 Z M 3.296875 -7.734375 C 4.4375 -7.734375 5 -6.578125 5 -4.21875 C 5 -1.75 4.453125 -0.59375 3.28125 -0.59375 C 2.15625 -0.59375 1.59375 -1.796875 1.59375 -4.1875 C 1.59375 -6.578125 2.15625 -7.734375 3.296875 -7.734375 Z M 3.296875 -7.734375 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-2">
<path style="stroke:none;" d="M 5.71875 -8.515625 L 1.3125 -8.515625 L 0.6875 -3.875 L 1.65625 -3.875 C 2.140625 -4.46875 2.5625 -4.671875 3.234375 -4.671875 C 4.375 -4.671875 5.078125 -3.890625 5.078125 -2.625 C 5.078125 -1.40625 4.375 -0.65625 3.21875 -0.65625 C 2.296875 -0.65625 1.734375 -1.125 1.46875 -2.09375 L 0.421875 -2.09375 C 0.5625 -1.390625 0.6875 -1.0625 0.9375 -0.75 C 1.421875 -0.09375 2.28125 0.28125 3.234375 0.28125 C 4.953125 0.28125 6.15625 -0.96875 6.15625 -2.765625 C 6.15625 -4.453125 5.046875 -5.609375 3.40625 -5.609375 C 2.8125 -5.609375 2.328125 -5.453125 1.84375 -5.09375 L 2.171875 -7.46875 L 5.71875 -7.46875 Z M 5.71875 -8.515625 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-3">
<path style="stroke:none;" d="M 3.109375 -6.1875 L 3.109375 0 L 4.15625 0 L 4.15625 -8.671875 L 3.46875 -8.671875 C 3.09375 -7.34375 2.859375 -7.15625 1.21875 -6.953125 L 1.21875 -6.1875 Z M 3.109375 -6.1875 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-4">
<path style="stroke:none;" d="M 6.078125 -1.046875 L 1.59375 -1.046875 C 1.703125 -1.765625 2.09375 -2.21875 3.125 -2.859375 L 4.328125 -3.53125 C 5.515625 -4.1875 6.125 -5.078125 6.125 -6.140625 C 6.125 -6.859375 5.84375 -7.53125 5.34375 -8 C 4.84375 -8.453125 4.21875 -8.671875 3.40625 -8.671875 C 2.328125 -8.671875 1.53125 -8.296875 1.0625 -7.546875 C 0.75 -7.09375 0.625 -6.546875 0.59375 -5.671875 L 1.65625 -5.671875 C 1.6875 -6.265625 1.765625 -6.609375 1.90625 -6.90625 C 2.1875 -7.421875 2.734375 -7.75 3.375 -7.75 C 4.328125 -7.75 5.046875 -7.0625 5.046875 -6.125 C 5.046875 -5.421875 4.65625 -4.828125 3.90625 -4.390625 L 2.796875 -3.75 C 1.015625 -2.71875 0.5 -1.90625 0.40625 -0.015625 L 6.078125 -0.015625 Z M 6.078125 -1.046875 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-5">
<path style="stroke:none;" d="M 2.65625 -4 L 3.234375 -4 C 4.375 -4 4.984375 -3.453125 4.984375 -2.40625 C 4.984375 -1.3125 4.328125 -0.65625 3.234375 -0.65625 C 2.078125 -0.65625 1.515625 -1.25 1.4375 -2.515625 L 0.390625 -2.515625 C 0.4375 -1.828125 0.546875 -1.375 0.75 -0.984375 C 1.203125 -0.140625 2.03125 0.28125 3.1875 0.28125 C 4.9375 0.28125 6.078125 -0.78125 6.078125 -2.421875 C 6.078125 -3.53125 5.65625 -4.125 4.625 -4.484375 C 5.421875 -4.8125 5.8125 -5.40625 5.8125 -6.28125 C 5.8125 -7.78125 4.84375 -8.671875 3.234375 -8.671875 C 1.515625 -8.671875 0.59375 -7.71875 0.5625 -5.875 L 1.625 -5.875 C 1.625 -6.40625 1.6875 -6.703125 1.8125 -6.96875 C 2.046875 -7.46875 2.578125 -7.75 3.234375 -7.75 C 4.171875 -7.75 4.734375 -7.1875 4.734375 -6.25 C 4.734375 -5.640625 4.53125 -5.265625 4.0625 -5.0625 C 3.765625 -4.9375 3.390625 -4.890625 2.65625 -4.890625 Z M 2.65625 -4 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-6">
<path style="stroke:none;" d="M 3.046875 -6.28125 L 2.015625 -6.28125 L 2.015625 -8.015625 L 1.015625 -8.015625 L 1.015625 -6.28125 L 0.171875 -6.28125 L 0.171875 -5.46875 L 1.015625 -5.46875 L 1.015625 -0.71875 C 1.015625 -0.078125 1.453125 0.28125 2.234375 0.28125 C 2.5 0.28125 2.71875 0.25 3.046875 0.1875 L 3.046875 -0.640625 C 2.90625 -0.609375 2.765625 -0.59375 2.5625 -0.59375 C 2.140625 -0.59375 2.015625 -0.71875 2.015625 -1.15625 L 2.015625 -5.46875 L 3.046875 -5.46875 Z M 3.046875 -6.28125 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph1-1">
<path style="stroke:none;" d="M -8.671875 -3.296875 C -8.671875 -2.515625 -8.3125 -1.78125 -7.734375 -1.34375 C -6.953125 -0.796875 -5.8125 -0.515625 -4.203125 -0.515625 C -1.265625 -0.515625 0.28125 -1.46875 0.28125 -3.296875 C 0.28125 -5.09375 -1.265625 -6.078125 -4.125 -6.078125 C -5.8125 -6.078125 -6.9375 -5.8125 -7.734375 -5.25 C -8.328125 -4.8125 -8.671875 -4.109375 -8.671875 -3.296875 Z M -7.734375 -3.296875 C -7.734375 -4.4375 -6.578125 -5 -4.21875 -5 C -1.75 -5 -0.59375 -4.453125 -0.59375 -3.28125 C -0.59375 -2.15625 -1.796875 -1.59375 -4.1875 -1.59375 C -6.578125 -1.59375 -7.734375 -2.15625 -7.734375 -3.296875 Z M -7.734375 -3.296875 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-2">
<path style="stroke:none;" d="M -8.515625 -5.71875 L -8.515625 -1.3125 L -3.875 -0.6875 L -3.875 -1.65625 C -4.46875 -2.140625 -4.671875 -2.5625 -4.671875 -3.234375 C -4.671875 -4.375 -3.890625 -5.078125 -2.625 -5.078125 C -1.40625 -5.078125 -0.65625 -4.375 -0.65625 -3.21875 C -0.65625 -2.296875 -1.125 -1.734375 -2.09375 -1.46875 L -2.09375 -0.421875 C -1.390625 -0.5625 -1.0625 -0.6875 -0.75 -0.9375 C -0.09375 -1.421875 0.28125 -2.28125 0.28125 -3.234375 C 0.28125 -4.953125 -0.96875 -6.15625 -2.765625 -6.15625 C -4.453125 -6.15625 -5.609375 -5.046875 -5.609375 -3.40625 C -5.609375 -2.8125 -5.453125 -2.328125 -5.09375 -1.84375 L -7.46875 -2.171875 L -7.46875 -5.71875 Z M -8.515625 -5.71875 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-3">
<path style="stroke:none;" d="M -6.1875 -3.109375 L 0 -3.109375 L 0 -4.15625 L -8.671875 -4.15625 L -8.671875 -3.46875 C -7.34375 -3.09375 -7.15625 -2.859375 -6.953125 -1.21875 L -6.1875 -1.21875 Z M -6.1875 -3.109375 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-4">
<path style="stroke:none;" d="M -6.28125 -4.65625 L -1.390625 -2.921875 L -6.28125 -1.3125 L -6.28125 -0.234375 L 0.03125 -2.359375 L 1.015625 -1.984375 C 1.46875 -1.8125 1.625 -1.59375 1.625 -1.171875 C 1.625 -1.015625 1.609375 -0.859375 1.5625 -0.640625 L 2.453125 -0.640625 C 2.5625 -0.859375 2.609375 -1.0625 2.609375 -1.3125 C 2.609375 -1.640625 2.515625 -1.984375 2.3125 -2.25 C 2.09375 -2.5625 1.828125 -2.75 1.3125 -2.9375 L -6.28125 -5.734375 Z M -6.28125 -4.65625 "></path>
</symbol>
</g>
</defs>
<g id="surface1">
<rect x="0" y="0" width="504" height="504" style="fill:rgb(100%,100%,100%);fill-opacity:1;stroke:none;"></rect>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 74.398438 416.800781 L 87.640625 413.804688 L 100.882812 409.792969 L 114.125 397.746094 L 127.367188 389.765625 L 140.605469 384.53125 L 153.847656 371.914062 L 167.089844 363.417969 L 180.332031 341.460938 L 193.574219 325.085938 L 206.8125 318.25 L 220.054688 295.945312 L 233.296875 288.597656 L 246.539062 268.460938 L 259.78125 254.234375 L 273.019531 248.839844 L 286.261719 248.792969 L 299.503906 231.734375 L 312.746094 219.816406 L 325.984375 203.445312 L 339.226562 192.96875 L 352.46875 179.054688 L 365.710938 166.390625 L 378.953125 162.640625 L 392.191406 154.144531 L 405.433594 132.992188 L 418.675781 129.914062 L 431.917969 113.027344 L 445.160156 90.421875 L 458.398438 72.800781 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 61.160156 430.558594 L 458.398438 430.558594 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 61.160156 430.558594 L 61.160156 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 127.367188 430.558594 L 127.367188 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 193.574219 430.558594 L 193.574219 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 259.78125 430.558594 L 259.78125 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 325.984375 430.558594 L 325.984375 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 392.191406 430.558594 L 392.191406 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 458.398438 430.558594 L 458.398438 437.761719 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-1" x="57.660156" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-2" x="123.867188" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-3" x="186.574219" y="456.228516"></use>
  <use href="#glyph0-1" x="193.574219" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-3" x="252.78125" y="456.228516"></use>
  <use href="#glyph0-2" x="259.78125" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-4" x="318.984375" y="456.228516"></use>
  <use href="#glyph0-1" x="325.984375" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-4" x="385.191406" y="456.228516"></use>
  <use href="#glyph0-2" x="392.191406" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-5" x="451.398438" y="456.228516"></use>
  <use href="#glyph0-1" x="458.398438" y="456.228516"></use>
</g>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 420.5625 L 59.039062 64.140625 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 420.5625 L 51.839844 420.5625 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 301.753906 L 51.839844 301.753906 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 182.949219 L 51.839844 182.949219 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 64.140625 L 51.839844 64.140625 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-1" x="41.509766" y="424.0625"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-2" x="41.509766" y="305.253906"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-3" x="41.509766" y="189.949219"></use>
  <use href="#glyph1-1" x="41.509766" y="182.949219"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-3" x="41.509766" y="71.140625"></use>
  <use href="#glyph1-2" x="41.509766" y="64.140625"></use>
</g>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 430.558594 L 473.761719 430.558594 L 473.761719 59.039062 L 59.039062 59.039062 Z M 59.039062 430.558594 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-6" x="264.898438" y="485.029297"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-4" x="12.708984" y="247.800781"></use>
</g>
</g>
</svg>

<p>ggplot2 plots (or any other plot objects like lattice) can be also turned into SVG.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb130"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>(plot-&gt;svg</span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a> (<span class="kw">let</span> [x (<span class="kw">repeatedly</span> <span class="dv">99</span> <span class="kw">rand</span>)</span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>       y (<span class="kw">map</span> <span class="kw">+</span></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>              x</span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a>              (<span class="kw">repeatedly</span> <span class="dv">99</span> <span class="kw">rand</span>))]</span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a>   (<span class="kw">-&gt;</span> {<span class="at">:x</span> x <span class="at">:y</span> y}</span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>       dataset/-&gt;dataset</span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a>       (ggplot (aes <span class="at">:x</span> x</span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">:y</span> y</span>
<span id="cb130-10"><a href="#cb130-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">:color</span> '(<span class="kw">+</span> x y)</span>
<span id="cb130-11"><a href="#cb130-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">:size</span> '(<span class="kw">/</span> x y)))</span>
<span id="cb130-12"><a href="#cb130-12" aria-hidden="true" tabindex="-1"></a>       (r+ (geom_point)</span>
<span id="cb130-13"><a href="#cb130-13" aria-hidden="true" tabindex="-1"></a>           (xlab <span class="st">"x"</span>)</span>
<span id="cb130-14"><a href="#cb130-14" aria-hidden="true" tabindex="-1"></a>           (ylab <span class="st">"y"</span>)))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!--?xml version="1.0" encoding="UTF-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="504pt" height="504pt" viewbox="0 0 504 504" version="1.1">
<defs>
<g>
<symbol overflow="visible" id="glyph0-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph0-1">
<path style="stroke:none;" d="M 2.421875 -6.359375 C 1.84375 -6.359375 1.3125 -6.09375 0.984375 -5.671875 C 0.578125 -5.109375 0.375 -4.25 0.375 -3.078125 C 0.375 -0.9375 1.078125 0.203125 2.421875 0.203125 C 3.734375 0.203125 4.453125 -0.9375 4.453125 -3.03125 C 4.453125 -4.25 4.265625 -5.078125 3.859375 -5.671875 C 3.53125 -6.109375 3.015625 -6.359375 2.421875 -6.359375 Z M 2.421875 -5.671875 C 3.25 -5.671875 3.671875 -4.828125 3.671875 -3.09375 C 3.671875 -1.28125 3.265625 -0.4375 2.40625 -0.4375 C 1.578125 -0.4375 1.171875 -1.3125 1.171875 -3.0625 C 1.171875 -4.828125 1.578125 -5.671875 2.421875 -5.671875 Z M 2.421875 -5.671875 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-2">
<path style="stroke:none;" d="M 1.6875 -0.921875 L 0.765625 -0.921875 L 0.765625 0 L 1.6875 0 Z M 1.6875 -0.921875 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-3">
<path style="stroke:none;" d="M 4.1875 -6.234375 L 0.96875 -6.234375 L 0.5 -2.84375 L 1.21875 -2.84375 C 1.578125 -3.265625 1.875 -3.421875 2.359375 -3.421875 C 3.203125 -3.421875 3.71875 -2.84375 3.71875 -1.921875 C 3.71875 -1.03125 3.203125 -0.484375 2.359375 -0.484375 C 1.6875 -0.484375 1.265625 -0.828125 1.078125 -1.53125 L 0.3125 -1.53125 C 0.40625 -1.015625 0.5 -0.78125 0.6875 -0.546875 C 1.03125 -0.078125 1.671875 0.203125 2.375 0.203125 C 3.640625 0.203125 4.515625 -0.71875 4.515625 -2.03125 C 4.515625 -3.265625 3.6875 -4.109375 2.5 -4.109375 C 2.0625 -4.109375 1.703125 -4 1.34375 -3.734375 L 1.59375 -5.46875 L 4.1875 -5.46875 Z M 4.1875 -6.234375 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-4">
<path style="stroke:none;" d="M 2.28125 -4.53125 L 2.28125 0 L 3.046875 0 L 3.046875 -6.359375 L 2.546875 -6.359375 C 2.265625 -5.390625 2.09375 -5.25 0.890625 -5.09375 L 0.890625 -4.53125 Z M 2.28125 -4.53125 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-5">
<path style="stroke:none;" d="M 4.453125 -0.765625 L 1.171875 -0.765625 C 1.25 -1.296875 1.53125 -1.625 2.296875 -2.09375 L 3.171875 -2.59375 C 4.046875 -3.0625 4.5 -3.71875 4.5 -4.5 C 4.5 -5.03125 4.28125 -5.53125 3.921875 -5.875 C 3.546875 -6.203125 3.09375 -6.359375 2.5 -6.359375 C 1.703125 -6.359375 1.125 -6.078125 0.78125 -5.53125 C 0.546875 -5.203125 0.453125 -4.796875 0.4375 -4.15625 L 1.21875 -4.15625 C 1.234375 -4.59375 1.296875 -4.84375 1.40625 -5.0625 C 1.59375 -5.4375 2 -5.6875 2.46875 -5.6875 C 3.171875 -5.6875 3.703125 -5.171875 3.703125 -4.484375 C 3.703125 -3.96875 3.40625 -3.53125 2.859375 -3.21875 L 2.046875 -2.75 C 0.75 -2 0.375 -1.40625 0.296875 -0.015625 L 4.453125 -0.015625 Z M 4.453125 -0.765625 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-6">
<path style="stroke:none;" d="M 4.578125 -6.234375 L 0.40625 -6.234375 L 0.40625 -5.46875 L 3.78125 -5.46875 C 2.28125 -3.359375 1.6875 -2.046875 1.21875 0 L 2.046875 0 C 2.390625 -2 3.171875 -3.71875 4.578125 -5.59375 Z M 4.578125 -6.234375 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph1-1">
<path style="stroke:none;" d="M 3.21875 -2.984375 L 5.140625 -5.765625 L 4.109375 -5.765625 L 2.734375 -3.671875 L 1.34375 -5.765625 L 0.296875 -5.765625 L 2.21875 -2.9375 L 0.1875 0 L 1.234375 0 L 2.6875 -2.21875 L 4.140625 0 L 5.203125 0 Z M 3.21875 -2.984375 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-2">
<path style="stroke:none;" d="M 2.59375 -8.015625 C 1.5 -6.578125 0.796875 -4.578125 0.796875 -2.84375 C 0.796875 -1.109375 1.5 0.890625 2.59375 2.328125 L 3.203125 2.328125 C 2.234375 0.765625 1.6875 -1.09375 1.6875 -2.84375 C 1.6875 -4.59375 2.234375 -6.453125 3.203125 -8.015625 Z M 2.59375 -8.015625 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-3">
<path style="stroke:none;" d="M 2.515625 -8.015625 L -0.09375 0.21875 L 0.515625 0.21875 L 3.125 -8.015625 Z M 2.515625 -8.015625 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-4">
<path style="stroke:none;" d="M 4.265625 -5.765625 L 2.671875 -1.28125 L 1.203125 -5.765625 L 0.21875 -5.765625 L 2.171875 0.015625 L 1.8125 0.9375 C 1.65625 1.34375 1.46875 1.5 1.078125 1.5 C 0.921875 1.5 0.796875 1.46875 0.59375 1.4375 L 0.59375 2.25 C 0.78125 2.359375 0.96875 2.390625 1.203125 2.390625 C 1.5 2.390625 1.828125 2.296875 2.0625 2.125 C 2.359375 1.90625 2.515625 1.671875 2.6875 1.203125 L 5.265625 -5.765625 Z M 4.265625 -5.765625 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-5">
<path style="stroke:none;" d="M 1.015625 2.328125 C 2.125 0.890625 2.8125 -1.109375 2.8125 -2.84375 C 2.8125 -4.578125 2.125 -6.578125 1.015625 -8.015625 L 0.421875 -8.015625 C 1.390625 -6.453125 1.921875 -4.59375 1.921875 -2.84375 C 1.921875 -1.09375 1.390625 0.765625 0.421875 2.328125 Z M 1.015625 2.328125 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-6">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph1-7">
<path style="stroke:none;" d="M 5.875 -2.9375 L 3.59375 -2.9375 L 3.59375 -5.21875 L 2.828125 -5.21875 L 2.828125 -2.9375 L 0.546875 -2.9375 L 0.546875 -2.171875 L 2.828125 -2.171875 L 2.828125 0.109375 L 3.59375 0.109375 L 3.59375 -2.171875 L 5.875 -2.171875 Z M 5.875 -2.9375 "></path>
</symbol>
<symbol overflow="visible" id="glyph2-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph2-1">
<path style="stroke:none;" d="M -5.765625 -4.265625 L -1.28125 -2.671875 L -5.765625 -1.203125 L -5.765625 -0.21875 L 0.015625 -2.171875 L 0.9375 -1.8125 C 1.34375 -1.65625 1.5 -1.46875 1.5 -1.078125 C 1.5 -0.921875 1.46875 -0.796875 1.4375 -0.59375 L 2.25 -0.59375 C 2.359375 -0.78125 2.390625 -0.96875 2.390625 -1.203125 C 2.390625 -1.5 2.296875 -1.828125 2.125 -2.0625 C 1.90625 -2.359375 1.671875 -2.515625 1.203125 -2.6875 L -5.765625 -5.265625 Z M -5.765625 -4.265625 "></path>
</symbol>
</g>
<clippath id="clip1">
  <path d="M 37.152344 5.480469 L 436.84375 5.480469 L 436.84375 469.851562 L 37.152344 469.851562 Z M 37.152344 5.480469 "></path>
</clippath>
<clippath id="clip2">
  <path d="M 37.152344 408 L 436.84375 408 L 436.84375 410 L 37.152344 410 Z M 37.152344 408 "></path>
</clippath>
<clippath id="clip3">
  <path d="M 37.152344 297 L 436.84375 297 L 436.84375 299 L 37.152344 299 Z M 37.152344 297 "></path>
</clippath>
<clippath id="clip4">
  <path d="M 37.152344 186 L 436.84375 186 L 436.84375 188 L 37.152344 188 Z M 37.152344 186 "></path>
</clippath>
<clippath id="clip5">
  <path d="M 37.152344 75 L 436.84375 75 L 436.84375 77 L 37.152344 77 Z M 37.152344 75 "></path>
</clippath>
<clippath id="clip6">
  <path d="M 97 5.480469 L 98 5.480469 L 98 469.851562 L 97 469.851562 Z M 97 5.480469 "></path>
</clippath>
<clippath id="clip7">
  <path d="M 189 5.480469 L 190 5.480469 L 190 469.851562 L 189 469.851562 Z M 189 5.480469 "></path>
</clippath>
<clippath id="clip8">
  <path d="M 281 5.480469 L 282 5.480469 L 282 469.851562 L 281 469.851562 Z M 281 5.480469 "></path>
</clippath>
<clippath id="clip9">
  <path d="M 373 5.480469 L 375 5.480469 L 375 469.851562 L 373 469.851562 Z M 373 5.480469 "></path>
</clippath>
<clippath id="clip10">
  <path d="M 37.152344 463 L 436.84375 463 L 436.84375 465 L 37.152344 465 Z M 37.152344 463 "></path>
</clippath>
<clippath id="clip11">
  <path d="M 37.152344 352 L 436.84375 352 L 436.84375 354 L 37.152344 354 Z M 37.152344 352 "></path>
</clippath>
<clippath id="clip12">
  <path d="M 37.152344 241 L 436.84375 241 L 436.84375 243 L 37.152344 243 Z M 37.152344 241 "></path>
</clippath>
<clippath id="clip13">
  <path d="M 37.152344 130 L 436.84375 130 L 436.84375 132 L 37.152344 132 Z M 37.152344 130 "></path>
</clippath>
<clippath id="clip14">
  <path d="M 37.152344 19 L 436.84375 19 L 436.84375 21 L 37.152344 21 Z M 37.152344 19 "></path>
</clippath>
<clippath id="clip15">
  <path d="M 51 5.480469 L 53 5.480469 L 53 469.851562 L 51 469.851562 Z M 51 5.480469 "></path>
</clippath>
<clippath id="clip16">
  <path d="M 143 5.480469 L 145 5.480469 L 145 469.851562 L 143 469.851562 Z M 143 5.480469 "></path>
</clippath>
<clippath id="clip17">
  <path d="M 235 5.480469 L 237 5.480469 L 237 469.851562 L 235 469.851562 Z M 235 5.480469 "></path>
</clippath>
<clippath id="clip18">
  <path d="M 327 5.480469 L 329 5.480469 L 329 469.851562 L 327 469.851562 Z M 327 5.480469 "></path>
</clippath>
<clippath id="clip19">
  <path d="M 419 5.480469 L 421 5.480469 L 421 469.851562 L 419 469.851562 Z M 419 5.480469 "></path>
</clippath>
<clippath id="clip20">
  <path d="M 453.28125 248.824219 L 470.5625 248.824219 L 470.5625 335.222656 L 453.28125 335.222656 Z M 453.28125 248.824219 "></path>
</clippath>
<image id="image10" width="1" height="300" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAEsCAIAAACNMk6CAAAABmJLR0QA/wD/AP+gvaeTAAAAjklEQVQ4jaWTQRKAMAgDd3ik//R1HuOlji3SjNYjhZAEKNt+BCgQIRRIAQRSi2l5hdr79/q1fqBQVw+ErvyipqGH5eh7fNFJi1M+9bC8OT/lrTD9fNYwT/0FpvQzwVju0eObndsd/uUa7qX2NffqNE5w7j7dbCudpXbj2ehX0n3f0ot5pX9/1xkPj79W8p41NH/nSHk1sQAAAABJRU5ErkJggg=="></image>
<pattern id="pattern0" patternunits="userSpaceOnUse" width="1" height="300" patterntransform="matrix(17.28,0,0,0.288,453.281644,248.82274)">
  <use href="#image10"></use>
</pattern>
</defs>
<g id="surface6">
<rect x="0" y="0" width="504" height="504" style="fill:rgb(100%,100%,100%);fill-opacity:1;stroke:none;"></rect>
<rect x="0" y="0" width="504" height="504" style="fill:rgb(100%,100%,100%);fill-opacity:1;stroke:none;"></rect>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 0 504 L 504 504 L 504 0 L 0 0 Z M 0 504 "></path>
<g clip-path="url(#clip1)" clip-rule="nonzero">
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(92.156863%,92.156863%,92.156863%);fill-opacity:1;" d="M 37.152344 469.847656 L 436.84375 469.847656 L 436.84375 5.476562 L 37.152344 5.476562 Z M 37.152344 469.847656 "></path>
</g>
<g clip-path="url(#clip2)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 408.917969 L 436.84375 408.917969 "></path>
</g>
<g clip-path="url(#clip3)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 297.886719 L 436.84375 297.886719 "></path>
</g>
<g clip-path="url(#clip4)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 186.859375 L 436.84375 186.859375 "></path>
</g>
<g clip-path="url(#clip5)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 75.832031 L 436.84375 75.832031 "></path>
</g>
<g clip-path="url(#clip6)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 97.683594 469.847656 L 97.683594 5.480469 "></path>
</g>
<g clip-path="url(#clip7)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 189.703125 469.847656 L 189.703125 5.480469 "></path>
</g>
<g clip-path="url(#clip8)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 281.722656 469.847656 L 281.722656 5.480469 "></path>
</g>
<g clip-path="url(#clip9)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 373.746094 469.847656 L 373.746094 5.480469 "></path>
</g>
<g clip-path="url(#clip10)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 464.429688 L 436.84375 464.429688 "></path>
</g>
<g clip-path="url(#clip11)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 353.402344 L 436.84375 353.402344 "></path>
</g>
<g clip-path="url(#clip12)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 242.375 L 436.84375 242.375 "></path>
</g>
<g clip-path="url(#clip13)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 131.347656 L 436.84375 131.347656 "></path>
</g>
<g clip-path="url(#clip14)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 20.320312 L 436.84375 20.320312 "></path>
</g>
<g clip-path="url(#clip15)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 51.671875 469.847656 L 51.671875 5.480469 "></path>
</g>
<g clip-path="url(#clip16)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 143.691406 469.847656 L 143.691406 5.480469 "></path>
</g>
<g clip-path="url(#clip17)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 235.714844 469.847656 L 235.714844 5.480469 "></path>
</g>
<g clip-path="url(#clip18)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 327.734375 469.847656 L 327.734375 5.480469 "></path>
</g>
<g clip-path="url(#clip19)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 419.753906 469.847656 L 419.753906 5.480469 "></path>
</g>
<path style="fill-rule:nonzero;fill:rgb(22.745098%,47.45098%,67.058824%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(22.745098%,47.45098%,67.058824%);stroke-opacity:1;stroke-miterlimit:10;" d="M 286.152344 192.707031 C 286.152344 199.757812 275.574219 199.757812 275.574219 192.707031 C 275.574219 185.65625 286.152344 185.65625 286.152344 192.707031 "></path>
<path style="fill-rule:nonzero;fill:rgb(10.980392%,23.921569%,35.686275%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(10.980392%,23.921569%,35.686275%);stroke-opacity:1;stroke-miterlimit:10;" d="M 132.3125 386.988281 C 132.3125 390.066406 129.816406 392.558594 126.738281 392.558594 C 123.664062 392.558594 121.167969 390.066406 121.167969 386.988281 C 121.167969 383.910156 123.664062 381.417969 126.738281 381.417969 C 129.816406 381.417969 132.3125 383.910156 132.3125 386.988281 "></path>
<path style="fill-rule:nonzero;fill:rgb(26.666667%,54.901961%,77.254902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(26.666667%,54.901961%,77.254902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 331.027344 132.402344 C 331.027344 139.394531 320.535156 139.394531 320.535156 132.402344 C 320.535156 125.40625 331.027344 125.40625 331.027344 132.402344 "></path>
<path style="fill-rule:nonzero;fill:rgb(9.803922%,21.568627%,32.54902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(9.803922%,21.568627%,32.54902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 63.875 378.246094 C 63.875 381.871094 58.433594 381.871094 58.433594 378.246094 C 58.433594 374.617188 63.875 374.617188 63.875 378.246094 "></path>
<path style="fill-rule:nonzero;fill:rgb(20.784314%,43.529412%,61.960784%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20.784314%,43.529412%,61.960784%);stroke-opacity:1;stroke-miterlimit:10;" d="M 214.808594 195.289062 C 214.808594 201.472656 205.53125 201.472656 205.53125 195.289062 C 205.53125 189.105469 214.808594 189.105469 214.808594 195.289062 "></path>
<path style="fill-rule:nonzero;fill:rgb(22.745098%,47.058824%,66.666667%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(22.745098%,47.058824%,66.666667%);stroke-opacity:1;stroke-miterlimit:10;" d="M 263.851562 182.324219 C 263.851562 189.023438 253.804688 189.023438 253.804688 182.324219 C 253.804688 175.625 263.851562 175.625 263.851562 182.324219 "></path>
<path style="fill-rule:nonzero;fill:rgb(13.333333%,28.235294%,41.568627%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(13.333333%,28.235294%,41.568627%);stroke-opacity:1;stroke-miterlimit:10;" d="M 191.464844 366.421875 C 191.464844 369.929688 188.621094 372.773438 185.113281 372.773438 C 181.605469 372.773438 178.761719 369.929688 178.761719 366.421875 C 178.761719 362.914062 181.605469 360.070312 185.113281 360.070312 C 188.621094 360.070312 191.464844 362.914062 191.464844 366.421875 "></path>
<path style="fill-rule:nonzero;fill:rgb(27.058824%,56.078431%,79.215686%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(27.058824%,56.078431%,79.215686%);stroke-opacity:1;stroke-miterlimit:10;" d="M 396.789062 157.246094 C 396.789062 160.480469 394.167969 163.105469 390.933594 163.105469 C 387.699219 163.105469 385.078125 160.480469 385.078125 157.246094 C 385.078125 154.011719 387.699219 151.390625 390.933594 151.390625 C 394.167969 151.390625 396.789062 154.011719 396.789062 157.246094 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.862745%,35.294118%,50.980392%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.862745%,35.294118%,50.980392%);stroke-opacity:1;stroke-miterlimit:10;" d="M 106.953125 230.265625 C 106.953125 234.730469 100.261719 234.730469 100.261719 230.265625 C 100.261719 225.804688 106.953125 225.804688 106.953125 230.265625 "></path>
<path style="fill-rule:nonzero;fill:rgb(25.098039%,51.764706%,73.333333%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(25.098039%,51.764706%,73.333333%);stroke-opacity:1;stroke-miterlimit:10;" d="M 340.699219 173.875 C 340.699219 176.960938 338.199219 179.460938 335.113281 179.460938 C 332.027344 179.460938 329.527344 176.960938 329.527344 173.875 C 329.527344 170.792969 332.027344 168.292969 335.113281 168.292969 C 338.199219 168.292969 340.699219 170.792969 340.699219 173.875 "></path>
<path style="fill-rule:nonzero;fill:rgb(11.372549%,24.705882%,36.862745%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(11.372549%,24.705882%,36.862745%);stroke-opacity:1;stroke-miterlimit:10;" d="M 125.625 372.929688 C 125.625 379.6875 115.484375 379.6875 115.484375 372.929688 C 115.484375 366.167969 125.625 366.167969 125.625 372.929688 "></path>
<path style="fill-rule:nonzero;fill:rgb(29.019608%,60%,84.313725%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(29.019608%,60%,84.313725%);stroke-opacity:1;stroke-miterlimit:10;" d="M 335.140625 77.90625 C 335.140625 84.558594 325.164062 84.558594 325.164062 77.90625 C 325.164062 71.253906 335.140625 71.253906 335.140625 77.90625 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.862745%,35.686275%,51.764706%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.862745%,35.686275%,51.764706%);stroke-opacity:1;stroke-miterlimit:10;" d="M 233.613281 298.089844 C 233.613281 301.273438 231.035156 303.855469 227.851562 303.855469 C 224.667969 303.855469 222.089844 301.273438 222.089844 298.089844 C 222.089844 294.910156 224.667969 292.328125 227.851562 292.328125 C 231.035156 292.328125 233.613281 294.910156 233.613281 298.089844 "></path>
<path style="fill-rule:nonzero;fill:rgb(17.647059%,37.254902%,53.72549%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(17.647059%,37.254902%,53.72549%);stroke-opacity:1;stroke-miterlimit:10;" d="M 227.085938 275.378906 C 227.085938 278.371094 224.660156 280.796875 221.667969 280.796875 C 218.679688 280.796875 216.253906 278.371094 216.253906 275.378906 C 216.253906 272.390625 218.679688 269.964844 221.667969 269.964844 C 224.660156 269.964844 227.085938 272.390625 227.085938 275.378906 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.901961%,31.372549%,45.882353%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.901961%,31.372549%,45.882353%);stroke-opacity:1;stroke-miterlimit:10;" d="M 56.738281 245.738281 C 56.738281 247.632812 53.898438 247.632812 53.898438 245.738281 C 53.898438 243.839844 56.738281 243.839844 56.738281 245.738281 "></path>
<path style="fill-rule:nonzero;fill:rgb(25.098039%,52.156863%,73.72549%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(25.098039%,52.156863%,73.72549%);stroke-opacity:1;stroke-miterlimit:10;" d="M 291.589844 140.746094 C 291.589844 147.414062 281.589844 147.414062 281.589844 140.746094 C 281.589844 134.078125 291.589844 134.078125 291.589844 140.746094 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.039216%,37.647059%,54.117647%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.039216%,37.647059%,54.117647%);stroke-opacity:1;stroke-miterlimit:10;" d="M 212.628906 262.402344 C 212.628906 269.222656 202.398438 269.222656 202.398438 262.402344 C 202.398438 255.582031 212.628906 255.582031 212.628906 262.402344 "></path>
<path style="fill-rule:nonzero;fill:rgb(29.803922%,61.568627%,86.27451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(29.803922%,61.568627%,86.27451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 361.015625 77.113281 C 361.015625 83.976562 350.714844 83.976562 350.714844 77.113281 C 350.714844 70.246094 361.015625 70.246094 361.015625 77.113281 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.039216%,38.039216%,54.901961%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.039216%,38.039216%,54.901961%);stroke-opacity:1;stroke-miterlimit:10;" d="M 282.339844 299.261719 C 282.339844 302.769531 279.496094 305.609375 275.992188 305.609375 C 272.488281 305.609375 269.644531 302.769531 269.644531 299.261719 C 269.644531 295.757812 272.488281 292.917969 275.992188 292.917969 C 279.496094 292.917969 282.339844 295.757812 282.339844 299.261719 "></path>
<path style="fill-rule:nonzero;fill:rgb(10.588235%,23.529412%,35.294118%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(10.588235%,23.529412%,35.294118%);stroke-opacity:1;stroke-miterlimit:10;" d="M 72.054688 357.382812 C 72.054688 361.441406 65.96875 361.441406 65.96875 357.382812 C 65.96875 353.328125 72.054688 353.328125 72.054688 357.382812 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.686275%,33.72549%,48.627451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.686275%,33.72549%,48.627451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 127.351562 261.660156 C 127.351562 266.847656 119.570312 266.847656 119.570312 261.660156 C 119.570312 256.472656 127.351562 256.472656 127.351562 261.660156 "></path>
<path style="fill-rule:nonzero;fill:rgb(13.72549%,29.019608%,42.745098%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(13.72549%,29.019608%,42.745098%);stroke-opacity:1;stroke-miterlimit:10;" d="M 113.335938 309.390625 C 113.335938 314.664062 105.421875 314.664062 105.421875 309.390625 C 105.421875 304.113281 113.335938 304.113281 113.335938 309.390625 "></path>
<path style="fill-rule:nonzero;fill:rgb(27.058824%,56.470588%,79.215686%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(27.058824%,56.470588%,79.215686%);stroke-opacity:1;stroke-miterlimit:10;" d="M 332.957031 118.054688 C 332.957031 124.957031 322.601562 124.957031 322.601562 118.054688 C 322.601562 111.152344 332.957031 111.152344 332.957031 118.054688 "></path>
<path style="fill-rule:nonzero;fill:rgb(26.27451%,54.117647%,76.470588%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(26.27451%,54.117647%,76.470588%);stroke-opacity:1;stroke-miterlimit:10;" d="M 288.660156 115.269531 C 288.660156 121.730469 278.972656 121.730469 278.972656 115.269531 C 278.972656 108.8125 288.660156 108.8125 288.660156 115.269531 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.901961%,31.764706%,46.27451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.901961%,31.764706%,46.27451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 139.953125 292.292969 C 139.953125 298.078125 131.273438 298.078125 131.273438 292.292969 C 131.273438 286.503906 139.953125 286.503906 139.953125 292.292969 "></path>
<path style="fill-rule:nonzero;fill:rgb(33.72549%,69.411765%,96.862745%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(33.72549%,69.411765%,96.862745%);stroke-opacity:1;stroke-miterlimit:10;" d="M 421.074219 26.585938 C 421.074219 33.601562 410.554688 33.601562 410.554688 26.585938 C 410.554688 19.574219 421.074219 19.574219 421.074219 26.585938 "></path>
<path style="fill-rule:nonzero;fill:rgb(19.215686%,40%,57.647059%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(19.215686%,40%,57.647059%);stroke-opacity:1;stroke-miterlimit:10;" d="M 288.640625 277.789062 C 288.640625 281.167969 285.898438 283.910156 282.519531 283.910156 C 279.140625 283.910156 276.402344 281.167969 276.402344 277.789062 C 276.402344 274.410156 279.140625 271.671875 282.519531 271.671875 C 285.898438 271.671875 288.640625 274.410156 288.640625 277.789062 "></path>
<path style="fill-rule:nonzero;fill:rgb(27.058824%,56.078431%,79.215686%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(27.058824%,56.078431%,79.215686%);stroke-opacity:1;stroke-miterlimit:10;" d="M 359.003906 135.40625 C 359.003906 138.421875 356.558594 140.863281 353.546875 140.863281 C 350.53125 140.863281 348.089844 138.421875 348.089844 135.40625 C 348.089844 132.394531 350.53125 129.949219 353.546875 129.949219 C 356.558594 129.949219 359.003906 132.394531 359.003906 135.40625 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.509804%,30.980392%,45.490196%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.509804%,30.980392%,45.490196%);stroke-opacity:1;stroke-miterlimit:10;" d="M 95.753906 273.078125 C 95.753906 277.484375 89.140625 277.484375 89.140625 273.078125 C 89.140625 268.667969 95.753906 268.667969 95.753906 273.078125 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.823529%,39.215686%,56.078431%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.823529%,39.215686%,56.078431%);stroke-opacity:1;stroke-miterlimit:10;" d="M 190.113281 231.074219 C 190.113281 237.199219 180.925781 237.199219 180.925781 231.074219 C 180.925781 224.949219 190.113281 224.949219 190.113281 231.074219 "></path>
<path style="fill-rule:nonzero;fill:rgb(23.921569%,49.411765%,70.196078%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(23.921569%,49.411765%,70.196078%);stroke-opacity:1;stroke-miterlimit:10;" d="M 372.78125 220.066406 C 372.78125 223.5 369.996094 226.285156 366.5625 226.285156 C 363.128906 226.285156 360.347656 223.5 360.347656 220.066406 C 360.347656 216.632812 363.128906 213.851562 366.5625 213.851562 C 369.996094 213.851562 372.78125 216.632812 372.78125 220.066406 "></path>
<path style="fill-rule:nonzero;fill:rgb(27.843137%,57.647059%,80.784314%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(27.843137%,57.647059%,80.784314%);stroke-opacity:1;stroke-miterlimit:10;" d="M 399.597656 144.507812 C 399.597656 147.703125 397.007812 150.292969 393.8125 150.292969 C 390.617188 150.292969 388.027344 147.703125 388.027344 144.507812 C 388.027344 141.316406 390.617188 138.726562 393.8125 138.726562 C 397.007812 138.726562 399.597656 141.316406 399.597656 144.507812 "></path>
<path style="fill-rule:nonzero;fill:rgb(21.568627%,45.490196%,64.705882%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(21.568627%,45.490196%,64.705882%);stroke-opacity:1;stroke-miterlimit:10;" d="M 319.367188 235.207031 C 319.367188 238.484375 316.710938 241.140625 313.4375 241.140625 C 310.160156 241.140625 307.503906 238.484375 307.503906 235.207031 C 307.503906 231.933594 310.160156 229.277344 313.4375 229.277344 C 316.710938 229.277344 319.367188 231.933594 319.367188 235.207031 "></path>
<path style="fill-rule:nonzero;fill:rgb(29.411765%,60.784314%,85.490196%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(29.411765%,60.784314%,85.490196%);stroke-opacity:1;stroke-miterlimit:10;" d="M 421.386719 119.289062 C 421.386719 122.46875 418.8125 125.042969 415.636719 125.042969 C 412.457031 125.042969 409.882812 122.46875 409.882812 119.289062 C 409.882812 116.113281 412.457031 113.539062 415.636719 113.539062 C 418.8125 113.539062 421.386719 116.113281 421.386719 119.289062 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.294118%,32.54902%,47.45098%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.294118%,32.54902%,47.45098%);stroke-opacity:1;stroke-miterlimit:10;" d="M 185.882812 307.953125 C 185.882812 314.945312 175.398438 314.945312 175.398438 307.953125 C 175.398438 300.964844 185.882812 300.964844 185.882812 307.953125 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.705882%,51.372549%,72.941176%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.705882%,51.372549%,72.941176%);stroke-opacity:1;stroke-miterlimit:10;" d="M 295.179688 149.792969 C 295.179688 156.570312 285.015625 156.570312 285.015625 149.792969 C 285.015625 143.019531 295.179688 143.019531 295.179688 149.792969 "></path>
<path style="fill-rule:nonzero;fill:rgb(27.058824%,55.686275%,78.431373%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(27.058824%,55.686275%,78.431373%);stroke-opacity:1;stroke-miterlimit:10;" d="M 411.710938 171.300781 C 411.710938 174.648438 408.996094 177.363281 405.648438 177.363281 C 402.300781 177.363281 399.585938 174.648438 399.585938 171.300781 C 399.585938 167.953125 402.300781 165.238281 405.648438 165.238281 C 408.996094 165.238281 411.710938 167.953125 411.710938 171.300781 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.823529%,39.607843%,56.862745%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.823529%,39.607843%,56.862745%);stroke-opacity:1;stroke-miterlimit:10;" d="M 185.269531 222.261719 C 185.269531 228.230469 176.316406 228.230469 176.316406 222.261719 C 176.316406 216.292969 185.269531 216.292969 185.269531 222.261719 "></path>
<path style="fill-rule:nonzero;fill:rgb(22.745098%,47.058824%,66.666667%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(22.745098%,47.058824%,66.666667%);stroke-opacity:1;stroke-miterlimit:10;" d="M 314.054688 212.277344 C 314.054688 215.414062 311.511719 217.957031 308.375 217.957031 C 305.242188 217.957031 302.699219 215.414062 302.699219 212.277344 C 302.699219 209.144531 305.242188 206.601562 308.375 206.601562 C 311.511719 206.601562 314.054688 209.144531 314.054688 212.277344 "></path>
<path style="fill-rule:nonzero;fill:rgb(8.235294%,18.039216%,27.843137%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(8.235294%,18.039216%,27.843137%);stroke-opacity:1;stroke-miterlimit:10;" d="M 88.085938 436.394531 C 88.085938 439.617188 85.476562 442.226562 82.257812 442.226562 C 79.039062 442.226562 76.429688 439.617188 76.429688 436.394531 C 76.429688 433.175781 79.039062 430.566406 82.257812 430.566406 C 85.476562 430.566406 88.085938 433.175781 88.085938 436.394531 "></path>
<path style="fill-rule:nonzero;fill:rgb(12.941176%,27.843137%,40.784314%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(12.941176%,27.843137%,40.784314%);stroke-opacity:1;stroke-miterlimit:10;" d="M 63.609375 298.035156 C 63.609375 301.082031 59.039062 301.082031 59.039062 298.035156 C 59.039062 294.988281 63.609375 294.988281 63.609375 298.035156 "></path>
<path style="fill-rule:nonzero;fill:rgb(9.019608%,20.392157%,30.980392%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(9.019608%,20.392157%,30.980392%);stroke-opacity:1;stroke-miterlimit:10;" d="M 72.421875 399.238281 C 72.421875 403.953125 65.347656 403.953125 65.347656 399.238281 C 65.347656 394.523438 72.421875 394.523438 72.421875 399.238281 "></path>
<path style="fill-rule:nonzero;fill:rgb(29.019608%,60%,84.313725%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(29.019608%,60%,84.313725%);stroke-opacity:1;stroke-miterlimit:10;" d="M 373.347656 101.234375 C 373.347656 108.371094 362.644531 108.371094 362.644531 101.234375 C 362.644531 94.101562 373.347656 94.101562 373.347656 101.234375 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.705882%,50.980392%,72.156863%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.705882%,50.980392%,72.156863%);stroke-opacity:1;stroke-miterlimit:10;" d="M 341.050781 181.554688 C 341.050781 184.671875 338.523438 187.199219 335.40625 187.199219 C 332.289062 187.199219 329.761719 184.671875 329.761719 181.554688 C 329.761719 178.4375 332.289062 175.910156 335.40625 175.910156 C 338.523438 175.910156 341.050781 178.4375 341.050781 181.554688 "></path>
<path style="fill-rule:nonzero;fill:rgb(26.27451%,54.509804%,76.862745%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(26.27451%,54.509804%,76.862745%);stroke-opacity:1;stroke-miterlimit:10;" d="M 359.632812 155.453125 C 359.632812 158.542969 357.128906 161.046875 354.039062 161.046875 C 350.953125 161.046875 348.449219 158.542969 348.449219 155.453125 C 348.449219 152.367188 350.953125 149.863281 354.039062 149.863281 C 357.128906 149.863281 359.632812 152.367188 359.632812 155.453125 "></path>
<path style="fill-rule:nonzero;fill:rgb(30.588235%,63.137255%,88.235294%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(30.588235%,63.137255%,88.235294%);stroke-opacity:1;stroke-miterlimit:10;" d="M 381.234375 72.992188 C 381.234375 79.996094 370.730469 79.996094 370.730469 72.992188 C 370.730469 65.988281 381.234375 65.988281 381.234375 72.992188 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.117647%,29.803922%,43.529412%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.117647%,29.803922%,43.529412%);stroke-opacity:1;stroke-miterlimit:10;" d="M 174.125 336.179688 C 174.125 339.1875 171.6875 341.625 168.679688 341.625 C 165.671875 341.625 163.234375 339.1875 163.234375 336.179688 C 163.234375 333.171875 165.671875 330.734375 168.679688 330.734375 C 171.6875 330.734375 174.125 333.171875 174.125 336.179688 "></path>
<path style="fill-rule:nonzero;fill:rgb(17.647059%,37.254902%,53.72549%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(17.647059%,37.254902%,53.72549%);stroke-opacity:1;stroke-miterlimit:10;" d="M 167.953125 242.195312 C 167.953125 248.046875 159.175781 248.046875 159.175781 242.195312 C 159.175781 236.34375 167.953125 236.34375 167.953125 242.195312 "></path>
<path style="fill-rule:nonzero;fill:rgb(9.411765%,20.784314%,31.764706%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(9.411765%,20.784314%,31.764706%);stroke-opacity:1;stroke-miterlimit:10;" d="M 99.203125 406.390625 C 99.203125 413.082031 89.167969 413.082031 89.167969 406.390625 C 89.167969 399.699219 99.203125 399.699219 99.203125 406.390625 "></path>
<path style="fill-rule:nonzero;fill:rgb(20.784314%,43.529412%,61.960784%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20.784314%,43.529412%,61.960784%);stroke-opacity:1;stroke-miterlimit:10;" d="M 243.789062 212.386719 C 243.789062 219.109375 233.703125 219.109375 233.703125 212.386719 C 233.703125 205.660156 243.789062 205.660156 243.789062 212.386719 "></path>
<path style="fill-rule:nonzero;fill:rgb(28.235294%,58.431373%,81.960784%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(28.235294%,58.431373%,81.960784%);stroke-opacity:1;stroke-miterlimit:10;" d="M 424.664062 150.703125 C 424.664062 154.011719 421.980469 156.691406 418.675781 156.691406 C 415.367188 156.691406 412.6875 154.011719 412.6875 150.703125 C 412.6875 147.398438 415.367188 144.714844 418.675781 144.714844 C 421.980469 144.714844 424.664062 147.398438 424.664062 150.703125 "></path>
<path style="fill-rule:nonzero;fill:rgb(19.607843%,40.784314%,58.823529%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(19.607843%,40.784314%,58.823529%);stroke-opacity:1;stroke-miterlimit:10;" d="M 239.902344 239.613281 C 239.902344 246.570312 229.464844 246.570312 229.464844 239.613281 C 229.464844 232.65625 239.902344 232.65625 239.902344 239.613281 "></path>
<path style="fill-rule:nonzero;fill:rgb(22.745098%,47.058824%,66.666667%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(22.745098%,47.058824%,66.666667%);stroke-opacity:1;stroke-miterlimit:10;" d="M 306.171875 207.605469 C 306.171875 210.679688 303.675781 213.175781 300.601562 213.175781 C 297.523438 213.175781 295.027344 210.679688 295.027344 207.605469 C 295.027344 204.527344 297.523438 202.035156 300.601562 202.035156 C 303.675781 202.035156 306.171875 204.527344 306.171875 207.605469 "></path>
<path style="fill-rule:nonzero;fill:rgb(21.176471%,43.921569%,62.745098%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(21.176471%,43.921569%,62.745098%);stroke-opacity:1;stroke-miterlimit:10;" d="M 299.621094 239.15625 C 299.621094 242.355469 297.027344 244.953125 293.824219 244.953125 C 290.625 244.953125 288.03125 242.355469 288.03125 239.15625 C 288.03125 235.957031 290.625 233.359375 293.824219 233.359375 C 297.027344 233.359375 299.621094 235.957031 299.621094 239.15625 "></path>
<path style="fill-rule:nonzero;fill:rgb(25.490196%,52.54902%,74.117647%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(25.490196%,52.54902%,74.117647%);stroke-opacity:1;stroke-miterlimit:10;" d="M 265.25 120.113281 C 265.25 126.363281 255.875 126.363281 255.875 120.113281 C 255.875 113.863281 265.25 113.863281 265.25 120.113281 "></path>
<path style="fill-rule:nonzero;fill:rgb(11.372549%,24.705882%,36.862745%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(11.372549%,24.705882%,36.862745%);stroke-opacity:1;stroke-miterlimit:10;" d="M 147.417969 383.085938 C 147.417969 386.320312 144.792969 388.941406 141.558594 388.941406 C 138.324219 388.941406 135.703125 386.320312 135.703125 383.085938 C 135.703125 379.851562 138.324219 377.226562 141.558594 377.226562 C 144.792969 377.226562 147.417969 379.851562 147.417969 383.085938 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.862745%,35.686275%,51.764706%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.862745%,35.686275%,51.764706%);stroke-opacity:1;stroke-miterlimit:10;" d="M 126.304688 233.726562 C 126.304688 238.675781 118.875 238.675781 118.875 233.726562 C 118.875 228.773438 126.304688 228.773438 126.304688 233.726562 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.862745%,35.294118%,51.372549%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.862745%,35.294118%,51.372549%);stroke-opacity:1;stroke-miterlimit:10;" d="M 139.253906 245.285156 C 139.253906 250.605469 131.273438 250.605469 131.273438 245.285156 C 131.273438 239.964844 139.253906 239.964844 139.253906 245.285156 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.313725%,50.196078%,70.980392%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.313725%,50.196078%,70.980392%);stroke-opacity:1;stroke-miterlimit:10;" d="M 418.238281 238.253906 C 418.238281 241.984375 415.214844 245.007812 411.484375 245.007812 C 407.753906 245.007812 404.726562 241.984375 404.726562 238.253906 C 404.726562 234.519531 407.753906 231.496094 411.484375 231.496094 C 415.214844 231.496094 418.238281 234.519531 418.238281 238.253906 "></path>
<path style="fill-rule:nonzero;fill:rgb(23.137255%,47.843137%,67.843137%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(23.137255%,47.843137%,67.843137%);stroke-opacity:1;stroke-miterlimit:10;" d="M 232.460938 154.664062 C 232.460938 160.773438 223.300781 160.773438 223.300781 154.664062 C 223.300781 148.554688 232.460938 148.554688 232.460938 154.664062 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.313725%,50.196078%,71.372549%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.313725%,50.196078%,71.372549%);stroke-opacity:1;stroke-miterlimit:10;" d="M 404.421875 228.546875 C 404.421875 232.160156 401.492188 235.089844 397.878906 235.089844 C 394.265625 235.089844 391.335938 232.160156 391.335938 228.546875 C 391.335938 224.933594 394.265625 222.003906 397.878906 222.003906 C 401.492188 222.003906 404.421875 224.933594 404.421875 228.546875 "></path>
<path style="fill-rule:nonzero;fill:rgb(26.27451%,54.509804%,76.862745%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(26.27451%,54.509804%,76.862745%);stroke-opacity:1;stroke-miterlimit:10;" d="M 342.367188 143.492188 C 342.367188 150.683594 331.582031 150.683594 331.582031 143.492188 C 331.582031 136.304688 342.367188 136.304688 342.367188 143.492188 "></path>
<path style="fill-rule:nonzero;fill:rgb(20%,41.960784%,60%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20%,41.960784%,60%);stroke-opacity:1;stroke-miterlimit:10;" d="M 169.808594 185.246094 C 169.808594 190.691406 161.644531 190.691406 161.644531 185.246094 C 161.644531 179.800781 169.808594 179.800781 169.808594 185.246094 "></path>
<path style="fill-rule:nonzero;fill:rgb(30.588235%,62.745098%,88.235294%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(30.588235%,62.745098%,88.235294%);stroke-opacity:1;stroke-miterlimit:10;" d="M 387.96875 77.867188 C 387.96875 84.957031 377.332031 84.957031 377.332031 77.867188 C 377.332031 70.777344 387.96875 70.777344 387.96875 77.867188 "></path>
<path style="fill-rule:nonzero;fill:rgb(17.254902%,36.470588%,52.54902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(17.254902%,36.470588%,52.54902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 210.367188 276.519531 C 210.367188 283.484375 199.917969 283.484375 199.917969 276.519531 C 199.917969 269.554688 210.367188 269.554688 210.367188 276.519531 "></path>
<path style="fill-rule:nonzero;fill:rgb(11.764706%,25.490196%,38.039216%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(11.764706%,25.490196%,38.039216%);stroke-opacity:1;stroke-miterlimit:10;" d="M 132.363281 363.773438 C 132.363281 370.527344 122.230469 370.527344 122.230469 363.773438 C 122.230469 357.015625 132.363281 357.015625 132.363281 363.773438 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.862745%,35.294118%,51.372549%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.862745%,35.294118%,51.372549%);stroke-opacity:1;stroke-miterlimit:10;" d="M 170.8125 264.742188 C 170.8125 270.871094 161.621094 270.871094 161.621094 264.742188 C 161.621094 258.617188 170.8125 258.617188 170.8125 264.742188 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.039216%,38.039216%,54.509804%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.039216%,38.039216%,54.509804%);stroke-opacity:1;stroke-miterlimit:10;" d="M 191.625 246.917969 C 191.625 253.222656 182.167969 253.222656 182.167969 246.917969 C 182.167969 240.613281 191.625 240.613281 191.625 246.917969 "></path>
<path style="fill-rule:nonzero;fill:rgb(19.607843%,40.784314%,58.823529%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(19.607843%,40.784314%,58.823529%);stroke-opacity:1;stroke-miterlimit:10;" d="M 208.933594 220.445312 C 208.933594 226.761719 199.457031 226.761719 199.457031 220.445312 C 199.457031 214.125 208.933594 214.125 208.933594 220.445312 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.705882%,50.980392%,72.156863%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.705882%,50.980392%,72.156863%);stroke-opacity:1;stroke-miterlimit:10;" d="M 303.890625 159.621094 C 303.890625 166.566406 293.472656 166.566406 293.472656 159.621094 C 293.472656 152.671875 303.890625 152.671875 303.890625 159.621094 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.686275%,32.941176%,47.843137%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.686275%,32.941176%,47.843137%);stroke-opacity:1;stroke-miterlimit:10;" d="M 126.355469 267.933594 C 126.355469 273.152344 118.53125 273.152344 118.53125 267.933594 C 118.53125 262.71875 126.355469 262.71875 126.355469 267.933594 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.509804%,30.588235%,45.098039%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.509804%,30.588235%,45.098039%);stroke-opacity:1;stroke-miterlimit:10;" d="M 107.175781 284.914062 C 107.175781 289.765625 99.898438 289.765625 99.898438 284.914062 C 99.898438 280.0625 107.175781 280.0625 107.175781 284.914062 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.823529%,39.607843%,57.254902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.823529%,39.607843%,57.254902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 150.773438 200.601562 C 150.773438 205.820312 142.941406 205.820312 142.941406 200.601562 C 142.941406 195.378906 150.773438 195.378906 150.773438 200.601562 "></path>
<path style="fill-rule:nonzero;fill:rgb(28.627451%,59.607843%,83.529412%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(28.627451%,59.607843%,83.529412%);stroke-opacity:1;stroke-miterlimit:10;" d="M 420.828125 135.398438 C 420.828125 138.632812 418.203125 141.253906 414.972656 141.253906 C 411.738281 141.253906 409.117188 138.632812 409.117188 135.398438 C 409.117188 132.164062 411.738281 129.542969 414.972656 129.542969 C 418.203125 129.542969 420.828125 132.164062 420.828125 135.398438 "></path>
<path style="fill-rule:nonzero;fill:rgb(17.647059%,37.254902%,53.72549%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(17.647059%,37.254902%,53.72549%);stroke-opacity:1;stroke-miterlimit:10;" d="M 258.753906 294.292969 C 258.753906 297.609375 256.0625 300.300781 252.746094 300.300781 C 249.425781 300.300781 246.734375 297.609375 246.734375 294.292969 C 246.734375 290.972656 249.425781 288.28125 252.746094 288.28125 C 256.0625 288.28125 258.753906 290.972656 258.753906 294.292969 "></path>
<path style="fill-rule:nonzero;fill:rgb(20.784314%,43.137255%,61.568627%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20.784314%,43.137255%,61.568627%);stroke-opacity:1;stroke-miterlimit:10;" d="M 184.8125 180.941406 C 184.8125 186.589844 176.34375 186.589844 176.34375 180.941406 C 176.34375 175.296875 184.8125 175.296875 184.8125 180.941406 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.509804%,30.588235%,45.098039%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.509804%,30.588235%,45.098039%);stroke-opacity:1;stroke-miterlimit:10;" d="M 122.722656 294.230469 C 122.722656 299.605469 114.660156 299.605469 114.660156 294.230469 C 114.660156 288.855469 122.722656 288.855469 122.722656 294.230469 "></path>
<path style="fill-rule:nonzero;fill:rgb(9.803922%,21.176471%,32.156863%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(9.803922%,21.176471%,32.156863%);stroke-opacity:1;stroke-miterlimit:10;" d="M 87.703125 395.300781 C 87.703125 400.972656 79.199219 400.972656 79.199219 395.300781 C 79.199219 389.632812 87.703125 389.632812 87.703125 395.300781 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.294118%,32.156863%,47.058824%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.294118%,32.156863%,47.058824%);stroke-opacity:1;stroke-miterlimit:10;" d="M 235.976562 342.191406 C 235.976562 345.789062 233.054688 348.710938 229.457031 348.710938 C 225.855469 348.710938 222.9375 345.789062 222.9375 342.191406 C 222.9375 338.589844 225.855469 335.671875 229.457031 335.671875 C 233.054688 335.671875 235.976562 338.589844 235.976562 342.191406 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.823529%,39.215686%,56.078431%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.823529%,39.215686%,56.078431%);stroke-opacity:1;stroke-miterlimit:10;" d="M 196.101562 234.972656 C 196.101562 241.230469 186.714844 241.230469 186.714844 234.972656 C 186.714844 228.714844 196.101562 228.714844 196.101562 234.972656 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.686275%,33.333333%,48.627451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.686275%,33.333333%,48.627451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 74.785156 232.082031 C 74.785156 235.496094 69.664062 235.496094 69.664062 232.082031 C 69.664062 228.667969 74.785156 228.667969 74.785156 232.082031 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.862745%,35.686275%,51.764706%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.862745%,35.686275%,51.764706%);stroke-opacity:1;stroke-miterlimit:10;" d="M 168.171875 259.175781 C 168.171875 265.191406 159.144531 265.191406 159.144531 259.175781 C 159.144531 253.15625 168.171875 253.15625 168.171875 259.175781 "></path>
<path style="fill-rule:nonzero;fill:rgb(17.254902%,36.470588%,52.54902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(17.254902%,36.470588%,52.54902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 176.523438 256.777344 C 176.523438 262.925781 167.304688 262.925781 167.304688 256.777344 C 167.304688 250.632812 176.523438 250.632812 176.523438 256.777344 "></path>
<path style="fill-rule:nonzero;fill:rgb(7.45098%,16.862745%,26.27451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(7.45098%,16.862745%,26.27451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 81.492188 448.742188 C 81.492188 452.371094 78.550781 455.308594 74.925781 455.308594 C 71.296875 455.308594 68.355469 452.371094 68.355469 448.742188 C 68.355469 445.113281 71.296875 442.171875 74.925781 442.171875 C 78.550781 442.171875 81.492188 445.113281 81.492188 448.742188 "></path>
<path style="fill-rule:nonzero;fill:rgb(31.764706%,65.882353%,92.156863%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(31.764706%,65.882353%,92.156863%);stroke-opacity:1;stroke-miterlimit:10;" d="M 407.605469 57.703125 C 407.605469 64.8125 396.945312 64.8125 396.945312 57.703125 C 396.945312 50.597656 407.605469 50.597656 407.605469 57.703125 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.431373%,38.823529%,55.686275%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.431373%,38.823529%,55.686275%);stroke-opacity:1;stroke-miterlimit:10;" d="M 250.695312 272.03125 C 250.695312 275.152344 248.167969 277.679688 245.046875 277.679688 C 241.925781 277.679688 239.398438 275.152344 239.398438 272.03125 C 239.398438 268.914062 241.925781 266.382812 245.046875 266.382812 C 248.167969 266.382812 250.695312 268.914062 250.695312 272.03125 "></path>
<path style="fill-rule:nonzero;fill:rgb(21.960784%,45.490196%,65.098039%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(21.960784%,45.490196%,65.098039%);stroke-opacity:1;stroke-miterlimit:10;" d="M 231.160156 179.0625 C 231.160156 185.335938 221.753906 185.335938 221.753906 179.0625 C 221.753906 172.792969 231.160156 172.792969 231.160156 179.0625 "></path>
<path style="fill-rule:nonzero;fill:rgb(22.352941%,46.27451%,65.882353%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(22.352941%,46.27451%,65.882353%);stroke-opacity:1;stroke-miterlimit:10;" d="M 372.941406 256.117188 C 372.941406 259.773438 369.976562 262.738281 366.324219 262.738281 C 362.667969 262.738281 359.703125 259.773438 359.703125 256.117188 C 359.703125 252.464844 362.667969 249.5 366.324219 249.5 C 369.976562 249.5 372.941406 252.464844 372.941406 256.117188 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.470588%,34.509804%,50.196078%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.470588%,34.509804%,50.196078%);stroke-opacity:1;stroke-miterlimit:10;" d="M 152.859375 263.539062 C 152.859375 269.300781 144.214844 269.300781 144.214844 263.539062 C 144.214844 257.773438 152.859375 257.773438 152.859375 263.539062 "></path>
<path style="fill-rule:nonzero;fill:rgb(19.215686%,40.784314%,58.039216%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(19.215686%,40.784314%,58.039216%);stroke-opacity:1;stroke-miterlimit:10;" d="M 233.378906 239.445312 C 233.378906 246.308594 223.082031 246.308594 223.082031 239.445312 C 223.082031 232.582031 233.378906 232.582031 233.378906 239.445312 "></path>
<path style="fill-rule:nonzero;fill:rgb(19.215686%,40.392157%,57.647059%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(19.215686%,40.392157%,57.647059%);stroke-opacity:1;stroke-miterlimit:10;" d="M 153.621094 196.847656 C 153.621094 202.09375 145.75 202.09375 145.75 196.847656 C 145.75 191.597656 153.621094 191.597656 153.621094 196.847656 "></path>
<path style="fill-rule:nonzero;fill:rgb(17.647059%,36.862745%,53.333333%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(17.647059%,36.862745%,53.333333%);stroke-opacity:1;stroke-miterlimit:10;" d="M 197.910156 263.53125 C 197.910156 270.121094 188.019531 270.121094 188.019531 263.53125 C 188.019531 256.9375 197.910156 256.9375 197.910156 263.53125 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.862745%,35.294118%,51.372549%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.862745%,35.294118%,51.372549%);stroke-opacity:1;stroke-miterlimit:10;" d="M 181.789062 271.011719 C 181.789062 277.410156 172.191406 277.410156 172.191406 271.011719 C 172.191406 264.609375 181.789062 264.609375 181.789062 271.011719 "></path>
<path style="fill-rule:nonzero;fill:rgb(21.960784%,45.882353%,65.098039%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(21.960784%,45.882353%,65.098039%);stroke-opacity:1;stroke-miterlimit:10;" d="M 323.410156 233.203125 C 323.410156 236.488281 320.746094 239.148438 317.460938 239.148438 C 314.179688 239.148438 311.515625 236.488281 311.515625 233.203125 C 311.515625 229.917969 314.179688 227.253906 317.460938 227.253906 C 320.746094 227.253906 323.410156 229.917969 323.410156 233.203125 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.313725%,50.588235%,71.372549%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.313725%,50.588235%,71.372549%);stroke-opacity:1;stroke-miterlimit:10;" d="M 409.847656 229.722656 C 409.847656 233.367188 406.894531 236.320312 403.25 236.320312 C 399.609375 236.320312 396.65625 233.367188 396.65625 229.722656 C 396.65625 226.078125 399.609375 223.125 403.25 223.125 C 406.894531 223.125 409.847656 226.078125 409.847656 229.722656 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.686275%,33.333333%,48.627451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.686275%,33.333333%,48.627451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 74.417969 232.214844 C 74.417969 235.613281 69.320312 235.613281 69.320312 232.214844 C 69.320312 228.816406 74.417969 228.816406 74.417969 232.214844 "></path>
<path style="fill-rule:nonzero;fill:rgb(23.921569%,49.411765%,69.803922%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(23.921569%,49.411765%,69.803922%);stroke-opacity:1;stroke-miterlimit:10;" d="M 386.0625 228.320312 C 386.0625 231.855469 383.195312 234.722656 379.660156 234.722656 C 376.121094 234.722656 373.257812 231.855469 373.257812 228.320312 C 373.257812 224.785156 376.121094 221.917969 379.660156 221.917969 C 383.195312 221.917969 386.0625 224.785156 386.0625 228.320312 "></path>
<path style="fill-rule:nonzero;fill:rgb(13.333333%,28.627451%,41.960784%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(13.333333%,28.627451%,41.960784%);stroke-opacity:1;stroke-miterlimit:10;" d="M 84.546875 297.910156 C 84.546875 302.085938 78.28125 302.085938 78.28125 297.910156 C 78.28125 293.734375 84.546875 293.734375 84.546875 297.910156 "></path>
<path style="fill-rule:nonzero;fill:rgb(9.803922%,21.568627%,32.54902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(9.803922%,21.568627%,32.54902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 108.363281 403.171875 C 108.363281 410.210938 97.808594 410.210938 97.808594 403.171875 C 97.808594 396.136719 108.363281 396.136719 108.363281 403.171875 "></path>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="20.21875" y="467.344727"></use>
  <use href="#glyph0-2" x="25.21875" y="467.344727"></use>
  <use href="#glyph0-1" x="27.21875" y="467.344727"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="20.21875" y="356.317383"></use>
  <use href="#glyph0-2" x="25.21875" y="356.317383"></use>
  <use href="#glyph0-3" x="27.21875" y="356.317383"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-4" x="20.21875" y="245.290039"></use>
  <use href="#glyph0-2" x="25.21875" y="245.290039"></use>
  <use href="#glyph0-1" x="27.21875" y="245.290039"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-4" x="20.21875" y="134.262695"></use>
  <use href="#glyph0-2" x="25.21875" y="134.262695"></use>
  <use href="#glyph0-3" x="27.21875" y="134.262695"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-5" x="20.21875" y="23.235352"></use>
  <use href="#glyph0-2" x="25.21875" y="23.235352"></use>
  <use href="#glyph0-1" x="27.21875" y="23.235352"></use>
</g>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 34.410156 464.429688 L 37.152344 464.429688 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 34.410156 353.402344 L 37.152344 353.402344 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 34.410156 242.375 L 37.152344 242.375 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 34.410156 131.347656 L 37.152344 131.347656 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 34.410156 20.320312 L 37.152344 20.320312 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 51.671875 472.589844 L 51.671875 469.847656 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 143.691406 472.589844 L 143.691406 469.847656 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 235.714844 472.589844 L 235.714844 469.847656 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 327.734375 472.589844 L 327.734375 469.847656 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 419.753906 472.589844 L 419.753906 469.847656 "></path>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="43.171875" y="481.196289"></use>
  <use href="#glyph0-2" x="48.171875" y="481.196289"></use>
  <use href="#glyph0-1" x="50.171875" y="481.196289"></use>
  <use href="#glyph0-1" x="55.171875" y="481.196289"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="135.191406" y="481.196289"></use>
  <use href="#glyph0-2" x="140.191406" y="481.196289"></use>
  <use href="#glyph0-5" x="142.191406" y="481.196289"></use>
  <use href="#glyph0-3" x="147.191406" y="481.196289"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="227.214844" y="481.196289"></use>
  <use href="#glyph0-2" x="232.214844" y="481.196289"></use>
  <use href="#glyph0-3" x="234.214844" y="481.196289"></use>
  <use href="#glyph0-1" x="239.214844" y="481.196289"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="319.234375" y="481.196289"></use>
  <use href="#glyph0-2" x="324.234375" y="481.196289"></use>
  <use href="#glyph0-6" x="326.234375" y="481.196289"></use>
  <use href="#glyph0-3" x="331.234375" y="481.196289"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-4" x="411.253906" y="481.196289"></use>
  <use href="#glyph0-2" x="416.253906" y="481.196289"></use>
  <use href="#glyph0-1" x="418.253906" y="481.196289"></use>
  <use href="#glyph0-1" x="423.253906" y="481.196289"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-1" x="234.496094" y="494.538086"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph2-1" x="13.499023" y="240.164062"></use>
</g>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 447.800781 214.90625 L 498.519531 214.90625 L 498.519531 134.628906 L 447.800781 134.628906 Z M 447.800781 214.90625 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-2" x="453.28125" y="149.624023"></use>
  <use href="#glyph1-1" x="457.28125" y="149.624023"></use>
  <use href="#glyph1-3" x="462.28125" y="149.624023"></use>
  <use href="#glyph1-4" x="465.28125" y="149.624023"></use>
  <use href="#glyph1-5" x="470.28125" y="149.624023"></use>
</g>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(94.901961%,94.901961%,94.901961%);fill-opacity:1;" d="M 453.28125 174.867188 L 470.5625 174.867188 L 470.5625 157.585938 L 453.28125 157.585938 Z M 453.28125 174.867188 "></path>
<path style="fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 466.023438 166.226562 C 466.023438 171.695312 457.820312 171.695312 457.820312 166.226562 C 457.820312 160.753906 466.023438 160.753906 466.023438 166.226562 "></path>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(94.901961%,94.901961%,94.901961%);fill-opacity:1;" d="M 453.28125 192.144531 L 470.5625 192.144531 L 470.5625 174.863281 L 453.28125 174.863281 Z M 453.28125 192.144531 "></path>
<path style="fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 467.175781 183.503906 C 467.175781 190.511719 456.667969 190.511719 456.667969 183.503906 C 456.667969 176.5 467.175781 176.5 467.175781 183.503906 "></path>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(94.901961%,94.901961%,94.901961%);fill-opacity:1;" d="M 453.28125 209.425781 L 470.5625 209.425781 L 470.5625 192.144531 L 453.28125 192.144531 Z M 453.28125 209.425781 "></path>
<path style="fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 468.050781 200.785156 C 468.050781 204.171875 465.308594 206.914062 461.921875 206.914062 C 458.535156 206.914062 455.792969 204.171875 455.792969 200.785156 C 455.792969 197.398438 458.535156 194.65625 461.921875 194.65625 C 465.308594 194.65625 468.050781 197.398438 468.050781 200.785156 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-1" x="476.042969" y="169.141602"></use>
  <use href="#glyph0-2" x="481.042969" y="169.141602"></use>
  <use href="#glyph0-5" x="483.042969" y="169.141602"></use>
  <use href="#glyph0-3" x="488.042969" y="169.141602"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-1" x="476.042969" y="186.418945"></use>
  <use href="#glyph0-2" x="481.042969" y="186.418945"></use>
  <use href="#glyph0-3" x="483.042969" y="186.418945"></use>
  <use href="#glyph0-1" x="488.042969" y="186.418945"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-1" x="476.042969" y="203.700195"></use>
  <use href="#glyph0-2" x="481.042969" y="203.700195"></use>
  <use href="#glyph0-6" x="483.042969" y="203.700195"></use>
  <use href="#glyph0-3" x="488.042969" y="203.700195"></use>
</g>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 447.800781 340.703125 L 488.757812 340.703125 L 488.757812 225.863281 L 447.800781 225.863281 Z M 447.800781 340.703125 "></path>
<g clip-path="url(#clip20)" clip-rule="nonzero">
<rect x="0" y="0" width="504" height="504" style="fill:url(#pattern0);stroke:none;"></rect>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-4" x="476.042969" y="311.610352"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-5" x="476.042969" y="281.15332"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-2" x="453.28125" y="240.862305"></use>
  <use href="#glyph1-1" x="457.28125" y="240.862305"></use>
  <use href="#glyph1-6" x="462.28125" y="240.862305"></use>
  <use href="#glyph1-7" x="465.28125" y="240.862305"></use>
  <use href="#glyph1-6" x="471.28125" y="240.862305"></use>
  <use href="#glyph1-4" x="474.28125" y="240.862305"></use>
  <use href="#glyph1-5" x="479.28125" y="240.862305"></use>
</g>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 453.28125 308.695312 L 456.738281 308.695312 "></path>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 453.28125 278.238281 L 456.738281 278.238281 "></path>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 467.105469 308.695312 L 470.5625 308.695312 "></path>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 467.105469 278.238281 L 470.5625 278.238281 "></path>
</g>
</svg>

<p>Any plot (function or object) can be saved to file or converted to BufferedImage object.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb131"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>(r-&gt;clj (plot-&gt;file <span class="st">"notebooks/images/histogram.jpg"</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>                    (<span class="kw">fn</span> [] (hist [<span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span>]</span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">:main</span> <span class="st">"Histogram"</span></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">:xlab</span> <span class="st">"data: [1 1 1 1 2 3 4 5]"</span>))</span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">:width</span> <span class="dv">800</span> <span class="at">:height</span> <span class="dv">400</span> <span class="at">:quality</span> <span class="dv">50</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb132"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:breaks</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span>],</span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a> <span class="at">:counts</span> [<span class="dv">5</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span>],</span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a> <span class="at">:density</span> [<span class="fl">0.625</span> <span class="fl">0.125</span> <span class="fl">0.125</span> <span class="fl">0.125</span>],</span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a> <span class="at">:mids</span> [<span class="fl">1.5</span> <span class="fl">2.5</span> <span class="fl">3.5</span> <span class="fl">4.5</span>],</span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a> <span class="at">:xname</span> [<span class="st">"c(1L, 1L, 1L, 1L, 2L, 3L, 4L, 5L)"</span>],</span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a> <span class="at">:equidist</span> [<span class="va">true</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb133"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>(kind/hiccup [<span class="at">:image</span> {<span class="at">:src</span> <span class="st">"notebooks/images/histogram.jpg"</span>}])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<img src="notebooks/images/histogram.jpg">
<div class="sourceClojure">
<div class="sourceCode" id="cb134"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>(plot-&gt;buffered-image (<span class="kw">fn</span> [] (hist [<span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span>])) <span class="at">:width</span> <span class="dv">222</span> <span class="at">:height</span> <span class="dv">149</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-image">
<img src="clojisr.v1.tutorial_files/0.png">
</div>
</section>
<section id="intermediary-representation-as-java-objects." class="level2">
<h2 class="anchored" data-anchor-id="intermediary-representation-as-java-objects.">Intermediary representation as Java objects.</h2>
<p>Clojisr relies on the fact of an intemediary representation of java, as Java objects. This is usually hidden from the user, but may be useful sometimes. In the current implementation, this is based on <a href="https://github.com/s-u/REngine">REngine</a>.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb135"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">import</span> (org.rosuda.REngine REXP REXPInteger REXPDouble))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb136"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>org.rosuda.REngine.REXPDouble</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can convert data between R and Java.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb137"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1:9"</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb138"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>org.rosuda.REngine.REXPInteger</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb139"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (REXPInteger. <span class="dv">1</span>)</span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>    java-&gt;r</span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb140"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can further convert data from the java representation to Clojure.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb141"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1:9"</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb142"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On the opposite direction, we can also convert Clojure data into the Java represenattion.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb143"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (<span class="kw">range</span> <span class="dv">1</span> <span class="dv">10</span>)</span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>    clj-&gt;java</span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb144"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>org.rosuda.REngine.REXPInteger</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb145"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (<span class="kw">range</span> <span class="dv">1</span> <span class="dv">10</span>)</span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>    clj-&gt;java</span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb146"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There is an alternative way of conversion from Java to Clojure, naively converting the internal Java representation to a Clojure data structure. It can be handy when one wants to have plain access to all the metadata (R attributes), etc.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb147"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> <span class="st">"1:9"</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>     r</span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>     r-&gt;java</span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a>     java-&gt;native-clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb148"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb149"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> <span class="st">"data.frame(x=1:3,y=factor('a','a','b'))"</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>     r</span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>     r-&gt;java</span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a>     java-&gt;native-clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb150"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:x</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="at">:y</span> [<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can evaluate R code and immediately return the result as a java object, without ever creating a handle to an R object holding the result:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb151"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1+2"</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>    eval-r-&gt;java</span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb152"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>org.rosuda.REngine.REXPDouble</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb153"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1+2"</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>    eval-r-&gt;java</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>    (.asDoubles)</span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">vec</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb154"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">3.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="more-data-conversion-examples" class="level2">
<h2 class="anchored" data-anchor-id="more-data-conversion-examples">More data conversion examples</h2>
<p>Convertion between R and Clojure always passes through Java. To stress this, we write it explicitly in the following examples.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb155"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"list(a=1:2,b='hi!')"</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb156"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>], <span class="at">:b</span> [<span class="st">"hi!"</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Partially named lists are also supported</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb157"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"list(a=1:2,'hi!')"</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb158"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>], <span class="dv">1</span> [<span class="st">"hi!"</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb159"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"table(c('a','b','a','b','a','b','a','b'), c(1,1,2,2,3,3,1,1))"</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj</span>
<span id="cb159-5"><a href="#cb159-5" aria-hidden="true" tabindex="-1"></a>    dataset/mapseq-reader</span>
<span id="cb159-6"><a href="#cb159-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb160"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>#{{<span class="dv">0</span> <span class="st">"a"</span>, <span class="dv">1</span> <span class="st">"2"</span>, :$value <span class="dv">2</span>}</span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"b"</span>, <span class="dv">1</span> <span class="st">"3"</span>, :$value <span class="dv">1</span>}</span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"a"</span>, <span class="dv">1</span> <span class="st">"1"</span>, :$value <span class="dv">2</span>}</span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"a"</span>, <span class="dv">1</span> <span class="st">"3"</span>, :$value <span class="dv">1</span>}</span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"b"</span>, <span class="dv">1</span> <span class="st">"2"</span>, :$value <span class="dv">1</span>}</span>
<span id="cb160-6"><a href="#cb160-6" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"b"</span>, <span class="dv">1</span> <span class="st">"1"</span>, :$value <span class="dv">1</span>}}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb161"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> {<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>] <span class="at">:b</span> <span class="st">"hi!"</span>}</span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>    clj-&gt;java</span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>    java-&gt;r</span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb162"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>], <span class="at">:b</span> [<span class="st">"hi!"</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb163"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> {<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>] <span class="at">:b</span> <span class="st">"hi!"</span>}</span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>     clj-&gt;java</span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a>     java-&gt;r</span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a>     ((r <span class="st">"deparse"</span>))</span>
<span id="cb163-5"><a href="#cb163-5" aria-hidden="true" tabindex="-1"></a>     r-&gt;java</span>
<span id="cb163-6"><a href="#cb163-6" aria-hidden="true" tabindex="-1"></a>     java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb164"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>[<span class="st">"list(a = 1:2, b = </span><span class="sc">\"</span><span class="st">hi!</span><span class="sc">\"</span><span class="st">)"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="basic-types-convertion-clj-r-clj" class="level3">
<h3 class="anchored" data-anchor-id="basic-types-convertion-clj-r-clj">Basic types convertion clj-&gt;r-&gt;clj</h3>
<div class="sourceClojure">
<div class="sourceCode" id="cb165"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> clj-&gt;r-&gt;clj </span>(<span class="kw">comp</span> r-&gt;clj r))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb166"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj <span class="va">nil</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb167"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb168"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj [<span class="dv">10</span> <span class="dv">11</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb169"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">10</span> <span class="dv">11</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb170"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj [<span class="fl">10.0</span> <span class="fl">11.0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb171"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">10.0</span> <span class="fl">11.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb172"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj (<span class="kw">list</span> <span class="fl">10.0</span> <span class="fl">11.0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb173"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">10.0</span> <span class="fl">11.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb174"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj {<span class="at">:a</span> <span class="dv">1</span> <span class="at">:b</span> <span class="dv">2</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb175"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span>], <span class="at">:b</span> [<span class="dv">2</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="various-r-objects" class="level3">
<h3 class="anchored" data-anchor-id="various-r-objects">Various R objects</h3>
<p>Named list</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb176"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"list(a=1L,b=c(10,20),c='hi!')"</span></span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb177"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span>], <span class="at">:b</span> [<span class="fl">10.0</span> <span class="fl">20.0</span>], <span class="at">:c</span> [<span class="st">"hi!"</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Array of doubles</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb178"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"c(10,20,30)"</span></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb179"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">10.0</span> <span class="fl">20.0</span> <span class="fl">30.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Array of longs</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb180"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"c(10L,20L,30L)"</span></span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb181"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">10</span> <span class="dv">20</span> <span class="dv">30</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Timeseries</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb182"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="at">'euro</span></span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb182-3"><a href="#cb182-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj</span>
<span id="cb182-4"><a href="#cb182-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">first</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb183"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fl">13.7603</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Pairlist</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb184"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> r.stats/dnorm</span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a>    r.base/formals</span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj</span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">keys</span></span>
<span id="cb184-5"><a href="#cb184-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">sort</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb185"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">:log</span> <span class="at">:mean</span> <span class="at">:sd</span> <span class="at">:x</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>NULL</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb186"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"NULL"</span></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb187"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>TRUE/FALSE</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb188"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"TRUE"</span></span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb188-3"><a href="#cb188-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb189"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>[<span class="va">true</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="inspecting-r-functions" class="level2">
<h2 class="anchored" data-anchor-id="inspecting-r-functions">Inspecting R functions</h2>
<p>The <code>mean</code> function is defined to expect arguments <code>x</code> and <code>...</code>. These arguments have no default values (thus, its formals have empty symbols as values):</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb190"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="at">'mean</span></span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a>    r.base/formals</span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb191"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:x</span> , <span class="at">:...</span> }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It is an <a href="http://adv-r.had.co.nz/S3.html">S3 generic function</a> function, which we can realize by printing it:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb192"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>(r <span class="at">'mean</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb193"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a>function (x, ...) </span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>UseMethod(<span class="st">"mean"</span>)</span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a>&lt;bytecode: <span class="bn">0x5bcf4fb007a0</span>&gt;</span>
<span id="cb193-4"><a href="#cb193-4" aria-hidden="true" tabindex="-1"></a>&lt;environment: namespace<span class="at">:base</span>&gt;</span>
<span id="cb193-5"><a href="#cb193-5" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>So, we can expect possibly more details when inspecting its default implementation. Now, we see some arguments that do have default values.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb194"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="at">'mean.default</span></span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a>    r.base/formals</span>
<span id="cb194-3"><a href="#cb194-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb195"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:x</span> , <span class="at">:trim</span> [<span class="fl">0.0</span>], <span class="at">:na.rm</span> [<span class="va">false</span>], <span class="at">:...</span> }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="r-function-arglists" class="level2">
<h2 class="anchored" data-anchor-id="r-function-arglists">R-function-arglists</h2>
<p>As we saw earlier, R functions are Clojure functions. The arglists of functions brought up by <code>require-r</code> match the expected arguments. Here are some examples:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb196"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>(require-r</span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a> '[base]</span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a> '[stats]</span>
<span id="cb196-4"><a href="#cb196-4" aria-hidden="true" tabindex="-1"></a> '[grDevices])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb197"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb198"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> [<span class="va">#'r.base/mean,</span> <span class="va">#'r.base/mean-default,</span> <span class="va">#'r.stats/arima0,</span></span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>      <span class="va">#'r.grDevices/dev-off,</span> <span class="va">#'r.base/Sys-info,</span> <span class="va">#'r.base/summary-default</span></span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a>      <span class="co">;; Primitive functions:</span></span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a>      <span class="va">#'r.base/sin,</span> <span class="va">#'r.base/sum</span>]</span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a>     (<span class="kw">map</span> (<span class="kw">fn</span> [f]</span>
<span id="cb198-6"><a href="#cb198-6" aria-hidden="true" tabindex="-1"></a>            (<span class="kw">-&gt;</span> f</span>
<span id="cb198-7"><a href="#cb198-7" aria-hidden="true" tabindex="-1"></a>                <span class="kw">meta</span></span>
<span id="cb198-8"><a href="#cb198-8" aria-hidden="true" tabindex="-1"></a>                (<span class="kw">update</span> <span class="at">:ns</span> (<span class="kw">comp</span> <span class="kw">symbol</span> <span class="kw">str</span>))))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb199"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a>({<span class="at">:arglists</span> ([x &amp; {<span class="at">:keys</span> [...]}]), <span class="at">:name</span> mean, <span class="at">:ns</span> r.base}</span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([x &amp; {<span class="at">:keys</span> [trim na.rm ...]}]),</span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">:name</span> mean-default,</span>
<span id="cb199-4"><a href="#cb199-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">:ns</span> r.base}</span>
<span id="cb199-5"><a href="#cb199-5" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span></span>
<span id="cb199-6"><a href="#cb199-6" aria-hidden="true" tabindex="-1"></a>  ([x</span>
<span id="cb199-7"><a href="#cb199-7" aria-hidden="true" tabindex="-1"></a>    &amp;</span>
<span id="cb199-8"><a href="#cb199-8" aria-hidden="true" tabindex="-1"></a>    {<span class="at">:keys</span></span>
<span id="cb199-9"><a href="#cb199-9" aria-hidden="true" tabindex="-1"></a>     [order</span>
<span id="cb199-10"><a href="#cb199-10" aria-hidden="true" tabindex="-1"></a>      seasonal</span>
<span id="cb199-11"><a href="#cb199-11" aria-hidden="true" tabindex="-1"></a>      xreg</span>
<span id="cb199-12"><a href="#cb199-12" aria-hidden="true" tabindex="-1"></a>      include.mean</span>
<span id="cb199-13"><a href="#cb199-13" aria-hidden="true" tabindex="-1"></a>      delta</span>
<span id="cb199-14"><a href="#cb199-14" aria-hidden="true" tabindex="-1"></a>      transform.pars</span>
<span id="cb199-15"><a href="#cb199-15" aria-hidden="true" tabindex="-1"></a>      fixed</span>
<span id="cb199-16"><a href="#cb199-16" aria-hidden="true" tabindex="-1"></a>      init</span>
<span id="cb199-17"><a href="#cb199-17" aria-hidden="true" tabindex="-1"></a>      method</span>
<span id="cb199-18"><a href="#cb199-18" aria-hidden="true" tabindex="-1"></a>      n.<span class="kw">cond</span></span>
<span id="cb199-19"><a href="#cb199-19" aria-hidden="true" tabindex="-1"></a>      optim.control]}]),</span>
<span id="cb199-20"><a href="#cb199-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">:name</span> arima0,</span>
<span id="cb199-21"><a href="#cb199-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">:ns</span> r.stats}</span>
<span id="cb199-22"><a href="#cb199-22" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([&amp; {<span class="at">:keys</span> [which]}]), <span class="at">:name</span> dev-off, <span class="at">:ns</span> r.grDevices}</span>
<span id="cb199-23"><a href="#cb199-23" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([]), <span class="at">:name</span> Sys-info, <span class="at">:ns</span> r.base}</span>
<span id="cb199-24"><a href="#cb199-24" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([object &amp; {<span class="at">:keys</span> [... digits quantile.<span class="kw">type</span>]}]),</span>
<span id="cb199-25"><a href="#cb199-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">:name</span> summary-default,</span>
<span id="cb199-26"><a href="#cb199-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">:ns</span> r.base}</span>
<span id="cb199-27"><a href="#cb199-27" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([x]), <span class="at">:name</span> sin, <span class="at">:ns</span> r.base}</span>
<span id="cb199-28"><a href="#cb199-28" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([&amp; {<span class="at">:keys</span> [... na.rm]}]), <span class="at">:name</span> sum, <span class="at">:ns</span> r.base})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="background-color:grey;height:2px;width:100%;"></div>
<div><pre><small><small>source: notebooks/clojisr/v1/tutorial.clj</small></small></pre></div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>