<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.10">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ClojisR documentation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="clojisr.v1.tutorials.main_files/libs/clipboard/clipboard.min.js"></script>
<script src="clojisr.v1.tutorials.main_files/libs/quarto-html/quarto.js"></script>
<script src="clojisr.v1.tutorials.main_files/libs/quarto-html/popper.min.js"></script>
<script src="clojisr.v1.tutorials.main_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="clojisr.v1.tutorials.main_files/libs/quarto-html/anchor.min.js"></script>
<link href="clojisr.v1.tutorials.main_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="clojisr.v1.tutorials.main_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="clojisr.v1.tutorials.main_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="clojisr.v1.tutorials.main_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="clojisr.v1.tutorials.main_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link rel="icon" href="data:,">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#clojisr-tutorial" id="toc-clojisr-tutorial" class="nav-link active" data-scroll-target="#clojisr-tutorial">Clojisr tutorial</a>
  <ul>
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup">Setup</a></li>
  <li><a href="#basic-examples" id="toc-basic-examples" class="nav-link" data-scroll-target="#basic-examples">Basic examples</a></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions">Functions</a></li>
  <li><a href="#r-dataframes-and-tech.ml.dataset-datasets" id="toc-r-dataframes-and-tech.ml.dataset-datasets" class="nav-link" data-scroll-target="#r-dataframes-and-tech.ml.dataset-datasets">R dataframes and tech.ml.dataset datasets</a></li>
  <li><a href="#r-objects" id="toc-r-objects" class="nav-link" data-scroll-target="#r-objects">R objects</a></li>
  <li><a href="#generating-code" id="toc-generating-code" class="nav-link" data-scroll-target="#generating-code">Generating code</a></li>
  <li><a href="#running-generated-code" id="toc-running-generated-code" class="nav-link" data-scroll-target="#running-generated-code">Running generated code</a></li>
  <li><a href="#requiring-r-packages" id="toc-requiring-r-packages" class="nav-link" data-scroll-target="#requiring-r-packages">Requiring R packages</a></li>
  <li><a href="#data-visualization" id="toc-data-visualization" class="nav-link" data-scroll-target="#data-visualization">Data visualization</a></li>
  <li><a href="#intermediary-representation-as-java-objects." id="toc-intermediary-representation-as-java-objects." class="nav-link" data-scroll-target="#intermediary-representation-as-java-objects.">Intermediary representation as Java objects.</a></li>
  <li><a href="#more-data-conversion-examples" id="toc-more-data-conversion-examples" class="nav-link" data-scroll-target="#more-data-conversion-examples">More data conversion examples</a>
  <ul class="collapse">
  <li><a href="#basic-types-convertion-clj-r-clj" id="toc-basic-types-convertion-clj-r-clj" class="nav-link" data-scroll-target="#basic-types-convertion-clj-r-clj">Basic types convertion clj-&gt;r-&gt;clj</a></li>
  <li><a href="#various-r-objects" id="toc-various-r-objects" class="nav-link" data-scroll-target="#various-r-objects">Various R objects</a></li>
  </ul></li>
  <li><a href="#inspecting-r-functions" id="toc-inspecting-r-functions" class="nav-link" data-scroll-target="#inspecting-r-functions">Inspecting R functions</a></li>
  <li><a href="#r-function-arglists" id="toc-r-function-arglists" class="nav-link" data-scroll-target="#r-function-arglists">R-function-arglists</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">ClojisR documentation</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<style></style>
<style>.printedClojure .sourceCode {
  background-color: transparent;
  border-style: none;
}
</style>
<style>.clay-limit-image-width .clay-image {max-width: 100%}
</style>
<script src="clojisr.v1.tutorials.main_files/md-default1.js" type="text/javascript"></script>
<script src="clojisr.v1.tutorials.main_files/md-default2.js" type="text/javascript"></script>
<section id="clojisr-tutorial" class="level1">
<h1>Clojisr tutorial</h1>
<section id="setup" class="level2">
<h2 class="anchored" data-anchor-id="setup">Setup</h2>
<div class="sourceClojure">
<div class="sourceCode" id="cb1"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">ns</span> clojisr.v1.tutorials.<span class="kw">main</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  (<span class="at">:require</span> [clojisr.v1.r <span class="at">:as</span> r <span class="at">:refer</span> [r eval-r-&gt;java r-&gt;java java-&gt;r java-&gt;clj java-&gt;native-clj clj-&gt;java r-&gt;clj clj-&gt;r -&gt;code r+ colon require-r]]</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>            [clojisr.v1.robject <span class="at">:as</span> robject]</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>            [clojisr.v1.session <span class="at">:as</span> session]</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>            [tech.v3.dataset <span class="at">:as</span> dataset]</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>            [scicloj.kindly.v4.kind <span class="at">:as</span> kind]</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>            [scicloj.kindly.v4.api <span class="at">:as</span> kindly]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="basic-examples" class="level2">
<h2 class="anchored" data-anchor-id="basic-examples">Basic examples</h2>
<p>Let us start by some basic usage examples of Clojisr.</p>
<p>First, let us make sure that we use the Rserve backend (in case we were using another engine instead earlier), and that there are no R sessions currently running. This is typically not needed if you just started working. Here, we do it just in case.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb2"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>(r/set-default-session-type! <span class="at">:rserve</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb3"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:session-type</span> <span class="at">:rserve</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb4"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>(r/discard-all-sessions)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb5"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>{}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now let us run some R code, and keep a Clojure handle to the return value.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb6"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> x </span>(r <span class="st">"1+2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The thing we created is something called an ROBject.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb7"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">class</span> x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb8"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>clojisr.v1.robject.RObject</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If we wish, we can convert an ROBject to Clojure:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb9"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>(r-&gt;clj x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb10"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">3.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us see more examples of creating ROBjects and converting them to Clojure:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb11"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> <span class="st">"list(A=1,B=2,'#123strange&lt;text&gt; ()'=3)"</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>     r</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>     r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb12"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:A</span> [<span class="fl">1.0</span>], <span class="at">:B</span> [<span class="fl">2.0</span>], <span class="st">"#123strange&lt;text&gt; ()"</span> [<span class="fl">3.0</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the other direction, we can convert Clojure data to R data. Note that <code>nil</code> is turned to <code>NA</code>.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb13"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> [<span class="dv">1</span> <span class="va">nil</span> <span class="dv">3</span>]</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    clj-&gt;r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb14"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">1</span> NA  <span class="dv">3</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can run code on a separate R session (specify session-args which are different than the default ones).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb15"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1+2"</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    (r <span class="at">:session-args</span> {<span class="at">:session-name</span> <span class="st">"mysession"</span>})</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb16"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">3.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="functions" class="level2">
<h2 class="anchored" data-anchor-id="functions">Functions</h2>
<p>An R function is also a Clojure function.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb17"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> f </span>(r <span class="st">"function(x) x*10"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us apply it to Clojure data (implicitly converting that data to R).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb18"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="dv">5</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb19"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">50.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can also apply it to R data.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb20"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"5*5"</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb21"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">250.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Functions can get named arguments. Here we pass the <code>na.rm</code> argument, that tells R whether to remove missing values whenn computing the mean.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb22"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>(r-&gt;clj ((r <span class="st">"mean"</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>         [<span class="dv">1</span> <span class="va">nil</span> <span class="dv">3</span>]</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">:na.rm</span> <span class="va">true</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb23"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">2.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Another example:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb24"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [f (r <span class="st">"function(w,x,y=10,z=20) w+x+y+z"</span>)]</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;&gt;</span> [(f <span class="dv">1</span> <span class="dv">2</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>        (f <span class="dv">1</span> <span class="dv">2</span> <span class="at">:y</span> <span class="dv">100</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>        (f <span class="dv">1</span> <span class="dv">2</span> <span class="at">:z</span> <span class="dv">100</span>)]</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>       (<span class="kw">map</span> r-&gt;clj)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb25"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>([<span class="fl">33.0</span>] [<span class="fl">123.0</span>] [<span class="fl">113.0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Some functions are already created in Clojisr and given special names for convenience. Here are some examples:</p>
<p>R addition:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb26"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> (r+ <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>     r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb27"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">6</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>R colon (<code>:</code>), for creating a range of integers, like <code>0:9</code>:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb28"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>(r-&gt;clj (colon <span class="dv">0</span> <span class="dv">9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb29"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="r-dataframes-and-tech.ml.dataset-datasets" class="level2">
<h2 class="anchored" data-anchor-id="r-dataframes-and-tech.ml.dataset-datasets">R dataframes and tech.ml.dataset datasets</h2>
<p>At Clojure, we have a structure that is equivalent to R dataframes: a <a href="https://github.com/techascent/tech.ml.dataset">tech.ml.dataset</a> dataset.</p>
<p>Let us create such a dataset, pass it to an R function to compute the row means, and then convert the return value back to Clojure.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb30"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [row-means (r <span class="st">"function(data) rowMeans(data)"</span>)]</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> {<span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]}</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>      dataset/-&gt;dataset</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>      row-means</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>      r-&gt;clj))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb31"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">2.5</span> <span class="fl">3.5</span> <span class="fl">4.5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us see some more dataset proccessing through R.</p>
<p>Loading the R package <a href="https://dplyr.tidyverse.org/">dplyr</a> (assuming it is installed).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb32"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>(r <span class="st">"library(dplyr)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb33"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"dplyr"</span>     <span class="st">"Rserve"</span>    <span class="st">"stats"</span>     <span class="st">"graphics"</span>  <span class="st">"grDevices"</span> <span class="st">"utils"</span>    </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">7</span>] <span class="st">"datasets"</span>  <span class="st">"methods"</span>   <span class="st">"base"</span>     </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Using dplyr to process some Clojure dataset, and convert back to the resulting dataset.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb34"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [filter-by-x  (r <span class="st">"function(data) filter(data, x&gt;=2)"</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>      add-z-column (r <span class="st">"function(data) mutate(data, z=x+y)"</span>)]</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> {<span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]}</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>      dataset/-&gt;dataset</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>      filter-by-x</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>      add-z-column</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>      r-&gt;clj))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>_unnamed [2 3]:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">:x</th>
<th style="text-align: right;">:y</th>
<th style="text-align: right;">:z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">9</td>
</tr>
</tbody>
</table>
</div>
<p><a href="https://tibble.tidyverse.org">Tibbles</a>, which are a more recent R dataframe notion, are also supported, as a special case of data frames.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb35"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>(r <span class="st">"library(tibble)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb36"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">"tibble"</span>    <span class="st">"dplyr"</span>     <span class="st">"Rserve"</span>    <span class="st">"stats"</span>     <span class="st">"graphics"</span>  <span class="st">"grDevices"</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] <span class="st">"utils"</span>     <span class="st">"datasets"</span>  <span class="st">"methods"</span>   <span class="st">"base"</span>     </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb37"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [tibble (r <span class="st">"tibble"</span>)]</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  (tibble</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>   <span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>   <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb38"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a># A tibble: <span class="dv">3</span> × <span class="dv">2</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>      x     y</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  &lt;int&gt; &lt;int&gt;</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">2</span>     <span class="dv">5</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">3</span>     <span class="dv">6</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb39"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [tibble (r <span class="st">"tibble"</span>)]</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> (tibble</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>])</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>      r-&gt;clj</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>      dataset/mapseq-reader))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb40"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>[{<span class="at">:x</span> <span class="dv">1</span>, <span class="at">:y</span> <span class="dv">4</span>} {<span class="at">:x</span> <span class="dv">2</span>, <span class="at">:y</span> <span class="dv">5</span>} {<span class="at">:x</span> <span class="dv">3</span>, <span class="at">:y</span> <span class="dv">6</span>}]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="r-objects" class="level2">
<h2 class="anchored" data-anchor-id="r-objects">R objects</h2>
<p>Clojisr holds handles to R objects, that are stored in memory at the R session, where they are assigned random names.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb41"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> one+two </span>(r <span class="st">"1+2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb42"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">class</span> one+two)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb43"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>clojisr.v1.robject.RObject</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The name of an object is the place where it is held at R (inside an R <a href="http://adv-r.had.co.nz/Environments.html">evnironment</a> called <code>.MEM</code>).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb44"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">:object-name</span> one+two)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb45"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$xfbec76533db74f61"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="generating-code" class="level2">
<h2 class="anchored" data-anchor-id="generating-code">Generating code</h2>
<p>Let us see the mechanism by which clojisr generates R code, and the rules defining it.</p>
<p>Since we are playing a bit with the internals here, we will need a reference to the R session:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb46"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> session</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  (session/fetch-or-make <span class="va">nil</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For the following examples, we will use some <strong>dummy</strong> handles to R objects with given names:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb47"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> x </span>(robject/-&gt;RObject <span class="st">"robject_x"</span> session <span class="va">nil</span> <span class="va">nil</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb48"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> y </span>(robject/-&gt;RObject <span class="st">"robject_y"</span> session <span class="va">nil</span> <span class="va">nil</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>.. and some <strong>real</strong> handles to R objects:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb49"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> minus-eleven </span>(r <span class="st">"-11"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb50"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> abs </span>(r <span class="st">"abs"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The function <code>-&gt;code</code> generates R code according to a certain set of rules. Here we describe some of these rules briefly. We also wrote a dedicated tutorial about the rule set more thoroughly.</p>
<p>For an ROBject, the generated code is just the ROBject name.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb51"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb52"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="st">"robject_x"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a clojure value, we use some form analysis and generate proper R string or values.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb53"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code <span class="st">"hello"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb54"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="st">"</span><span class="sc">\"</span><span class="st">hello</span><span class="sc">\"</span><span class="st">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb55"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb56"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="st">"c(1L,2L,3L)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a symbol, we generate the code with the corresponding R symbol.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb57"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code <span class="at">'x</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb58"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="st">"x"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A sequential structure (list, vector, etc.) can be interpreted as a compound expression, for which code generation is defined accorting to the first list element.</p>
<p>For a list beginning with the symbol <code>'function</code>, we generate an R function definition.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb59"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb60"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {x}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a vector instead of list, we create R vector.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb61"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '[function [x y] x])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb62"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="st">"c(function,c(x,y),x)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a list beginning with the symbol <code>'formula</code>, we generate an R <code>~</code>-formula.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb63"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(formula x y))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb64"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="st">"(x~y)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a list beginning with a symbol known to be a binary operator, we generate nested calls.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb65"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(<span class="kw">+</span> x y z))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb66"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="st">"((x+y)+z)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a list beginning with another symbol, we generate a function call with that symbol as the function name.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb67"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(f x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb68"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="st">"f(x)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a list beginning with an R object that is a function, we generate a function call with that object as the function. If you create the list using the quote sign (<code>'</code>), don’t forget to unquote symbols refering to things you defined on the Clojure side.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb69"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(<span class="at">~abs</span> x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb70"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x695920b687364147(x)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>All other sequential things (that is, those not beginning with a symbol or R function) are intepreted as data, converted implicitly R data representation.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb71"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code `(<span class="at">~abs</span> (<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb72"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x695920b687364147(c(1L,2L,3L))"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Some more examples, showing how these rules compose:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb73"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (f y)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb74"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {f(y)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb75"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (f <span class="at">~y</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb76"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {f(robject_y)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb77"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (<span class="kw">+</span> x y)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb78"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {(x+y)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb79"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code (<span class="kw">list</span> <span class="at">'function</span> '[x y] (<span class="kw">list</span> <span class="at">'+</span> <span class="at">'x</span> <span class="at">'y</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb80"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {(x+y)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb81"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (<span class="kw">print</span> x) (f x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb82"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {print(x);f(x)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb83"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (<span class="at">~abs</span> x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb84"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {.MEM$x695920b687364147(x)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb85"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(<span class="at">~abs</span> <span class="at">~minus-eleven</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb86"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x695920b687364147(.MEM$x2bd1909b99ff4ebc)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb87"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(<span class="at">~abs</span> -<span class="dv">11</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb88"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x695920b687364147(-11L)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Use syntax quote ` in case you want to use local bindings.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb89"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [minus-ten -<span class="dv">10</span>]</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  (-&gt;code `(<span class="at">~abs</span> <span class="at">~minus-ten</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb90"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x695920b687364147(-10L)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="running-generated-code" class="level2">
<h2 class="anchored" data-anchor-id="running-generated-code">Running generated code</h2>
<p>Clojure forms can be run as R code. Behind the scences, they are turned to R code using the <code>-&gt;code</code> function described above. For example:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb91"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> '(<span class="at">~abs</span> ~(<span class="kw">range</span> -<span class="dv">3</span> <span class="dv">0</span>))</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb92"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span> <span class="dv">2</span> <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Or, equivalently:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb93"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> '(<span class="at">~abs</span> ~(<span class="kw">range</span> -<span class="dv">3</span> <span class="dv">0</span>))</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>    -&gt;code</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb94"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span> <span class="dv">2</span> <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us repeat the basic examples from the beginning of this tutorial, this time generating code rather than writing it as Strings.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb95"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> x </span>(r '(<span class="kw">+</span> <span class="dv">1</span> <span class="dv">2</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb96"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>(r-&gt;clj x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb97"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb98"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> f </span>(r '(function [x] (<span class="kw">*</span> x <span class="dv">10</span>))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb99"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="dv">5</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb100"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">50</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb101"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"5*5"</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb102"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">250.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb103"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [row-means (r '(function [data] (rowMeans data)))]</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> {<span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]}</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>      dataset/-&gt;dataset</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>      row-means</span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>      r-&gt;clj))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb104"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">2.5</span> <span class="fl">3.5</span> <span class="fl">4.5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb105"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>(r '(library dplyr))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb106"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">"tibble"</span>    <span class="st">"dplyr"</span>     <span class="st">"Rserve"</span>    <span class="st">"stats"</span>     <span class="st">"graphics"</span>  <span class="st">"grDevices"</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] <span class="st">"utils"</span>     <span class="st">"datasets"</span>  <span class="st">"methods"</span>   <span class="st">"base"</span>     </span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb107"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [filter-by-x  (r '(function [data] (<span class="kw">filter</span> data (<span class="kw">&gt;=</span> x <span class="dv">2</span>))))</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>      add-z-column (r '(function [data] (mutate data (<span class="kw">=</span> z (<span class="kw">+</span> x y)))))]</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;&gt;</span> {<span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]}</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>       dataset/-&gt;dataset</span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>       filter-by-x</span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>       add-z-column</span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>       r-&gt;clj))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>_unnamed [2 3]:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">:x</th>
<th style="text-align: right;">:y</th>
<th style="text-align: right;">:z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">9</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="requiring-r-packages" class="level2">
<h2 class="anchored" data-anchor-id="requiring-r-packages">Requiring R packages</h2>
<p>Sometimes, we want to bring to the Clojure world functions and data from R packages. Here, we try to follow the <a href="https://github.com/cnuernber/libpython-clj/blob/master/test/libpython_clj/require_python_test.clj">require-python</a> syntax of <a href="https://github.com/cnuernber/libpython-clj">libpython-clj</a> (though currently in a less sophisticated way.)</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb108"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>(require-r '[stats <span class="at">:as</span> statz <span class="at">:refer</span> [median]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb109"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb110"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>    r.stats/median</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj</span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb111"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb112"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>    statz/median</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb113"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb114"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>    median</span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb115"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb116"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>(require-r '[datasets <span class="at">:as</span> datasetz <span class="at">:refer</span> [euro]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb117"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb118"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>[r.datasets/euro</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a> datasetz/euro</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a> euro]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb119"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>[        ATS         BEF         DEM         ESP         FIM         FRF </span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="fl">13.760300</span>   <span class="fl">40.339900</span>    <span class="fl">1.955830</span>  <span class="fl">166.386000</span>    <span class="fl">5.945730</span>    <span class="fl">6.559570</span> </span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>        IEP         ITL         LUF         NLG         PTE </span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>   <span class="fl">0.787564</span> <span class="fl">1936.270000</span>   <span class="fl">40.339900</span>    <span class="fl">2.203710</span>  <span class="fl">200.482000</span> </span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>         ATS         BEF         DEM         ESP         FIM         FRF </span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a>  <span class="fl">13.760300</span>   <span class="fl">40.339900</span>    <span class="fl">1.955830</span>  <span class="fl">166.386000</span>    <span class="fl">5.945730</span>    <span class="fl">6.559570</span> </span>
<span id="cb119-8"><a href="#cb119-8" aria-hidden="true" tabindex="-1"></a>        IEP         ITL         LUF         NLG         PTE </span>
<span id="cb119-9"><a href="#cb119-9" aria-hidden="true" tabindex="-1"></a>   <span class="fl">0.787564</span> <span class="fl">1936.270000</span>   <span class="fl">40.339900</span>    <span class="fl">2.203710</span>  <span class="fl">200.482000</span> </span>
<span id="cb119-10"><a href="#cb119-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-11"><a href="#cb119-11" aria-hidden="true" tabindex="-1"></a>         ATS         BEF         DEM         ESP         FIM         FRF </span>
<span id="cb119-12"><a href="#cb119-12" aria-hidden="true" tabindex="-1"></a>  <span class="fl">13.760300</span>   <span class="fl">40.339900</span>    <span class="fl">1.955830</span>  <span class="fl">166.386000</span>    <span class="fl">5.945730</span>    <span class="fl">6.559570</span> </span>
<span id="cb119-13"><a href="#cb119-13" aria-hidden="true" tabindex="-1"></a>        IEP         ITL         LUF         NLG         PTE </span>
<span id="cb119-14"><a href="#cb119-14" aria-hidden="true" tabindex="-1"></a>   <span class="fl">0.787564</span> <span class="fl">1936.270000</span>   <span class="fl">40.339900</span>    <span class="fl">2.203710</span>  <span class="fl">200.482000</span> </span>
<span id="cb119-15"><a href="#cb119-15" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb120"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>(require-r '[base <span class="at">:refer</span> [$]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb121"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb122"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> {<span class="at">:a</span> <span class="dv">1</span> <span class="at">:b</span> <span class="dv">2</span>}</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>    ($ <span class="at">'a</span>)</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb123"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-visualization" class="level2">
<h2 class="anchored" data-anchor-id="data-visualization">Data visualization</h2>
<p>Functions creating R plots or any plotting objects generated by various R libraries can be wrapped in a way that returns an SVG, BufferedImage or can be saved to a file. All of them accept additional parameters specified in <code>grDevices</code> R package.</p>
<p>Currently there is a bug that sometimes causes axes and labels to disappear when rendered inside a larger HTML.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb124"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>(require-r '[graphics <span class="at">:refer</span> [plot hist]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb125"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb126"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>(require-r '[ggplot2 <span class="at">:refer</span> [ggplot aes geom_point xlab ylab labs]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb127"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb128"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">require</span> '[clojisr.v1.applications.plotting <span class="at">:refer</span> [plot-&gt;svg plot-&gt;file plot-&gt;buffered-image]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>First example, simple plotting function as SVG string.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb129"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>(plot-&gt;svg</span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a> (<span class="kw">fn</span> []</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>   (<span class="kw">-&gt;&gt;</span> <span class="kw">rand</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a>        (<span class="kw">repeatedly</span> <span class="dv">30</span>)</span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>        (reductions <span class="kw">+</span>)</span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a>        (plot <span class="at">:xlab</span> <span class="st">"t"</span></span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">:ylab</span> <span class="st">"y"</span></span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">:type</span> <span class="st">"l"</span>))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!--?xml version="1.0" encoding="UTF-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="504pt" height="504pt" viewbox="0 0 504 504" version="1.1">
<defs>
<g>
<symbol overflow="visible" id="glyph0-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph0-1">
<path style="stroke:none;" d="M 3.296875 -8.671875 C 2.515625 -8.671875 1.78125 -8.3125 1.34375 -7.734375 C 0.796875 -6.953125 0.515625 -5.8125 0.515625 -4.203125 C 0.515625 -1.265625 1.46875 0.28125 3.296875 0.28125 C 5.09375 0.28125 6.078125 -1.265625 6.078125 -4.125 C 6.078125 -5.8125 5.8125 -6.9375 5.25 -7.734375 C 4.8125 -8.328125 4.109375 -8.671875 3.296875 -8.671875 Z M 3.296875 -7.734375 C 4.4375 -7.734375 5 -6.578125 5 -4.21875 C 5 -1.75 4.453125 -0.59375 3.28125 -0.59375 C 2.15625 -0.59375 1.59375 -1.796875 1.59375 -4.1875 C 1.59375 -6.578125 2.15625 -7.734375 3.296875 -7.734375 Z M 3.296875 -7.734375 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-2">
<path style="stroke:none;" d="M 5.71875 -8.515625 L 1.3125 -8.515625 L 0.6875 -3.875 L 1.65625 -3.875 C 2.140625 -4.46875 2.5625 -4.671875 3.234375 -4.671875 C 4.375 -4.671875 5.078125 -3.890625 5.078125 -2.625 C 5.078125 -1.40625 4.375 -0.65625 3.21875 -0.65625 C 2.296875 -0.65625 1.734375 -1.125 1.46875 -2.09375 L 0.421875 -2.09375 C 0.5625 -1.390625 0.6875 -1.0625 0.9375 -0.75 C 1.421875 -0.09375 2.28125 0.28125 3.234375 0.28125 C 4.953125 0.28125 6.15625 -0.96875 6.15625 -2.765625 C 6.15625 -4.453125 5.046875 -5.609375 3.40625 -5.609375 C 2.8125 -5.609375 2.328125 -5.453125 1.84375 -5.09375 L 2.171875 -7.46875 L 5.71875 -7.46875 Z M 5.71875 -8.515625 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-3">
<path style="stroke:none;" d="M 3.109375 -6.1875 L 3.109375 0 L 4.15625 0 L 4.15625 -8.671875 L 3.46875 -8.671875 C 3.09375 -7.34375 2.859375 -7.15625 1.21875 -6.953125 L 1.21875 -6.1875 Z M 3.109375 -6.1875 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-4">
<path style="stroke:none;" d="M 6.078125 -1.046875 L 1.59375 -1.046875 C 1.703125 -1.765625 2.09375 -2.21875 3.125 -2.859375 L 4.328125 -3.53125 C 5.515625 -4.1875 6.125 -5.078125 6.125 -6.140625 C 6.125 -6.859375 5.84375 -7.53125 5.34375 -8 C 4.84375 -8.453125 4.21875 -8.671875 3.40625 -8.671875 C 2.328125 -8.671875 1.53125 -8.296875 1.0625 -7.546875 C 0.75 -7.09375 0.625 -6.546875 0.59375 -5.671875 L 1.65625 -5.671875 C 1.6875 -6.265625 1.765625 -6.609375 1.90625 -6.90625 C 2.1875 -7.421875 2.734375 -7.75 3.375 -7.75 C 4.328125 -7.75 5.046875 -7.0625 5.046875 -6.125 C 5.046875 -5.421875 4.65625 -4.828125 3.90625 -4.390625 L 2.796875 -3.75 C 1.015625 -2.71875 0.5 -1.90625 0.40625 -0.015625 L 6.078125 -0.015625 Z M 6.078125 -1.046875 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-5">
<path style="stroke:none;" d="M 2.65625 -4 L 3.234375 -4 C 4.375 -4 4.984375 -3.453125 4.984375 -2.40625 C 4.984375 -1.3125 4.328125 -0.65625 3.234375 -0.65625 C 2.078125 -0.65625 1.515625 -1.25 1.4375 -2.515625 L 0.390625 -2.515625 C 0.4375 -1.828125 0.546875 -1.375 0.75 -0.984375 C 1.203125 -0.140625 2.03125 0.28125 3.1875 0.28125 C 4.9375 0.28125 6.078125 -0.78125 6.078125 -2.421875 C 6.078125 -3.53125 5.65625 -4.125 4.625 -4.484375 C 5.421875 -4.8125 5.8125 -5.40625 5.8125 -6.28125 C 5.8125 -7.78125 4.84375 -8.671875 3.234375 -8.671875 C 1.515625 -8.671875 0.59375 -7.71875 0.5625 -5.875 L 1.625 -5.875 C 1.625 -6.40625 1.6875 -6.703125 1.8125 -6.96875 C 2.046875 -7.46875 2.578125 -7.75 3.234375 -7.75 C 4.171875 -7.75 4.734375 -7.1875 4.734375 -6.25 C 4.734375 -5.640625 4.53125 -5.265625 4.0625 -5.0625 C 3.765625 -4.9375 3.390625 -4.890625 2.65625 -4.890625 Z M 2.65625 -4 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-6">
<path style="stroke:none;" d="M 3.046875 -6.28125 L 2.015625 -6.28125 L 2.015625 -8.015625 L 1.015625 -8.015625 L 1.015625 -6.28125 L 0.171875 -6.28125 L 0.171875 -5.46875 L 1.015625 -5.46875 L 1.015625 -0.71875 C 1.015625 -0.078125 1.453125 0.28125 2.234375 0.28125 C 2.5 0.28125 2.71875 0.25 3.046875 0.1875 L 3.046875 -0.640625 C 2.90625 -0.609375 2.765625 -0.59375 2.5625 -0.59375 C 2.140625 -0.59375 2.015625 -0.71875 2.015625 -1.15625 L 2.015625 -5.46875 L 3.046875 -5.46875 Z M 3.046875 -6.28125 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph1-1">
<path style="stroke:none;" d="M -8.671875 -3.296875 C -8.671875 -2.515625 -8.3125 -1.78125 -7.734375 -1.34375 C -6.953125 -0.796875 -5.8125 -0.515625 -4.203125 -0.515625 C -1.265625 -0.515625 0.28125 -1.46875 0.28125 -3.296875 C 0.28125 -5.09375 -1.265625 -6.078125 -4.125 -6.078125 C -5.8125 -6.078125 -6.9375 -5.8125 -7.734375 -5.25 C -8.328125 -4.8125 -8.671875 -4.109375 -8.671875 -3.296875 Z M -7.734375 -3.296875 C -7.734375 -4.4375 -6.578125 -5 -4.21875 -5 C -1.75 -5 -0.59375 -4.453125 -0.59375 -3.28125 C -0.59375 -2.15625 -1.796875 -1.59375 -4.1875 -1.59375 C -6.578125 -1.59375 -7.734375 -2.15625 -7.734375 -3.296875 Z M -7.734375 -3.296875 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-2">
<path style="stroke:none;" d="M -8.515625 -5.71875 L -8.515625 -1.3125 L -3.875 -0.6875 L -3.875 -1.65625 C -4.46875 -2.140625 -4.671875 -2.5625 -4.671875 -3.234375 C -4.671875 -4.375 -3.890625 -5.078125 -2.625 -5.078125 C -1.40625 -5.078125 -0.65625 -4.375 -0.65625 -3.21875 C -0.65625 -2.296875 -1.125 -1.734375 -2.09375 -1.46875 L -2.09375 -0.421875 C -1.390625 -0.5625 -1.0625 -0.6875 -0.75 -0.9375 C -0.09375 -1.421875 0.28125 -2.28125 0.28125 -3.234375 C 0.28125 -4.953125 -0.96875 -6.15625 -2.765625 -6.15625 C -4.453125 -6.15625 -5.609375 -5.046875 -5.609375 -3.40625 C -5.609375 -2.8125 -5.453125 -2.328125 -5.09375 -1.84375 L -7.46875 -2.171875 L -7.46875 -5.71875 Z M -8.515625 -5.71875 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-3">
<path style="stroke:none;" d="M -6.1875 -3.109375 L 0 -3.109375 L 0 -4.15625 L -8.671875 -4.15625 L -8.671875 -3.46875 C -7.34375 -3.09375 -7.15625 -2.859375 -6.953125 -1.21875 L -6.1875 -1.21875 Z M -6.1875 -3.109375 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-4">
<path style="stroke:none;" d="M -6.28125 -4.65625 L -1.390625 -2.921875 L -6.28125 -1.3125 L -6.28125 -0.234375 L 0.03125 -2.359375 L 1.015625 -1.984375 C 1.46875 -1.8125 1.625 -1.59375 1.625 -1.171875 C 1.625 -1.015625 1.609375 -0.859375 1.5625 -0.640625 L 2.453125 -0.640625 C 2.5625 -0.859375 2.609375 -1.0625 2.609375 -1.3125 C 2.609375 -1.640625 2.515625 -1.984375 2.3125 -2.25 C 2.09375 -2.5625 1.828125 -2.75 1.3125 -2.9375 L -6.28125 -5.734375 Z M -6.28125 -4.65625 "></path>
</symbol>
</g>
</defs>
<g id="surface1">
<rect x="0" y="0" width="504" height="504" style="fill:rgb(100%,100%,100%);fill-opacity:1;stroke:none;"></rect>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 74.398438 416.800781 L 87.640625 399.609375 L 100.882812 389.277344 L 114.125 382.101562 L 127.367188 363.605469 L 140.605469 349.273438 L 153.847656 339.78125 L 167.089844 332.59375 L 180.332031 319.085938 L 193.574219 299.875 L 206.8125 284.457031 L 220.054688 267.722656 L 233.296875 252.992188 L 246.539062 243.363281 L 259.78125 233.675781 L 273.019531 229.136719 L 286.261719 215.707031 L 299.503906 197.824219 L 312.746094 194.300781 L 325.984375 177.417969 L 339.226562 166.398438 L 352.46875 156.144531 L 365.710938 153.460938 L 378.953125 147.355469 L 392.191406 143.816406 L 405.433594 136.007812 L 418.675781 116.996094 L 431.917969 105.90625 L 445.160156 91.714844 L 458.398438 72.800781 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 61.160156 430.558594 L 458.398438 430.558594 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 61.160156 430.558594 L 61.160156 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 127.367188 430.558594 L 127.367188 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 193.574219 430.558594 L 193.574219 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 259.78125 430.558594 L 259.78125 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 325.984375 430.558594 L 325.984375 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 392.191406 430.558594 L 392.191406 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 458.398438 430.558594 L 458.398438 437.761719 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-1" x="57.660156" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-2" x="123.867188" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-3" x="186.574219" y="456.228516"></use>
  <use href="#glyph0-1" x="193.574219" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-3" x="252.78125" y="456.228516"></use>
  <use href="#glyph0-2" x="259.78125" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-4" x="318.984375" y="456.228516"></use>
  <use href="#glyph0-1" x="325.984375" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-4" x="385.191406" y="456.228516"></use>
  <use href="#glyph0-2" x="392.191406" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-5" x="451.398438" y="456.228516"></use>
  <use href="#glyph0-1" x="458.398438" y="456.228516"></use>
</g>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 427.949219 L 59.039062 139.375 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 427.949219 L 51.839844 427.949219 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 331.757812 L 51.839844 331.757812 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 235.566406 L 51.839844 235.566406 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 139.375 L 51.839844 139.375 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-1" x="41.509766" y="431.449219"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-2" x="41.509766" y="335.257812"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-3" x="41.509766" y="242.566406"></use>
  <use href="#glyph1-1" x="41.509766" y="235.566406"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-3" x="41.509766" y="146.375"></use>
  <use href="#glyph1-2" x="41.509766" y="139.375"></use>
</g>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 430.558594 L 473.761719 430.558594 L 473.761719 59.039062 L 59.039062 59.039062 Z M 59.039062 430.558594 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-6" x="264.898438" y="485.029297"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-4" x="12.708984" y="247.800781"></use>
</g>
</g>
</svg>

<p>ggplot2 plots (or any other plot objects like lattice) can be also turned into SVG.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb130"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>(plot-&gt;svg</span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a> (<span class="kw">let</span> [x (<span class="kw">repeatedly</span> <span class="dv">99</span> <span class="kw">rand</span>)</span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>       y (<span class="kw">map</span> <span class="kw">+</span></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>              x</span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a>              (<span class="kw">repeatedly</span> <span class="dv">99</span> <span class="kw">rand</span>))]</span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a>   (<span class="kw">-&gt;</span> {<span class="at">:x</span> x <span class="at">:y</span> y}</span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>       dataset/-&gt;dataset</span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a>       (ggplot (aes <span class="at">:x</span> x</span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">:y</span> y</span>
<span id="cb130-10"><a href="#cb130-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">:color</span> '(<span class="kw">+</span> x y)</span>
<span id="cb130-11"><a href="#cb130-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">:size</span> '(<span class="kw">/</span> x y)))</span>
<span id="cb130-12"><a href="#cb130-12" aria-hidden="true" tabindex="-1"></a>       (r+ (geom_point)</span>
<span id="cb130-13"><a href="#cb130-13" aria-hidden="true" tabindex="-1"></a>           (xlab <span class="st">"x"</span>)</span>
<span id="cb130-14"><a href="#cb130-14" aria-hidden="true" tabindex="-1"></a>           (ylab <span class="st">"y"</span>)))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!--?xml version="1.0" encoding="UTF-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="504pt" height="504pt" viewbox="0 0 504 504" version="1.1">
<defs>
<g>
<symbol overflow="visible" id="glyph0-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph0-1">
<path style="stroke:none;" d="M 2.421875 -6.359375 C 1.84375 -6.359375 1.3125 -6.09375 0.984375 -5.671875 C 0.578125 -5.109375 0.375 -4.25 0.375 -3.078125 C 0.375 -0.9375 1.078125 0.203125 2.421875 0.203125 C 3.734375 0.203125 4.453125 -0.9375 4.453125 -3.03125 C 4.453125 -4.25 4.265625 -5.078125 3.859375 -5.671875 C 3.53125 -6.109375 3.015625 -6.359375 2.421875 -6.359375 Z M 2.421875 -5.671875 C 3.25 -5.671875 3.671875 -4.828125 3.671875 -3.09375 C 3.671875 -1.28125 3.265625 -0.4375 2.40625 -0.4375 C 1.578125 -0.4375 1.171875 -1.3125 1.171875 -3.0625 C 1.171875 -4.828125 1.578125 -5.671875 2.421875 -5.671875 Z M 2.421875 -5.671875 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-2">
<path style="stroke:none;" d="M 1.6875 -0.921875 L 0.765625 -0.921875 L 0.765625 0 L 1.6875 0 Z M 1.6875 -0.921875 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-3">
<path style="stroke:none;" d="M 4.1875 -6.234375 L 0.96875 -6.234375 L 0.5 -2.84375 L 1.21875 -2.84375 C 1.578125 -3.265625 1.875 -3.421875 2.359375 -3.421875 C 3.203125 -3.421875 3.71875 -2.84375 3.71875 -1.921875 C 3.71875 -1.03125 3.203125 -0.484375 2.359375 -0.484375 C 1.6875 -0.484375 1.265625 -0.828125 1.078125 -1.53125 L 0.3125 -1.53125 C 0.40625 -1.015625 0.5 -0.78125 0.6875 -0.546875 C 1.03125 -0.078125 1.671875 0.203125 2.375 0.203125 C 3.640625 0.203125 4.515625 -0.71875 4.515625 -2.03125 C 4.515625 -3.265625 3.6875 -4.109375 2.5 -4.109375 C 2.0625 -4.109375 1.703125 -4 1.34375 -3.734375 L 1.59375 -5.46875 L 4.1875 -5.46875 Z M 4.1875 -6.234375 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-4">
<path style="stroke:none;" d="M 2.28125 -4.53125 L 2.28125 0 L 3.046875 0 L 3.046875 -6.359375 L 2.546875 -6.359375 C 2.265625 -5.390625 2.09375 -5.25 0.890625 -5.09375 L 0.890625 -4.53125 Z M 2.28125 -4.53125 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-5">
<path style="stroke:none;" d="M 4.453125 -0.765625 L 1.171875 -0.765625 C 1.25 -1.296875 1.53125 -1.625 2.296875 -2.09375 L 3.171875 -2.59375 C 4.046875 -3.0625 4.5 -3.71875 4.5 -4.5 C 4.5 -5.03125 4.28125 -5.53125 3.921875 -5.875 C 3.546875 -6.203125 3.09375 -6.359375 2.5 -6.359375 C 1.703125 -6.359375 1.125 -6.078125 0.78125 -5.53125 C 0.546875 -5.203125 0.453125 -4.796875 0.4375 -4.15625 L 1.21875 -4.15625 C 1.234375 -4.59375 1.296875 -4.84375 1.40625 -5.0625 C 1.59375 -5.4375 2 -5.6875 2.46875 -5.6875 C 3.171875 -5.6875 3.703125 -5.171875 3.703125 -4.484375 C 3.703125 -3.96875 3.40625 -3.53125 2.859375 -3.21875 L 2.046875 -2.75 C 0.75 -2 0.375 -1.40625 0.296875 -0.015625 L 4.453125 -0.015625 Z M 4.453125 -0.765625 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-6">
<path style="stroke:none;" d="M 4.578125 -6.234375 L 0.40625 -6.234375 L 0.40625 -5.46875 L 3.78125 -5.46875 C 2.28125 -3.359375 1.6875 -2.046875 1.21875 0 L 2.046875 0 C 2.390625 -2 3.171875 -3.71875 4.578125 -5.59375 Z M 4.578125 -6.234375 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph1-1">
<path style="stroke:none;" d="M 3.21875 -2.984375 L 5.140625 -5.765625 L 4.109375 -5.765625 L 2.734375 -3.671875 L 1.34375 -5.765625 L 0.296875 -5.765625 L 2.21875 -2.9375 L 0.1875 0 L 1.234375 0 L 2.6875 -2.21875 L 4.140625 0 L 5.203125 0 Z M 3.21875 -2.984375 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-2">
<path style="stroke:none;" d="M 2.59375 -8.015625 C 1.5 -6.578125 0.796875 -4.578125 0.796875 -2.84375 C 0.796875 -1.109375 1.5 0.890625 2.59375 2.328125 L 3.203125 2.328125 C 2.234375 0.765625 1.6875 -1.09375 1.6875 -2.84375 C 1.6875 -4.59375 2.234375 -6.453125 3.203125 -8.015625 Z M 2.59375 -8.015625 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-3">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph1-4">
<path style="stroke:none;" d="M 5.875 -2.9375 L 3.59375 -2.9375 L 3.59375 -5.21875 L 2.828125 -5.21875 L 2.828125 -2.9375 L 0.546875 -2.9375 L 0.546875 -2.171875 L 2.828125 -2.171875 L 2.828125 0.109375 L 3.59375 0.109375 L 3.59375 -2.171875 L 5.875 -2.171875 Z M 5.875 -2.9375 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-5">
<path style="stroke:none;" d="M 4.265625 -5.765625 L 2.671875 -1.28125 L 1.203125 -5.765625 L 0.21875 -5.765625 L 2.171875 0.015625 L 1.8125 0.9375 C 1.65625 1.34375 1.46875 1.5 1.078125 1.5 C 0.921875 1.5 0.796875 1.46875 0.59375 1.4375 L 0.59375 2.25 C 0.78125 2.359375 0.96875 2.390625 1.203125 2.390625 C 1.5 2.390625 1.828125 2.296875 2.0625 2.125 C 2.359375 1.90625 2.515625 1.671875 2.6875 1.203125 L 5.265625 -5.765625 Z M 4.265625 -5.765625 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-6">
<path style="stroke:none;" d="M 1.015625 2.328125 C 2.125 0.890625 2.8125 -1.109375 2.8125 -2.84375 C 2.8125 -4.578125 2.125 -6.578125 1.015625 -8.015625 L 0.421875 -8.015625 C 1.390625 -6.453125 1.921875 -4.59375 1.921875 -2.84375 C 1.921875 -1.09375 1.390625 0.765625 0.421875 2.328125 Z M 1.015625 2.328125 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-7">
<path style="stroke:none;" d="M 2.515625 -8.015625 L -0.09375 0.21875 L 0.515625 0.21875 L 3.125 -8.015625 Z M 2.515625 -8.015625 "></path>
</symbol>
<symbol overflow="visible" id="glyph2-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph2-1">
<path style="stroke:none;" d="M -5.765625 -4.265625 L -1.28125 -2.671875 L -5.765625 -1.203125 L -5.765625 -0.21875 L 0.015625 -2.171875 L 0.9375 -1.8125 C 1.34375 -1.65625 1.5 -1.46875 1.5 -1.078125 C 1.5 -0.921875 1.46875 -0.796875 1.4375 -0.59375 L 2.25 -0.59375 C 2.359375 -0.78125 2.390625 -0.96875 2.390625 -1.203125 C 2.390625 -1.5 2.296875 -1.828125 2.125 -2.0625 C 1.90625 -2.359375 1.671875 -2.515625 1.203125 -2.6875 L -5.765625 -5.265625 Z M -5.765625 -4.265625 "></path>
</symbol>
</g>
<clippath id="clip1">
  <path d="M 37.152344 5.480469 L 436.84375 5.480469 L 436.84375 469.851562 L 37.152344 469.851562 Z M 37.152344 5.480469 "></path>
</clippath>
<clippath id="clip2">
  <path d="M 37.152344 416 L 436.84375 416 L 436.84375 418 L 37.152344 418 Z M 37.152344 416 "></path>
</clippath>
<clippath id="clip3">
  <path d="M 37.152344 302 L 436.84375 302 L 436.84375 304 L 37.152344 304 Z M 37.152344 302 "></path>
</clippath>
<clippath id="clip4">
  <path d="M 37.152344 188 L 436.84375 188 L 436.84375 190 L 37.152344 190 Z M 37.152344 188 "></path>
</clippath>
<clippath id="clip5">
  <path d="M 37.152344 74 L 436.84375 74 L 436.84375 76 L 37.152344 76 Z M 37.152344 74 "></path>
</clippath>
<clippath id="clip6">
  <path d="M 98 5.480469 L 100 5.480469 L 100 469.851562 L 98 469.851562 Z M 98 5.480469 "></path>
</clippath>
<clippath id="clip7">
  <path d="M 192 5.480469 L 193 5.480469 L 193 469.851562 L 192 469.851562 Z M 192 5.480469 "></path>
</clippath>
<clippath id="clip8">
  <path d="M 285 5.480469 L 286 5.480469 L 286 469.851562 L 285 469.851562 Z M 285 5.480469 "></path>
</clippath>
<clippath id="clip9">
  <path d="M 378 5.480469 L 380 5.480469 L 380 469.851562 L 378 469.851562 Z M 378 5.480469 "></path>
</clippath>
<clippath id="clip10">
  <path d="M 37.152344 359 L 436.84375 359 L 436.84375 361 L 37.152344 361 Z M 37.152344 359 "></path>
</clippath>
<clippath id="clip11">
  <path d="M 37.152344 245 L 436.84375 245 L 436.84375 247 L 37.152344 247 Z M 37.152344 245 "></path>
</clippath>
<clippath id="clip12">
  <path d="M 37.152344 131 L 436.84375 131 L 436.84375 133 L 37.152344 133 Z M 37.152344 131 "></path>
</clippath>
<clippath id="clip13">
  <path d="M 37.152344 17 L 436.84375 17 L 436.84375 19 L 37.152344 19 Z M 37.152344 17 "></path>
</clippath>
<clippath id="clip14">
  <path d="M 51 5.480469 L 54 5.480469 L 54 469.851562 L 51 469.851562 Z M 51 5.480469 "></path>
</clippath>
<clippath id="clip15">
  <path d="M 145 5.480469 L 147 5.480469 L 147 469.851562 L 145 469.851562 Z M 145 5.480469 "></path>
</clippath>
<clippath id="clip16">
  <path d="M 238 5.480469 L 240 5.480469 L 240 469.851562 L 238 469.851562 Z M 238 5.480469 "></path>
</clippath>
<clippath id="clip17">
  <path d="M 331 5.480469 L 333 5.480469 L 333 469.851562 L 331 469.851562 Z M 331 5.480469 "></path>
</clippath>
<clippath id="clip18">
  <path d="M 424 5.480469 L 427 5.480469 L 427 469.851562 L 424 469.851562 Z M 424 5.480469 "></path>
</clippath>
<clippath id="clip19">
  <path d="M 453.28125 157.585938 L 470.5625 157.585938 L 470.5625 243.984375 L 453.28125 243.984375 Z M 453.28125 157.585938 "></path>
</clippath>
<image id="image10" width="1" height="300" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAEsCAIAAACNMk6CAAAABmJLR0QA/wD/AP+gvaeTAAAAjklEQVQ4jaWTQRKAMAgDd3ik//R1HuOlji3SjNYjhZAEKNt+BCgQIRRIAQRSi2l5hdr79/q1fqBQVw+ErvyipqGH5eh7fNFJi1M+9bC8OT/lrTD9fNYwT/0FpvQzwVju0eObndsd/uUa7qX2NffqNE5w7j7dbCudpXbj2ehX0n3f0ot5pX9/1xkPj79W8p41NH/nSHk1sQAAAABJRU5ErkJggg=="></image>
<pattern id="pattern0" patternunits="userSpaceOnUse" width="1" height="300" patterntransform="matrix(17.28,0,0,0.288,453.281644,157.585479)">
  <use href="#image10"></use>
</pattern>
</defs>
<g id="surface6">
<rect x="0" y="0" width="504" height="504" style="fill:rgb(100%,100%,100%);fill-opacity:1;stroke:none;"></rect>
<rect x="0" y="0" width="504" height="504" style="fill:rgb(100%,100%,100%);fill-opacity:1;stroke:none;"></rect>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 0 504 L 504 504 L 504 0 L 0 0 Z M 0 504 "></path>
<g clip-path="url(#clip1)" clip-rule="nonzero">
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(92.156863%,92.156863%,92.156863%);fill-opacity:1;" d="M 37.152344 469.847656 L 436.84375 469.847656 L 436.84375 5.476562 L 37.152344 5.476562 Z M 37.152344 469.847656 "></path>
</g>
<g clip-path="url(#clip2)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 417.234375 L 436.84375 417.234375 "></path>
</g>
<g clip-path="url(#clip3)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 303.222656 L 436.84375 303.222656 "></path>
</g>
<g clip-path="url(#clip4)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 189.210938 L 436.84375 189.210938 "></path>
</g>
<g clip-path="url(#clip5)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 75.199219 L 436.84375 75.199219 "></path>
</g>
<g clip-path="url(#clip6)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 99.117188 469.847656 L 99.117188 5.480469 "></path>
</g>
<g clip-path="url(#clip7)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 192.371094 469.847656 L 192.371094 5.480469 "></path>
</g>
<g clip-path="url(#clip8)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 285.628906 469.847656 L 285.628906 5.480469 "></path>
</g>
<g clip-path="url(#clip9)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 378.882812 469.847656 L 378.882812 5.480469 "></path>
</g>
<g clip-path="url(#clip10)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 360.230469 L 436.84375 360.230469 "></path>
</g>
<g clip-path="url(#clip11)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 246.21875 L 436.84375 246.21875 "></path>
</g>
<g clip-path="url(#clip12)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 132.207031 L 436.84375 132.207031 "></path>
</g>
<g clip-path="url(#clip13)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 18.195312 L 436.84375 18.195312 "></path>
</g>
<g clip-path="url(#clip14)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 52.488281 469.847656 L 52.488281 5.480469 "></path>
</g>
<g clip-path="url(#clip15)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 145.746094 469.847656 L 145.746094 5.480469 "></path>
</g>
<g clip-path="url(#clip16)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 239 469.847656 L 239 5.480469 "></path>
</g>
<g clip-path="url(#clip17)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 332.257812 469.847656 L 332.257812 5.480469 "></path>
</g>
<g clip-path="url(#clip18)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 425.511719 469.847656 L 425.511719 5.480469 "></path>
</g>
<path style="fill-rule:nonzero;fill:rgb(31.764706%,65.490196%,91.764706%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(31.764706%,65.490196%,91.764706%);stroke-opacity:1;stroke-miterlimit:10;" d="M 395.152344 51 C 395.152344 57.867188 384.855469 57.867188 384.855469 51 C 384.855469 44.136719 395.152344 44.136719 395.152344 51 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.039216%,38.039216%,54.509804%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.039216%,38.039216%,54.509804%);stroke-opacity:1;stroke-miterlimit:10;" d="M 308.691406 314.464844 C 308.691406 318.148438 305.707031 321.128906 302.023438 321.128906 C 298.34375 321.128906 295.359375 318.148438 295.359375 314.464844 C 295.359375 310.785156 298.34375 307.800781 302.023438 307.800781 C 305.707031 307.800781 308.691406 310.785156 308.691406 314.464844 "></path>
<path style="fill-rule:nonzero;fill:rgb(12.941176%,27.843137%,41.176471%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(12.941176%,27.843137%,41.176471%);stroke-opacity:1;stroke-miterlimit:10;" d="M 108.632812 319.585938 C 108.632812 324.667969 101.007812 324.667969 101.007812 319.585938 C 101.007812 314.5 108.632812 314.5 108.632812 319.585938 "></path>
<path style="fill-rule:nonzero;fill:rgb(27.843137%,58.039216%,81.568627%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(27.843137%,58.039216%,81.568627%);stroke-opacity:1;stroke-miterlimit:10;" d="M 395.214844 137.15625 C 395.214844 140.25 392.707031 142.757812 389.613281 142.757812 C 386.515625 142.757812 384.007812 140.25 384.007812 137.15625 C 384.007812 134.058594 386.515625 131.550781 389.613281 131.550781 C 392.707031 131.550781 395.214844 134.058594 395.214844 137.15625 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.431373%,38.431373%,55.294118%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.431373%,38.431373%,55.294118%);stroke-opacity:1;stroke-miterlimit:10;" d="M 289.351562 297.378906 C 289.351562 300.804688 286.570312 303.585938 283.140625 303.585938 C 279.714844 303.585938 276.933594 300.804688 276.933594 297.378906 C 276.933594 293.949219 279.714844 291.167969 283.140625 291.167969 C 286.570312 291.167969 289.351562 293.949219 289.351562 297.378906 "></path>
<path style="fill-rule:nonzero;fill:rgb(29.411765%,60.392157%,84.705882%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(29.411765%,60.392157%,84.705882%);stroke-opacity:1;stroke-miterlimit:10;" d="M 363.816406 89.222656 C 363.816406 96.082031 353.53125 96.082031 353.53125 89.222656 C 353.53125 82.367188 363.816406 82.367188 363.816406 89.222656 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.823529%,39.215686%,56.470588%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.823529%,39.215686%,56.470588%);stroke-opacity:1;stroke-miterlimit:10;" d="M 206.503906 236.117188 C 206.503906 242.40625 197.070312 242.40625 197.070312 236.117188 C 197.070312 229.828125 206.503906 229.828125 206.503906 236.117188 "></path>
<path style="fill-rule:nonzero;fill:rgb(20%,42.352941%,60.392157%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20%,42.352941%,60.392157%);stroke-opacity:1;stroke-miterlimit:10;" d="M 213.007812 206.777344 C 213.007812 212.90625 203.820312 212.90625 203.820312 206.777344 C 203.820312 200.652344 213.007812 200.652344 213.007812 206.777344 "></path>
<path style="fill-rule:nonzero;fill:rgb(23.529412%,48.627451%,69.019608%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(23.529412%,48.627451%,69.019608%);stroke-opacity:1;stroke-miterlimit:10;" d="M 262.828125 160.855469 C 262.828125 167.246094 253.238281 167.246094 253.238281 160.855469 C 253.238281 154.464844 262.828125 154.464844 262.828125 160.855469 "></path>
<path style="fill-rule:nonzero;fill:rgb(22.745098%,47.45098%,67.45098%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(22.745098%,47.45098%,67.45098%);stroke-opacity:1;stroke-miterlimit:10;" d="M 317.554688 207.792969 C 317.554688 210.855469 315.074219 213.339844 312.007812 213.339844 C 308.945312 213.339844 306.460938 210.855469 306.460938 207.792969 C 306.460938 204.726562 308.945312 202.242188 312.007812 202.242188 C 315.074219 202.242188 317.554688 204.726562 317.554688 207.792969 "></path>
<path style="fill-rule:nonzero;fill:rgb(22.352941%,46.666667%,66.27451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(22.352941%,46.666667%,66.27451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 233.757812 165.921875 C 233.757812 172.011719 224.621094 172.011719 224.621094 165.921875 C 224.621094 159.832031 233.757812 159.832031 233.757812 165.921875 "></path>
<path style="fill-rule:nonzero;fill:rgb(9.411765%,20.392157%,30.980392%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(9.411765%,20.392157%,30.980392%);stroke-opacity:1;stroke-miterlimit:10;" d="M 83.074219 400.699219 C 83.074219 405.902344 75.269531 405.902344 75.269531 400.699219 C 75.269531 395.496094 83.074219 395.496094 83.074219 400.699219 "></path>
<path style="fill-rule:nonzero;fill:rgb(9.411765%,20.784314%,31.372549%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(9.411765%,20.784314%,31.372549%);stroke-opacity:1;stroke-miterlimit:10;" d="M 90.929688 400.960938 C 90.929688 406.625 82.429688 406.625 82.429688 400.960938 C 82.429688 395.292969 90.929688 395.292969 90.929688 400.960938 "></path>
<path style="fill-rule:nonzero;fill:rgb(27.058824%,56.078431%,79.215686%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(27.058824%,56.078431%,79.215686%);stroke-opacity:1;stroke-miterlimit:10;" d="M 325.40625 114.222656 C 325.40625 120.914062 315.367188 120.914062 315.367188 114.222656 C 315.367188 107.53125 325.40625 107.53125 325.40625 114.222656 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.470588%,34.901961%,50.196078%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.470588%,34.901961%,50.196078%);stroke-opacity:1;stroke-miterlimit:10;" d="M 189.492188 281.628906 C 189.492188 288.125 179.75 288.125 179.75 281.628906 C 179.75 275.132812 189.492188 275.132812 189.492188 281.628906 "></path>
<path style="fill-rule:nonzero;fill:rgb(12.54902%,26.666667%,39.607843%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(12.54902%,26.666667%,39.607843%);stroke-opacity:1;stroke-miterlimit:10;" d="M 84.671875 320.175781 C 84.671875 324.398438 78.335938 324.398438 78.335938 320.175781 C 78.335938 315.949219 84.671875 315.949219 84.671875 320.175781 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.039216%,38.039216%,54.901961%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.039216%,38.039216%,54.901961%);stroke-opacity:1;stroke-miterlimit:10;" d="M 212.664062 255.476562 C 212.664062 262.054688 202.800781 262.054688 202.800781 255.476562 C 202.800781 248.902344 212.664062 248.902344 212.664062 255.476562 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.117647%,30.196078%,44.313725%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.117647%,30.196078%,44.313725%);stroke-opacity:1;stroke-miterlimit:10;" d="M 225.5 359.011719 C 225.5 362.578125 222.605469 365.472656 219.035156 365.472656 C 215.464844 365.472656 212.574219 362.578125 212.574219 359.011719 C 212.574219 355.441406 215.464844 352.546875 219.035156 352.546875 C 222.605469 352.546875 225.5 355.441406 225.5 359.011719 "></path>
<path style="fill-rule:nonzero;fill:rgb(17.254902%,36.470588%,52.54902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(17.254902%,36.470588%,52.54902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 244.421875 294.554688 C 244.421875 297.691406 241.878906 300.234375 238.738281 300.234375 C 235.601562 300.234375 233.058594 297.691406 233.058594 294.554688 C 233.058594 291.417969 235.601562 288.871094 238.738281 288.871094 C 241.878906 288.871094 244.421875 291.417969 244.421875 294.554688 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.039216%,37.647059%,54.509804%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.039216%,37.647059%,54.509804%);stroke-opacity:1;stroke-miterlimit:10;" d="M 224.273438 266.660156 C 224.273438 273.539062 213.953125 273.539062 213.953125 266.660156 C 213.953125 259.777344 224.273438 259.777344 224.273438 266.660156 "></path>
<path style="fill-rule:nonzero;fill:rgb(23.529412%,48.627451%,69.019608%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(23.529412%,48.627451%,69.019608%);stroke-opacity:1;stroke-miterlimit:10;" d="M 388.0625 236.457031 C 388.0625 239.964844 385.21875 242.8125 381.707031 242.8125 C 378.199219 242.8125 375.351562 239.964844 375.351562 236.457031 C 375.351562 232.945312 378.199219 230.101562 381.707031 230.101562 C 385.21875 230.101562 388.0625 232.945312 388.0625 236.457031 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.901961%,31.764706%,46.27451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.901961%,31.764706%,46.27451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 210.558594 332.382812 C 210.558594 335.5625 207.980469 338.140625 204.800781 338.140625 C 201.621094 338.140625 199.042969 335.5625 199.042969 332.382812 C 199.042969 329.203125 201.621094 326.625 204.800781 326.625 C 207.980469 326.625 210.558594 329.203125 210.558594 332.382812 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.823529%,39.215686%,56.470588%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.823529%,39.215686%,56.470588%);stroke-opacity:1;stroke-miterlimit:10;" d="M 315.382812 302.421875 C 315.382812 306.039062 312.453125 308.96875 308.839844 308.96875 C 305.222656 308.96875 302.292969 306.039062 302.292969 302.421875 C 302.292969 298.808594 305.222656 295.878906 308.839844 295.878906 C 312.453125 295.878906 315.382812 298.808594 315.382812 302.421875 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.078431%,34.117647%,49.411765%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.078431%,34.117647%,49.411765%);stroke-opacity:1;stroke-miterlimit:10;" d="M 117.773438 246.539062 C 117.773438 251.269531 110.675781 251.269531 110.675781 246.539062 C 110.675781 241.808594 117.773438 241.808594 117.773438 246.539062 "></path>
<path style="fill-rule:nonzero;fill:rgb(8.235294%,18.431373%,28.235294%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(8.235294%,18.431373%,28.235294%);stroke-opacity:1;stroke-miterlimit:10;" d="M 105.019531 439.507812 C 105.019531 442.964844 102.214844 445.769531 98.757812 445.769531 C 95.300781 445.769531 92.5 442.964844 92.5 439.507812 C 92.5 436.054688 95.300781 433.25 98.757812 433.25 C 102.214844 433.25 105.019531 436.054688 105.019531 439.507812 "></path>
<path style="fill-rule:nonzero;fill:rgb(19.607843%,40.784314%,58.431373%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(19.607843%,40.784314%,58.431373%);stroke-opacity:1;stroke-miterlimit:10;" d="M 260.085938 251.953125 C 260.085938 254.9375 257.667969 257.359375 254.679688 257.359375 C 251.695312 257.359375 249.273438 254.9375 249.273438 251.953125 C 249.273438 248.964844 251.695312 246.542969 254.679688 246.542969 C 257.667969 246.542969 260.085938 248.964844 260.085938 251.953125 "></path>
<path style="fill-rule:nonzero;fill:rgb(21.568627%,44.705882%,63.529412%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(21.568627%,44.705882%,63.529412%);stroke-opacity:1;stroke-miterlimit:10;" d="M 301.40625 231.359375 C 301.40625 234.457031 298.894531 236.96875 295.796875 236.96875 C 292.699219 236.96875 290.191406 234.457031 290.191406 231.359375 C 290.191406 228.265625 292.699219 225.753906 295.796875 225.753906 C 298.894531 225.753906 301.40625 228.265625 301.40625 231.359375 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.705882%,51.372549%,72.54902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.705882%,51.372549%,72.54902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 374.21875 197.320312 C 374.21875 200.574219 371.578125 203.214844 368.324219 203.214844 C 365.070312 203.214844 362.433594 200.574219 362.433594 197.320312 C 362.433594 194.066406 365.070312 191.429688 368.324219 191.429688 C 371.578125 191.429688 374.21875 194.066406 374.21875 197.320312 "></path>
<path style="fill-rule:nonzero;fill:rgb(9.803922%,21.176471%,32.156863%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(9.803922%,21.176471%,32.156863%);stroke-opacity:1;stroke-miterlimit:10;" d="M 79.574219 385.910156 C 79.574219 390.617188 72.515625 390.617188 72.515625 385.910156 C 72.515625 381.203125 79.574219 381.203125 79.574219 385.910156 "></path>
<path style="fill-rule:nonzero;fill:rgb(13.333333%,28.627451%,41.960784%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(13.333333%,28.627451%,41.960784%);stroke-opacity:1;stroke-miterlimit:10;" d="M 65.382812 284.363281 C 65.382812 287.371094 60.875 287.371094 60.875 284.363281 C 60.875 281.355469 65.382812 281.355469 65.382812 284.363281 "></path>
<path style="fill-rule:nonzero;fill:rgb(25.098039%,52.156863%,74.117647%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(25.098039%,52.156863%,74.117647%);stroke-opacity:1;stroke-miterlimit:10;" d="M 373.835938 186.300781 C 373.835938 189.507812 371.238281 192.105469 368.035156 192.105469 C 364.828125 192.105469 362.230469 189.507812 362.230469 186.300781 C 362.230469 183.097656 364.828125 180.5 368.035156 180.5 C 371.238281 180.5 373.835938 183.097656 373.835938 186.300781 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.313725%,50.588235%,71.372549%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.313725%,50.588235%,71.372549%);stroke-opacity:1;stroke-miterlimit:10;" d="M 338.8125 186.515625 C 338.8125 189.582031 336.328125 192.070312 333.261719 192.070312 C 330.195312 192.070312 327.707031 189.582031 327.707031 186.515625 C 327.707031 183.449219 330.195312 180.964844 333.261719 180.964844 C 336.328125 180.964844 338.8125 183.449219 338.8125 186.515625 "></path>
<path style="fill-rule:nonzero;fill:rgb(12.54902%,26.666667%,39.607843%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(12.54902%,26.666667%,39.607843%);stroke-opacity:1;stroke-miterlimit:10;" d="M 177.691406 374.308594 C 177.691406 377.621094 175.007812 380.304688 171.695312 380.304688 C 168.386719 380.304688 165.699219 377.621094 165.699219 374.308594 C 165.699219 371 168.386719 368.3125 171.695312 368.3125 C 175.007812 368.3125 177.691406 371 177.691406 374.308594 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.039216%,38.431373%,54.901961%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.039216%,38.431373%,54.901961%);stroke-opacity:1;stroke-miterlimit:10;" d="M 263.027344 283.605469 C 263.027344 286.785156 260.449219 289.363281 257.269531 289.363281 C 254.085938 289.363281 251.507812 286.785156 251.507812 283.605469 C 251.507812 280.425781 254.085938 277.847656 257.269531 277.847656 C 260.449219 277.847656 263.027344 280.425781 263.027344 283.605469 "></path>
<path style="fill-rule:nonzero;fill:rgb(22.745098%,47.45098%,67.058824%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(22.745098%,47.45098%,67.058824%);stroke-opacity:1;stroke-miterlimit:10;" d="M 403.109375 261.476562 C 403.109375 265.207031 400.082031 268.234375 396.351562 268.234375 C 392.621094 268.234375 389.597656 265.207031 389.597656 261.476562 C 389.597656 257.746094 392.621094 254.722656 396.351562 254.722656 C 400.082031 254.722656 403.109375 257.746094 403.109375 261.476562 "></path>
<path style="fill-rule:nonzero;fill:rgb(13.333333%,28.627451%,41.960784%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(13.333333%,28.627451%,41.960784%);stroke-opacity:1;stroke-miterlimit:10;" d="M 191.949219 360.550781 C 191.949219 363.84375 189.28125 366.511719 185.988281 366.511719 C 182.695312 366.511719 180.027344 363.84375 180.027344 360.550781 C 180.027344 357.261719 182.695312 354.59375 185.988281 354.59375 C 189.28125 354.59375 191.949219 357.261719 191.949219 360.550781 "></path>
<path style="fill-rule:nonzero;fill:rgb(27.843137%,57.647059%,81.176471%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(27.843137%,57.647059%,81.176471%);stroke-opacity:1;stroke-miterlimit:10;" d="M 331.320312 100.496094 C 331.320312 107.148438 321.339844 107.148438 321.339844 100.496094 C 321.339844 93.839844 331.320312 93.839844 331.320312 100.496094 "></path>
<path style="fill-rule:nonzero;fill:rgb(13.72549%,29.803922%,43.529412%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(13.72549%,29.803922%,43.529412%);stroke-opacity:1;stroke-miterlimit:10;" d="M 151.789062 322.363281 C 151.789062 328.636719 142.378906 328.636719 142.378906 322.363281 C 142.378906 316.089844 151.789062 316.089844 151.789062 322.363281 "></path>
<path style="fill-rule:nonzero;fill:rgb(29.803922%,61.176471%,85.882353%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(29.803922%,61.176471%,85.882353%);stroke-opacity:1;stroke-miterlimit:10;" d="M 352.960938 72.851562 C 352.960938 79.515625 342.964844 79.515625 342.964844 72.851562 C 342.964844 66.1875 352.960938 66.1875 352.960938 72.851562 "></path>
<path style="fill-rule:nonzero;fill:rgb(30.196078%,61.960784%,87.058824%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(30.196078%,61.960784%,87.058824%);stroke-opacity:1;stroke-miterlimit:10;" d="M 377.683594 78.964844 C 377.683594 85.867188 367.328125 85.867188 367.328125 78.964844 C 367.328125 72.0625 377.683594 72.0625 377.683594 78.964844 "></path>
<path style="fill-rule:nonzero;fill:rgb(25.098039%,51.764706%,73.333333%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(25.098039%,51.764706%,73.333333%);stroke-opacity:1;stroke-miterlimit:10;" d="M 425.15625 222.59375 C 425.15625 226.175781 422.253906 229.078125 418.675781 229.078125 C 415.097656 229.078125 412.195312 226.175781 412.195312 222.59375 C 412.195312 219.015625 415.097656 216.113281 418.675781 216.113281 C 422.253906 216.113281 425.15625 219.015625 425.15625 222.59375 "></path>
<path style="fill-rule:nonzero;fill:rgb(33.72549%,69.411765%,96.862745%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(33.72549%,69.411765%,96.862745%);stroke-opacity:1;stroke-miterlimit:10;" d="M 421.945312 26.585938 C 421.945312 33.503906 411.570312 33.503906 411.570312 26.585938 C 411.570312 19.671875 421.945312 19.671875 421.945312 26.585938 "></path>
<path style="fill-rule:nonzero;fill:rgb(19.215686%,40.392157%,58.039216%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(19.215686%,40.392157%,58.039216%);stroke-opacity:1;stroke-miterlimit:10;" d="M 188.371094 212.605469 C 188.371094 218.421875 179.648438 218.421875 179.648438 212.605469 C 179.648438 206.789062 188.371094 206.789062 188.371094 212.605469 "></path>
<path style="fill-rule:nonzero;fill:rgb(13.333333%,28.627451%,41.960784%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(13.333333%,28.627451%,41.960784%);stroke-opacity:1;stroke-miterlimit:10;" d="M 164.527344 343.6875 C 164.527344 350.621094 154.128906 350.621094 154.128906 343.6875 C 154.128906 336.757812 164.527344 336.757812 164.527344 343.6875 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.901961%,31.764706%,46.27451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.901961%,31.764706%,46.27451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 243.960938 349.933594 C 243.960938 353.542969 241.035156 356.472656 237.425781 356.472656 C 233.8125 356.472656 230.886719 353.542969 230.886719 349.933594 C 230.886719 346.324219 233.8125 343.398438 237.425781 343.398438 C 241.035156 343.398438 243.960938 346.324219 243.960938 349.933594 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.470588%,34.901961%,50.588235%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.470588%,34.901961%,50.588235%);stroke-opacity:1;stroke-miterlimit:10;" d="M 238.121094 309.910156 C 238.121094 313.117188 235.523438 315.710938 232.320312 315.710938 C 229.117188 315.710938 226.519531 313.117188 226.519531 309.910156 C 226.519531 306.707031 229.117188 304.113281 232.320312 304.113281 C 235.523438 304.113281 238.121094 306.707031 238.121094 309.910156 "></path>
<path style="fill-rule:nonzero;fill:rgb(10.196078%,21.960784%,32.941176%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(10.196078%,21.960784%,32.941176%);stroke-opacity:1;stroke-miterlimit:10;" d="M 142.730469 414.933594 C 142.730469 418.472656 139.863281 421.34375 136.324219 421.34375 C 132.785156 421.34375 129.917969 418.472656 129.917969 414.933594 C 129.917969 411.398438 132.785156 408.527344 136.324219 408.527344 C 139.863281 408.527344 142.730469 411.398438 142.730469 414.933594 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.117647%,30.196078%,43.921569%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.117647%,30.196078%,43.921569%);stroke-opacity:1;stroke-miterlimit:10;" d="M 111.976562 293.765625 C 111.976562 298.703125 104.574219 298.703125 104.574219 293.765625 C 104.574219 288.832031 111.976562 288.832031 111.976562 293.765625 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.294118%,32.156863%,47.058824%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.294118%,32.156863%,47.058824%);stroke-opacity:1;stroke-miterlimit:10;" d="M 122.425781 273.046875 C 122.425781 278.085938 114.871094 278.085938 114.871094 273.046875 C 114.871094 268.011719 122.425781 268.011719 122.425781 273.046875 "></path>
<path style="fill-rule:nonzero;fill:rgb(20.784314%,43.529412%,61.960784%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20.784314%,43.529412%,61.960784%);stroke-opacity:1;stroke-miterlimit:10;" d="M 348.933594 273.609375 C 348.933594 277.175781 346.039062 280.070312 342.46875 280.070312 C 338.902344 280.070312 336.007812 277.175781 336.007812 273.609375 C 336.007812 270.039062 338.902344 267.144531 342.46875 267.144531 C 346.039062 267.144531 348.933594 270.039062 348.933594 273.609375 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.117647%,30.196078%,44.313725%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.117647%,30.196078%,44.313725%);stroke-opacity:1;stroke-miterlimit:10;" d="M 97.601562 281.644531 C 97.601562 286.054688 90.984375 286.054688 90.984375 281.644531 C 90.984375 277.230469 97.601562 277.230469 97.601562 281.644531 "></path>
<path style="fill-rule:nonzero;fill:rgb(28.627451%,59.215686%,83.137255%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(28.627451%,59.215686%,83.137255%);stroke-opacity:1;stroke-miterlimit:10;" d="M 332.746094 84.167969 C 332.746094 90.730469 322.902344 90.730469 322.902344 84.167969 C 322.902344 77.601562 332.746094 77.601562 332.746094 84.167969 "></path>
<path style="fill-rule:nonzero;fill:rgb(22.745098%,47.058824%,67.058824%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(22.745098%,47.058824%,67.058824%);stroke-opacity:1;stroke-miterlimit:10;" d="M 285.382812 193.308594 C 285.382812 200.214844 275.023438 200.214844 275.023438 193.308594 C 275.023438 186.402344 285.382812 186.402344 285.382812 193.308594 "></path>
<path style="fill-rule:nonzero;fill:rgb(25.490196%,52.941176%,74.509804%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(25.490196%,52.941176%,74.509804%);stroke-opacity:1;stroke-miterlimit:10;" d="M 347.660156 165.480469 C 347.660156 168.5 345.210938 170.949219 342.191406 170.949219 C 339.167969 170.949219 336.71875 168.5 336.71875 165.480469 C 336.71875 162.457031 339.167969 160.007812 342.191406 160.007812 C 345.210938 160.007812 347.660156 162.457031 347.660156 165.480469 "></path>
<path style="fill-rule:nonzero;fill:rgb(17.254902%,36.470588%,52.54902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(17.254902%,36.470588%,52.54902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 289.664062 321.121094 C 289.664062 324.746094 286.722656 327.6875 283.097656 327.6875 C 279.46875 327.6875 276.527344 324.746094 276.527344 321.121094 C 276.527344 317.492188 279.46875 314.550781 283.097656 314.550781 C 286.722656 314.550781 289.664062 317.492188 289.664062 321.121094 "></path>
<path style="fill-rule:nonzero;fill:rgb(20%,41.960784%,60%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20%,41.960784%,60%);stroke-opacity:1;stroke-miterlimit:10;" d="M 254.570312 234.984375 C 254.570312 241.929688 244.152344 241.929688 244.152344 234.984375 C 244.152344 228.039062 254.570312 228.039062 254.570312 234.984375 "></path>
<path style="fill-rule:nonzero;fill:rgb(25.490196%,53.333333%,74.901961%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(25.490196%,53.333333%,74.901961%);stroke-opacity:1;stroke-miterlimit:10;" d="M 340.375 156.96875 C 340.375 164.121094 329.644531 164.121094 329.644531 156.96875 C 329.644531 149.816406 340.375 149.816406 340.375 156.96875 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.705882%,51.372549%,72.54902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.705882%,51.372549%,72.54902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 376.324219 199.015625 C 376.324219 202.285156 373.671875 204.9375 370.402344 204.9375 C 367.132812 204.9375 364.480469 202.285156 364.480469 199.015625 C 364.480469 195.742188 367.132812 193.09375 370.402344 193.09375 C 373.671875 193.09375 376.324219 195.742188 376.324219 199.015625 "></path>
<path style="fill-rule:nonzero;fill:rgb(20%,41.960784%,60%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20%,41.960784%,60%);stroke-opacity:1;stroke-miterlimit:10;" d="M 291.34375 256.242188 C 291.34375 259.417969 288.769531 261.992188 285.597656 261.992188 C 282.421875 261.992188 279.847656 259.417969 279.847656 256.242188 C 279.847656 253.066406 282.421875 250.492188 285.597656 250.492188 C 288.769531 250.492188 291.34375 253.066406 291.34375 256.242188 "></path>
<path style="fill-rule:nonzero;fill:rgb(20%,41.568627%,59.607843%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20%,41.568627%,59.607843%);stroke-opacity:1;stroke-miterlimit:10;" d="M 178.722656 192.660156 C 178.722656 198.183594 170.433594 198.183594 170.433594 192.660156 C 170.433594 187.132812 178.722656 187.132812 178.722656 192.660156 "></path>
<path style="fill-rule:nonzero;fill:rgb(12.54902%,27.058824%,39.607843%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(12.54902%,27.058824%,39.607843%);stroke-opacity:1;stroke-miterlimit:10;" d="M 191.796875 380.71875 C 191.796875 384.261719 188.921875 387.136719 185.375 387.136719 C 181.832031 387.136719 178.957031 384.261719 178.957031 380.71875 C 178.957031 377.171875 181.832031 374.296875 185.375 374.296875 C 188.921875 374.296875 191.796875 377.171875 191.796875 380.71875 "></path>
<path style="fill-rule:nonzero;fill:rgb(8.235294%,18.431373%,28.235294%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(8.235294%,18.431373%,28.235294%);stroke-opacity:1;stroke-miterlimit:10;" d="M 78.277344 425.679688 C 78.277344 431.253906 69.914062 431.253906 69.914062 425.679688 C 69.914062 420.105469 78.277344 420.105469 78.277344 425.679688 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.470588%,34.509804%,50.196078%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.470588%,34.509804%,50.196078%);stroke-opacity:1;stroke-miterlimit:10;" d="M 274.429688 335.640625 C 274.429688 339.316406 271.453125 342.292969 267.777344 342.292969 C 264.105469 342.292969 261.128906 339.316406 261.128906 335.640625 C 261.128906 331.96875 264.105469 328.992188 267.777344 328.992188 C 271.453125 328.992188 274.429688 331.96875 274.429688 335.640625 "></path>
<path style="fill-rule:nonzero;fill:rgb(12.156863%,26.27451%,38.823529%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(12.156863%,26.27451%,38.823529%);stroke-opacity:1;stroke-miterlimit:10;" d="M 87.550781 327 C 87.550781 331.402344 80.945312 331.402344 80.945312 327 C 80.945312 322.597656 87.550781 322.597656 87.550781 327 "></path>
<path style="fill-rule:nonzero;fill:rgb(22.745098%,47.058824%,67.058824%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(22.745098%,47.058824%,67.058824%);stroke-opacity:1;stroke-miterlimit:10;" d="M 241.085938 165.25 C 241.085938 171.425781 231.828125 171.425781 231.828125 165.25 C 231.828125 159.078125 241.085938 159.078125 241.085938 165.25 "></path>
<path style="fill-rule:nonzero;fill:rgb(10.980392%,23.529412%,35.294118%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(10.980392%,23.529412%,35.294118%);stroke-opacity:1;stroke-miterlimit:10;" d="M 77.480469 354.539062 C 77.480469 358.722656 71.203125 358.722656 71.203125 354.539062 C 71.203125 350.355469 77.480469 350.355469 77.480469 354.539062 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.117647%,29.803922%,43.921569%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.117647%,29.803922%,43.921569%);stroke-opacity:1;stroke-miterlimit:10;" d="M 159.261719 323.617188 C 159.261719 330.078125 149.566406 330.078125 149.566406 323.617188 C 149.566406 317.152344 159.261719 317.152344 159.261719 323.617188 "></path>
<path style="fill-rule:nonzero;fill:rgb(17.254902%,36.078431%,52.156863%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(17.254902%,36.078431%,52.156863%);stroke-opacity:1;stroke-miterlimit:10;" d="M 250.1875 300.621094 C 250.1875 303.839844 247.582031 306.445312 244.367188 306.445312 C 241.152344 306.445312 238.546875 303.839844 238.546875 300.621094 C 238.546875 297.40625 241.152344 294.800781 244.367188 294.800781 C 247.582031 294.800781 250.1875 297.40625 250.1875 300.621094 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.117647%,29.803922%,43.921569%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.117647%,29.803922%,43.921569%);stroke-opacity:1;stroke-miterlimit:10;" d="M 82.3125 276.335938 C 82.3125 280.171875 76.554688 280.171875 76.554688 276.335938 C 76.554688 272.5 82.3125 272.5 82.3125 276.335938 "></path>
<path style="fill-rule:nonzero;fill:rgb(12.156863%,26.27451%,38.823529%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(12.156863%,26.27451%,38.823529%);stroke-opacity:1;stroke-miterlimit:10;" d="M 75.042969 319.796875 C 75.042969 323.5625 69.390625 323.5625 69.390625 319.796875 C 69.390625 316.027344 75.042969 316.027344 75.042969 319.796875 "></path>
<path style="fill-rule:nonzero;fill:rgb(12.156863%,26.27451%,39.215686%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(12.156863%,26.27451%,39.215686%);stroke-opacity:1;stroke-miterlimit:10;" d="M 56.738281 306.964844 C 56.738281 308.859375 53.898438 308.859375 53.898438 306.964844 C 53.898438 305.070312 56.738281 305.070312 56.738281 306.964844 "></path>
<path style="fill-rule:nonzero;fill:rgb(30.588235%,63.137255%,88.627451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(30.588235%,63.137255%,88.627451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 410.886719 86.804688 C 410.886719 89.789062 408.460938 92.214844 405.476562 92.214844 C 402.488281 92.214844 400.0625 89.789062 400.0625 86.804688 C 400.0625 83.816406 402.488281 81.390625 405.476562 81.390625 C 408.460938 81.390625 410.886719 83.816406 410.886719 86.804688 "></path>
<path style="fill-rule:nonzero;fill:rgb(12.54902%,27.058824%,40%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(12.54902%,27.058824%,40%);stroke-opacity:1;stroke-miterlimit:10;" d="M 114.496094 333.199219 C 114.496094 338.625 106.359375 338.625 106.359375 333.199219 C 106.359375 327.777344 114.496094 327.777344 114.496094 333.199219 "></path>
<path style="fill-rule:nonzero;fill:rgb(13.333333%,28.627451%,42.352941%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(13.333333%,28.627451%,42.352941%);stroke-opacity:1;stroke-miterlimit:10;" d="M 140.171875 326.09375 C 140.171875 332.136719 131.101562 332.136719 131.101562 326.09375 C 131.101562 320.046875 140.171875 320.046875 140.171875 326.09375 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.901961%,31.764706%,46.27451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.901961%,31.764706%,46.27451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 117.195312 274.28125 C 117.195312 279.199219 109.824219 279.199219 109.824219 274.28125 C 109.824219 269.367188 117.195312 269.367188 117.195312 274.28125 "></path>
<path style="fill-rule:nonzero;fill:rgb(7.45098%,16.862745%,26.27451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(7.45098%,16.862745%,26.27451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 85.273438 448.742188 C 85.273438 451.90625 82.710938 454.472656 79.542969 454.472656 C 76.378906 454.472656 73.8125 451.90625 73.8125 448.742188 C 73.8125 445.574219 76.378906 443.011719 79.542969 443.011719 C 82.710938 443.011719 85.273438 445.574219 85.273438 448.742188 "></path>
<path style="fill-rule:nonzero;fill:rgb(20.784314%,43.137255%,61.960784%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20.784314%,43.137255%,61.960784%);stroke-opacity:1;stroke-miterlimit:10;" d="M 204.265625 188.132812 C 204.265625 193.996094 195.46875 193.996094 195.46875 188.132812 C 195.46875 182.265625 204.265625 182.265625 204.265625 188.132812 "></path>
<path style="fill-rule:nonzero;fill:rgb(21.568627%,44.705882%,63.529412%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(21.568627%,44.705882%,63.529412%);stroke-opacity:1;stroke-miterlimit:10;" d="M 242.511719 196.371094 C 242.511719 202.800781 232.871094 202.800781 232.871094 196.371094 C 232.871094 189.941406 242.511719 189.941406 242.511719 196.371094 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.862745%,35.686275%,51.764706%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.862745%,35.686275%,51.764706%);stroke-opacity:1;stroke-miterlimit:10;" d="M 284.59375 325.742188 C 284.59375 329.378906 281.640625 332.332031 278 332.332031 C 274.359375 332.332031 271.410156 329.378906 271.410156 325.742188 C 271.410156 322.101562 274.359375 319.148438 278 319.148438 C 281.640625 319.148438 284.59375 322.101562 284.59375 325.742188 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.431373%,38.823529%,55.686275%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.431373%,38.823529%,55.686275%);stroke-opacity:1;stroke-miterlimit:10;" d="M 239.230469 263.328125 C 239.230469 270.386719 228.640625 270.386719 228.640625 263.328125 C 228.640625 256.265625 239.230469 256.265625 239.230469 263.328125 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.509804%,30.980392%,45.098039%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.509804%,30.980392%,45.098039%);stroke-opacity:1;stroke-miterlimit:10;" d="M 67.164062 257.539062 C 67.164062 260.566406 62.628906 260.566406 62.628906 257.539062 C 62.628906 254.515625 67.164062 254.515625 67.164062 257.539062 "></path>
<path style="fill-rule:nonzero;fill:rgb(23.921569%,49.803922%,70.588235%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(23.921569%,49.803922%,70.588235%);stroke-opacity:1;stroke-miterlimit:10;" d="M 302.859375 172.523438 C 302.859375 179.4375 292.492188 179.4375 292.492188 172.523438 C 292.492188 165.609375 302.859375 165.609375 302.859375 172.523438 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.862745%,35.686275%,51.764706%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.862745%,35.686275%,51.764706%);stroke-opacity:1;stroke-miterlimit:10;" d="M 229.625 293.066406 C 229.625 296.097656 227.167969 298.558594 224.132812 298.558594 C 221.101562 298.558594 218.644531 296.097656 218.644531 293.066406 C 218.644531 290.035156 221.101562 287.574219 224.132812 287.574219 C 227.167969 287.574219 229.625 290.035156 229.625 293.066406 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.294118%,32.54902%,47.058824%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.294118%,32.54902%,47.058824%);stroke-opacity:1;stroke-miterlimit:10;" d="M 124.589844 271.742188 C 124.589844 276.820312 116.972656 276.820312 116.972656 271.742188 C 116.972656 266.664062 124.589844 266.664062 124.589844 271.742188 "></path>
<path style="fill-rule:nonzero;fill:rgb(17.647059%,37.254902%,53.72549%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(17.647059%,37.254902%,53.72549%);stroke-opacity:1;stroke-miterlimit:10;" d="M 125.796875 211.300781 C 125.796875 216 118.75 216 118.75 211.300781 C 118.75 206.601562 125.796875 206.601562 125.796875 211.300781 "></path>
<path style="fill-rule:nonzero;fill:rgb(12.54902%,26.666667%,39.607843%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(12.54902%,26.666667%,39.607843%);stroke-opacity:1;stroke-miterlimit:10;" d="M 88.484375 320.988281 C 88.484375 325.378906 81.902344 325.378906 81.902344 320.988281 C 81.902344 316.601562 88.484375 316.601562 88.484375 320.988281 "></path>
<path style="fill-rule:nonzero;fill:rgb(10.196078%,21.960784%,32.941176%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(10.196078%,21.960784%,32.941176%);stroke-opacity:1;stroke-miterlimit:10;" d="M 115.804688 399.75 C 115.804688 406.5625 105.585938 406.5625 105.585938 399.75 C 105.585938 392.9375 115.804688 392.9375 115.804688 399.75 "></path>
<path style="fill-rule:nonzero;fill:rgb(22.745098%,47.058824%,67.058824%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(22.745098%,47.058824%,67.058824%);stroke-opacity:1;stroke-miterlimit:10;" d="M 216.792969 150.859375 C 216.792969 156.640625 208.117188 156.640625 208.117188 150.859375 C 208.117188 145.074219 216.792969 145.074219 216.792969 150.859375 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.901961%,31.764706%,46.27451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.901961%,31.764706%,46.27451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 206.085938 329.652344 C 206.085938 332.773438 203.554688 335.304688 200.433594 335.304688 C 197.308594 335.304688 194.777344 332.773438 194.777344 329.652344 C 194.777344 326.53125 197.308594 324 200.433594 324 C 203.554688 324 206.085938 326.53125 206.085938 329.652344 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.313725%,50.196078%,70.980392%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.313725%,50.196078%,70.980392%);stroke-opacity:1;stroke-miterlimit:10;" d="M 311.277344 173.824219 C 311.277344 180.835938 300.761719 180.835938 300.761719 173.824219 C 300.761719 166.8125 311.277344 166.8125 311.277344 173.824219 "></path>
<path style="fill-rule:nonzero;fill:rgb(26.27451%,54.901961%,77.254902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(26.27451%,54.901961%,77.254902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 350.484375 145.019531 C 350.484375 152.167969 339.761719 152.167969 339.761719 145.019531 C 339.761719 137.871094 350.484375 137.871094 350.484375 145.019531 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.039216%,38.039216%,54.901961%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.039216%,38.039216%,54.901961%);stroke-opacity:1;stroke-miterlimit:10;" d="M 305.277344 312.015625 C 305.277344 315.65625 302.324219 318.605469 298.6875 318.605469 C 295.046875 318.605469 292.097656 315.65625 292.097656 312.015625 C 292.097656 308.375 295.046875 305.425781 298.6875 305.425781 C 302.324219 305.425781 305.277344 308.375 305.277344 312.015625 "></path>
<path style="fill-rule:nonzero;fill:rgb(25.098039%,52.156863%,73.72549%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(25.098039%,52.156863%,73.72549%);stroke-opacity:1;stroke-miterlimit:10;" d="M 302.011719 145.933594 C 302.011719 152.625 291.972656 152.625 291.972656 145.933594 C 291.972656 139.238281 302.011719 139.238281 302.011719 145.933594 "></path>
<path style="fill-rule:nonzero;fill:rgb(25.490196%,52.54902%,74.509804%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(25.490196%,52.54902%,74.509804%);stroke-opacity:1;stroke-miterlimit:10;" d="M 318.421875 149.722656 C 318.421875 156.605469 308.09375 156.605469 308.09375 149.722656 C 308.09375 142.839844 318.421875 142.839844 318.421875 149.722656 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.470588%,34.901961%,50.980392%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.470588%,34.901961%,50.980392%);stroke-opacity:1;stroke-miterlimit:10;" d="M 116.921875 233.929688 C 116.921875 238.5625 109.972656 238.5625 109.972656 233.929688 C 109.972656 229.296875 116.921875 229.296875 116.921875 233.929688 "></path>
<path style="fill-rule:nonzero;fill:rgb(13.72549%,29.803922%,43.529412%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(13.72549%,29.803922%,43.529412%);stroke-opacity:1;stroke-miterlimit:10;" d="M 177.628906 337.605469 C 177.628906 344.71875 166.964844 344.71875 166.964844 337.605469 C 166.964844 330.496094 177.628906 330.496094 177.628906 337.605469 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.862745%,35.686275%,51.372549%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.862745%,35.686275%,51.372549%);stroke-opacity:1;stroke-miterlimit:10;" d="M 205.910156 280.632812 C 205.910156 287.394531 195.761719 287.394531 195.761719 280.632812 C 195.761719 273.867188 205.910156 273.867188 205.910156 280.632812 "></path>
<path style="fill-rule:nonzero;fill:rgb(20.392157%,42.352941%,60.392157%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20.392157%,42.352941%,60.392157%);stroke-opacity:1;stroke-miterlimit:10;" d="M 296.261719 256.875 C 296.261719 260.078125 293.664062 262.675781 290.460938 262.675781 C 287.257812 262.675781 284.660156 260.078125 284.660156 256.875 C 284.660156 253.667969 287.257812 251.074219 290.460938 251.074219 C 293.664062 251.074219 296.261719 253.667969 296.261719 256.875 "></path>
<path style="fill-rule:nonzero;fill:rgb(10.196078%,21.960784%,33.333333%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(10.196078%,21.960784%,33.333333%);stroke-opacity:1;stroke-miterlimit:10;" d="M 125.804688 404.660156 C 125.804688 407.722656 123.320312 410.207031 120.253906 410.207031 C 117.191406 410.207031 114.707031 407.722656 114.707031 404.660156 C 114.707031 401.59375 117.191406 399.109375 120.253906 399.109375 C 123.320312 399.109375 125.804688 401.59375 125.804688 404.660156 "></path>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="20.21875" y="363.145508"></use>
  <use href="#glyph0-2" x="25.21875" y="363.145508"></use>
  <use href="#glyph0-3" x="27.21875" y="363.145508"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-4" x="20.21875" y="249.133789"></use>
  <use href="#glyph0-2" x="25.21875" y="249.133789"></use>
  <use href="#glyph0-1" x="27.21875" y="249.133789"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-4" x="20.21875" y="135.12207"></use>
  <use href="#glyph0-2" x="25.21875" y="135.12207"></use>
  <use href="#glyph0-3" x="27.21875" y="135.12207"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-5" x="20.21875" y="21.110352"></use>
  <use href="#glyph0-2" x="25.21875" y="21.110352"></use>
  <use href="#glyph0-1" x="27.21875" y="21.110352"></use>
</g>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 34.410156 360.230469 L 37.152344 360.230469 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 34.410156 246.21875 L 37.152344 246.21875 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 34.410156 132.207031 L 37.152344 132.207031 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 34.410156 18.195312 L 37.152344 18.195312 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 52.488281 472.589844 L 52.488281 469.847656 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 145.746094 472.589844 L 145.746094 469.847656 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 239 472.589844 L 239 469.847656 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 332.257812 472.589844 L 332.257812 469.847656 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 425.511719 472.589844 L 425.511719 469.847656 "></path>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="43.988281" y="481.196289"></use>
  <use href="#glyph0-2" x="48.988281" y="481.196289"></use>
  <use href="#glyph0-1" x="50.988281" y="481.196289"></use>
  <use href="#glyph0-1" x="55.988281" y="481.196289"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="137.246094" y="481.196289"></use>
  <use href="#glyph0-2" x="142.246094" y="481.196289"></use>
  <use href="#glyph0-5" x="144.246094" y="481.196289"></use>
  <use href="#glyph0-3" x="149.246094" y="481.196289"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="230.5" y="481.196289"></use>
  <use href="#glyph0-2" x="235.5" y="481.196289"></use>
  <use href="#glyph0-3" x="237.5" y="481.196289"></use>
  <use href="#glyph0-1" x="242.5" y="481.196289"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="323.757812" y="481.196289"></use>
  <use href="#glyph0-2" x="328.757812" y="481.196289"></use>
  <use href="#glyph0-6" x="330.757812" y="481.196289"></use>
  <use href="#glyph0-3" x="335.757812" y="481.196289"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-4" x="417.011719" y="481.196289"></use>
  <use href="#glyph0-2" x="422.011719" y="481.196289"></use>
  <use href="#glyph0-1" x="424.011719" y="481.196289"></use>
  <use href="#glyph0-1" x="429.011719" y="481.196289"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-1" x="234.496094" y="494.538086"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph2-1" x="13.499023" y="240.164062"></use>
</g>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 447.800781 249.464844 L 488.757812 249.464844 L 488.757812 134.625 L 447.800781 134.625 Z M 447.800781 249.464844 "></path>
<g clip-path="url(#clip19)" clip-rule="nonzero">
<rect x="0" y="0" width="504" height="504" style="fill:url(#pattern0);stroke:none;"></rect>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-4" x="476.042969" y="221.266602"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-5" x="476.042969" y="190.012695"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-2" x="453.28125" y="149.624023"></use>
  <use href="#glyph1-1" x="457.28125" y="149.624023"></use>
  <use href="#glyph1-3" x="462.28125" y="149.624023"></use>
  <use href="#glyph1-4" x="465.28125" y="149.624023"></use>
  <use href="#glyph1-3" x="471.28125" y="149.624023"></use>
  <use href="#glyph1-5" x="474.28125" y="149.624023"></use>
  <use href="#glyph1-6" x="479.28125" y="149.624023"></use>
</g>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 453.28125 218.351562 L 456.738281 218.351562 "></path>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 453.28125 187.097656 L 456.738281 187.097656 "></path>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 467.105469 218.351562 L 470.5625 218.351562 "></path>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 467.105469 187.097656 L 470.5625 187.097656 "></path>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 447.800781 340.703125 L 498.519531 340.703125 L 498.519531 260.425781 L 447.800781 260.425781 Z M 447.800781 340.703125 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-2" x="453.28125" y="275.420898"></use>
  <use href="#glyph1-1" x="457.28125" y="275.420898"></use>
  <use href="#glyph1-7" x="462.28125" y="275.420898"></use>
  <use href="#glyph1-5" x="465.28125" y="275.420898"></use>
  <use href="#glyph1-6" x="470.28125" y="275.420898"></use>
</g>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(94.901961%,94.901961%,94.901961%);fill-opacity:1;" d="M 453.28125 300.664062 L 470.5625 300.664062 L 470.5625 283.382812 L 453.28125 283.382812 Z M 453.28125 300.664062 "></path>
<path style="fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 465.984375 292.023438 C 465.984375 297.441406 457.859375 297.441406 457.859375 292.023438 C 457.859375 286.605469 465.984375 286.605469 465.984375 292.023438 "></path>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(94.901961%,94.901961%,94.901961%);fill-opacity:1;" d="M 453.28125 317.941406 L 470.5625 317.941406 L 470.5625 300.660156 L 453.28125 300.660156 Z M 453.28125 317.941406 "></path>
<path style="fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 467.117188 309.304688 C 467.117188 316.230469 456.726562 316.230469 456.726562 309.304688 C 456.726562 302.375 467.117188 302.375 467.117188 309.304688 "></path>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(94.901961%,94.901961%,94.901961%);fill-opacity:1;" d="M 453.28125 335.222656 L 470.5625 335.222656 L 470.5625 317.941406 L 453.28125 317.941406 Z M 453.28125 335.222656 "></path>
<path style="fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 467.984375 326.582031 C 467.984375 329.929688 465.269531 332.644531 461.921875 332.644531 C 458.574219 332.644531 455.859375 329.929688 455.859375 326.582031 C 455.859375 323.234375 458.574219 320.519531 461.921875 320.519531 C 465.269531 320.519531 467.984375 323.234375 467.984375 326.582031 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-1" x="476.042969" y="294.938477"></use>
  <use href="#glyph0-2" x="481.042969" y="294.938477"></use>
  <use href="#glyph0-5" x="483.042969" y="294.938477"></use>
  <use href="#glyph0-3" x="488.042969" y="294.938477"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-1" x="476.042969" y="312.219727"></use>
  <use href="#glyph0-2" x="481.042969" y="312.219727"></use>
  <use href="#glyph0-3" x="483.042969" y="312.219727"></use>
  <use href="#glyph0-1" x="488.042969" y="312.219727"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-1" x="476.042969" y="329.49707"></use>
  <use href="#glyph0-2" x="481.042969" y="329.49707"></use>
  <use href="#glyph0-6" x="483.042969" y="329.49707"></use>
  <use href="#glyph0-3" x="488.042969" y="329.49707"></use>
</g>
</g>
</svg>

<p>Any plot (function or object) can be saved to file or converted to BufferedImage object.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb131"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [<span class="kw">path</span> <span class="st">"notebooks/generated-images/histogram.jpg"</span>]</span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>  (r-&gt;clj (plot-&gt;file <span class="kw">path</span></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>                      (<span class="kw">fn</span> [] (hist [<span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span>]</span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">:main</span> <span class="st">"Histogram"</span></span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">:xlab</span> <span class="st">"data: [1 1 1 1 2 3 4 5]"</span>))</span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">:width</span> <span class="dv">800</span> <span class="at">:height</span> <span class="dv">400</span> <span class="at">:quality</span> <span class="dv">50</span>))</span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a>  (kind/hiccup [<span class="at">:image</span> {<span class="at">:src</span> <span class="kw">path</span>}]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<img src="notebooks/generated-images/histogram.jpg">
<div class="sourceClojure">
<div class="sourceCode" id="cb132"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>(plot-&gt;buffered-image (<span class="kw">fn</span> [] (hist [<span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span>])) <span class="at">:width</span> <span class="dv">222</span> <span class="at">:height</span> <span class="dv">149</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-image">
<img src="clojisr.v1.tutorials.main_files/0.png">
</div>
</section>
<section id="intermediary-representation-as-java-objects." class="level2">
<h2 class="anchored" data-anchor-id="intermediary-representation-as-java-objects.">Intermediary representation as Java objects.</h2>
<p>Clojisr relies on the fact of an intemediary representation of java, as Java objects. This is usually hidden from the user, but may be useful sometimes. In the current implementation, this is based on <a href="https://github.com/s-u/REngine">REngine</a>.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb133"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">import</span> (org.rosuda.REngine REXP REXPInteger REXPDouble))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb134"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>org.rosuda.REngine.REXPDouble</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can convert data between R and Java.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb135"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1:9"</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb136"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>org.rosuda.REngine.REXPInteger</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb137"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (REXPInteger. <span class="dv">1</span>)</span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>    java-&gt;r</span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb138"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can further convert data from the java representation to Clojure.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb139"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1:9"</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb140"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On the opposite direction, we can also convert Clojure data into the Java represenattion.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb141"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (<span class="kw">range</span> <span class="dv">1</span> <span class="dv">10</span>)</span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>    clj-&gt;java</span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb142"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>org.rosuda.REngine.REXPInteger</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb143"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (<span class="kw">range</span> <span class="dv">1</span> <span class="dv">10</span>)</span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>    clj-&gt;java</span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb144"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There is an alternative way of conversion from Java to Clojure, naively converting the internal Java representation to a Clojure data structure. It can be handy when one wants to have plain access to all the metadata (R attributes), etc.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb145"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> <span class="st">"1:9"</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>     r</span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>     r-&gt;java</span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true" tabindex="-1"></a>     java-&gt;native-clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb146"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb147"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> <span class="st">"data.frame(x=1:3,y=factor('a','a','b'))"</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>     r</span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>     r-&gt;java</span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a>     java-&gt;native-clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb148"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:x</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="at">:y</span> [<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can evaluate R code and immediately return the result as a java object, without ever creating a handle to an R object holding the result:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb149"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1+2"</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>    eval-r-&gt;java</span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb150"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>org.rosuda.REngine.REXPDouble</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb151"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1+2"</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>    eval-r-&gt;java</span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>    (.asDoubles)</span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">vec</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb152"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">3.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="more-data-conversion-examples" class="level2">
<h2 class="anchored" data-anchor-id="more-data-conversion-examples">More data conversion examples</h2>
<p>Convertion between R and Clojure always passes through Java. To stress this, we write it explicitly in the following examples.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb153"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"list(a=1:2,b='hi!')"</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb154"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>], <span class="at">:b</span> [<span class="st">"hi!"</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Partially named lists are also supported</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb155"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"list(a=1:2,'hi!')"</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb156"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>], <span class="dv">1</span> [<span class="st">"hi!"</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb157"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"table(c('a','b','a','b','a','b','a','b'), c(1,1,2,2,3,3,1,1))"</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj</span>
<span id="cb157-5"><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a>    dataset/mapseq-reader</span>
<span id="cb157-6"><a href="#cb157-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb158"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>#{{<span class="dv">0</span> <span class="st">"a"</span>, <span class="dv">1</span> <span class="st">"2"</span>, :$value <span class="dv">2</span>}</span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"b"</span>, <span class="dv">1</span> <span class="st">"3"</span>, :$value <span class="dv">1</span>}</span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"a"</span>, <span class="dv">1</span> <span class="st">"1"</span>, :$value <span class="dv">2</span>}</span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"a"</span>, <span class="dv">1</span> <span class="st">"3"</span>, :$value <span class="dv">1</span>}</span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"b"</span>, <span class="dv">1</span> <span class="st">"2"</span>, :$value <span class="dv">1</span>}</span>
<span id="cb158-6"><a href="#cb158-6" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"b"</span>, <span class="dv">1</span> <span class="st">"1"</span>, :$value <span class="dv">1</span>}}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb159"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> {<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>] <span class="at">:b</span> <span class="st">"hi!"</span>}</span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>    clj-&gt;java</span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a>    java-&gt;r</span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb159-5"><a href="#cb159-5" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb160"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>], <span class="at">:b</span> [<span class="st">"hi!"</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb161"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> {<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>] <span class="at">:b</span> <span class="st">"hi!"</span>}</span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>     clj-&gt;java</span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>     java-&gt;r</span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a>     ((r <span class="st">"deparse"</span>))</span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a>     r-&gt;java</span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a>     java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb162"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>[<span class="st">"list(a = 1:2, b = </span><span class="sc">\"</span><span class="st">hi!</span><span class="sc">\"</span><span class="st">)"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="basic-types-convertion-clj-r-clj" class="level3">
<h3 class="anchored" data-anchor-id="basic-types-convertion-clj-r-clj">Basic types convertion clj-&gt;r-&gt;clj</h3>
<div class="sourceClojure">
<div class="sourceCode" id="cb163"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> clj-&gt;r-&gt;clj </span>(<span class="kw">comp</span> r-&gt;clj r))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb164"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj <span class="va">nil</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb165"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb166"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj [<span class="dv">10</span> <span class="dv">11</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb167"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">10</span> <span class="dv">11</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb168"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj [<span class="fl">10.0</span> <span class="fl">11.0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb169"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">10.0</span> <span class="fl">11.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb170"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj (<span class="kw">list</span> <span class="fl">10.0</span> <span class="fl">11.0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb171"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">10.0</span> <span class="fl">11.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb172"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj {<span class="at">:a</span> <span class="dv">1</span> <span class="at">:b</span> <span class="dv">2</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb173"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span>], <span class="at">:b</span> [<span class="dv">2</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="various-r-objects" class="level3">
<h3 class="anchored" data-anchor-id="various-r-objects">Various R objects</h3>
<p>Named list</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb174"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"list(a=1L,b=c(10,20),c='hi!')"</span></span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb175"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span>], <span class="at">:b</span> [<span class="fl">10.0</span> <span class="fl">20.0</span>], <span class="at">:c</span> [<span class="st">"hi!"</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Array of doubles</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb176"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"c(10,20,30)"</span></span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb177"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">10.0</span> <span class="fl">20.0</span> <span class="fl">30.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Array of longs</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb178"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"c(10L,20L,30L)"</span></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb179"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">10</span> <span class="dv">20</span> <span class="dv">30</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Timeseries</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb180"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="at">'euro</span></span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj</span>
<span id="cb180-4"><a href="#cb180-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">first</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb181"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fl">13.7603</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Pairlist</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb182"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> r.stats/dnorm</span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a>    r.base/formals</span>
<span id="cb182-3"><a href="#cb182-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj</span>
<span id="cb182-4"><a href="#cb182-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">keys</span></span>
<span id="cb182-5"><a href="#cb182-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">sort</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb183"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">:log</span> <span class="at">:mean</span> <span class="at">:sd</span> <span class="at">:x</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>NULL</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb184"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"NULL"</span></span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb185"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>TRUE/FALSE</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb186"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"TRUE"</span></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb187"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a>[<span class="va">true</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="inspecting-r-functions" class="level2">
<h2 class="anchored" data-anchor-id="inspecting-r-functions">Inspecting R functions</h2>
<p>The <code>mean</code> function is defined to expect arguments <code>x</code> and <code>...</code>. These arguments have no default values (thus, its formals have empty symbols as values):</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb188"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="at">'mean</span></span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a>    r.base/formals</span>
<span id="cb188-3"><a href="#cb188-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb189"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:x</span> , <span class="at">:...</span> }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It is an <a href="http://adv-r.had.co.nz/S3.html">S3 generic function</a> function, which we can realize by printing it:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb190"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>(r <span class="at">'mean</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb191"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>function (x, ...) </span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a>UseMethod(<span class="st">"mean"</span>)</span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a>&lt;bytecode: <span class="bn">0x558bc78c27a0</span>&gt;</span>
<span id="cb191-4"><a href="#cb191-4" aria-hidden="true" tabindex="-1"></a>&lt;environment: namespace<span class="at">:base</span>&gt;</span>
<span id="cb191-5"><a href="#cb191-5" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>So, we can expect possibly more details when inspecting its default implementation. Now, we see some arguments that do have default values.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb192"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="at">'mean.default</span></span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a>    r.base/formals</span>
<span id="cb192-3"><a href="#cb192-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb193"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:x</span> , <span class="at">:trim</span> [<span class="fl">0.0</span>], <span class="at">:na.rm</span> [<span class="va">false</span>], <span class="at">:...</span> }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="r-function-arglists" class="level2">
<h2 class="anchored" data-anchor-id="r-function-arglists">R-function-arglists</h2>
<p>As we saw earlier, R functions are Clojure functions. The arglists of functions brought up by <code>require-r</code> match the expected arguments. Here are some examples:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb194"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>(require-r</span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a> '[base]</span>
<span id="cb194-3"><a href="#cb194-3" aria-hidden="true" tabindex="-1"></a> '[stats]</span>
<span id="cb194-4"><a href="#cb194-4" aria-hidden="true" tabindex="-1"></a> '[grDevices])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb195"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb196"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> [<span class="va">#'r.base/mean,</span> <span class="va">#'r.base/mean-default,</span> <span class="va">#'r.stats/arima0,</span></span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a>      <span class="va">#'r.grDevices/dev-off,</span> <span class="va">#'r.base/Sys-info,</span> <span class="va">#'r.base/summary-default</span></span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a>      <span class="co">;; Primitive functions:</span></span>
<span id="cb196-4"><a href="#cb196-4" aria-hidden="true" tabindex="-1"></a>      <span class="va">#'r.base/sin,</span> <span class="va">#'r.base/sum</span>]</span>
<span id="cb196-5"><a href="#cb196-5" aria-hidden="true" tabindex="-1"></a>     (<span class="kw">map</span> (<span class="kw">fn</span> [f]</span>
<span id="cb196-6"><a href="#cb196-6" aria-hidden="true" tabindex="-1"></a>            (<span class="kw">-&gt;</span> f</span>
<span id="cb196-7"><a href="#cb196-7" aria-hidden="true" tabindex="-1"></a>                <span class="kw">meta</span></span>
<span id="cb196-8"><a href="#cb196-8" aria-hidden="true" tabindex="-1"></a>                (<span class="kw">update</span> <span class="at">:ns</span> (<span class="kw">comp</span> <span class="kw">symbol</span> <span class="kw">str</span>))))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb197"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a>({<span class="at">:arglists</span> ([x &amp; {<span class="at">:keys</span> [...]}]), <span class="at">:name</span> mean, <span class="at">:ns</span> r.base}</span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([x &amp; {<span class="at">:keys</span> [trim na.rm ...]}]),</span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">:name</span> mean-default,</span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">:ns</span> r.base}</span>
<span id="cb197-5"><a href="#cb197-5" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span></span>
<span id="cb197-6"><a href="#cb197-6" aria-hidden="true" tabindex="-1"></a>  ([x</span>
<span id="cb197-7"><a href="#cb197-7" aria-hidden="true" tabindex="-1"></a>    &amp;</span>
<span id="cb197-8"><a href="#cb197-8" aria-hidden="true" tabindex="-1"></a>    {<span class="at">:keys</span></span>
<span id="cb197-9"><a href="#cb197-9" aria-hidden="true" tabindex="-1"></a>     [order</span>
<span id="cb197-10"><a href="#cb197-10" aria-hidden="true" tabindex="-1"></a>      seasonal</span>
<span id="cb197-11"><a href="#cb197-11" aria-hidden="true" tabindex="-1"></a>      xreg</span>
<span id="cb197-12"><a href="#cb197-12" aria-hidden="true" tabindex="-1"></a>      include.mean</span>
<span id="cb197-13"><a href="#cb197-13" aria-hidden="true" tabindex="-1"></a>      delta</span>
<span id="cb197-14"><a href="#cb197-14" aria-hidden="true" tabindex="-1"></a>      transform.pars</span>
<span id="cb197-15"><a href="#cb197-15" aria-hidden="true" tabindex="-1"></a>      fixed</span>
<span id="cb197-16"><a href="#cb197-16" aria-hidden="true" tabindex="-1"></a>      init</span>
<span id="cb197-17"><a href="#cb197-17" aria-hidden="true" tabindex="-1"></a>      method</span>
<span id="cb197-18"><a href="#cb197-18" aria-hidden="true" tabindex="-1"></a>      n.<span class="kw">cond</span></span>
<span id="cb197-19"><a href="#cb197-19" aria-hidden="true" tabindex="-1"></a>      optim.control]}]),</span>
<span id="cb197-20"><a href="#cb197-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">:name</span> arima0,</span>
<span id="cb197-21"><a href="#cb197-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">:ns</span> r.stats}</span>
<span id="cb197-22"><a href="#cb197-22" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([&amp; {<span class="at">:keys</span> [which]}]), <span class="at">:name</span> dev-off, <span class="at">:ns</span> r.grDevices}</span>
<span id="cb197-23"><a href="#cb197-23" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([]), <span class="at">:name</span> Sys-info, <span class="at">:ns</span> r.base}</span>
<span id="cb197-24"><a href="#cb197-24" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([object &amp; {<span class="at">:keys</span> [... digits quantile.<span class="kw">type</span>]}]),</span>
<span id="cb197-25"><a href="#cb197-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">:name</span> summary-default,</span>
<span id="cb197-26"><a href="#cb197-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">:ns</span> r.base}</span>
<span id="cb197-27"><a href="#cb197-27" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([x]), <span class="at">:name</span> sin, <span class="at">:ns</span> r.base}</span>
<span id="cb197-28"><a href="#cb197-28" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([&amp; {<span class="at">:keys</span> [... na.rm]}]), <span class="at">:name</span> sum, <span class="at">:ns</span> r.base})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="background-color:grey;height:2px;width:100%;"></div>
<div><pre><small><small>source: <a href="https://github.com/scicloj/clojisr/blob/master/notebooks/clojisr/v1/tutorials/main.clj">notebooks/clojisr/v1/tutorials/main.clj</a></small></small></pre></div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>