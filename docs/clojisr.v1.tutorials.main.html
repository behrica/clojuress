<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.10">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>clojisr.v1.tutorials.main</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="clojisr.v1.tutorials.main_files/libs/clipboard/clipboard.min.js"></script>
<script src="clojisr.v1.tutorials.main_files/libs/quarto-html/quarto.js"></script>
<script src="clojisr.v1.tutorials.main_files/libs/quarto-html/popper.min.js"></script>
<script src="clojisr.v1.tutorials.main_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="clojisr.v1.tutorials.main_files/libs/quarto-html/anchor.min.js"></script>
<link href="clojisr.v1.tutorials.main_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="clojisr.v1.tutorials.main_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="clojisr.v1.tutorials.main_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="clojisr.v1.tutorials.main_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="clojisr.v1.tutorials.main_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link rel="icon" href="data:,">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#clojisr-tutorial" id="toc-clojisr-tutorial" class="nav-link active" data-scroll-target="#clojisr-tutorial">Clojisr tutorial</a>
  <ul>
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup">Setup</a></li>
  <li><a href="#basic-examples" id="toc-basic-examples" class="nav-link" data-scroll-target="#basic-examples">Basic examples</a></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions">Functions</a></li>
  <li><a href="#r-dataframes-and-tech.ml.dataset-datasets" id="toc-r-dataframes-and-tech.ml.dataset-datasets" class="nav-link" data-scroll-target="#r-dataframes-and-tech.ml.dataset-datasets">R dataframes and tech.ml.dataset datasets</a></li>
  <li><a href="#r-objects" id="toc-r-objects" class="nav-link" data-scroll-target="#r-objects">R objects</a></li>
  <li><a href="#generating-code" id="toc-generating-code" class="nav-link" data-scroll-target="#generating-code">Generating code</a></li>
  <li><a href="#running-generated-code" id="toc-running-generated-code" class="nav-link" data-scroll-target="#running-generated-code">Running generated code</a></li>
  <li><a href="#requiring-r-packages" id="toc-requiring-r-packages" class="nav-link" data-scroll-target="#requiring-r-packages">Requiring R packages</a></li>
  <li><a href="#data-visualization" id="toc-data-visualization" class="nav-link" data-scroll-target="#data-visualization">Data visualization</a></li>
  <li><a href="#intermediary-representation-as-java-objects." id="toc-intermediary-representation-as-java-objects." class="nav-link" data-scroll-target="#intermediary-representation-as-java-objects.">Intermediary representation as Java objects.</a></li>
  <li><a href="#more-data-conversion-examples" id="toc-more-data-conversion-examples" class="nav-link" data-scroll-target="#more-data-conversion-examples">More data conversion examples</a>
  <ul class="collapse">
  <li><a href="#basic-types-convertion-clj-r-clj" id="toc-basic-types-convertion-clj-r-clj" class="nav-link" data-scroll-target="#basic-types-convertion-clj-r-clj">Basic types convertion clj-&gt;r-&gt;clj</a></li>
  <li><a href="#various-r-objects" id="toc-various-r-objects" class="nav-link" data-scroll-target="#various-r-objects">Various R objects</a></li>
  </ul></li>
  <li><a href="#inspecting-r-functions" id="toc-inspecting-r-functions" class="nav-link" data-scroll-target="#inspecting-r-functions">Inspecting R functions</a></li>
  <li><a href="#r-function-arglists" id="toc-r-function-arglists" class="nav-link" data-scroll-target="#r-function-arglists">R-function-arglists</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">




<style></style>
<style>.printedClojure .sourceCode {
  background-color: transparent;
  border-style: none;
}
</style>
<style>.clay-limit-image-width .clay-image {max-width: 100%}
</style>
<script src="clojisr.v1.tutorials.main_files/md-default1.js" type="text/javascript"></script>
<script src="clojisr.v1.tutorials.main_files/md-default2.js" type="text/javascript"></script>
<section id="clojisr-tutorial" class="level1">
<h1>Clojisr tutorial</h1>
<section id="setup" class="level2">
<h2 class="anchored" data-anchor-id="setup">Setup</h2>
<div class="sourceClojure">
<div class="sourceCode" id="cb1"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">ns</span> clojisr.v1.tutorials.<span class="kw">main</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  (<span class="at">:require</span> [clojisr.v1.r <span class="at">:as</span> r <span class="at">:refer</span> [r eval-r-&gt;java r-&gt;java java-&gt;r java-&gt;clj java-&gt;native-clj clj-&gt;java r-&gt;clj clj-&gt;r -&gt;code r+ colon require-r]]</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>            [clojisr.v1.robject <span class="at">:as</span> robject]</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>            [clojisr.v1.session <span class="at">:as</span> session]</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>            [tech.v3.dataset <span class="at">:as</span> dataset]</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>            [scicloj.kindly.v4.kind <span class="at">:as</span> kind]</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>            [scicloj.kindly.v4.api <span class="at">:as</span> kindly]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="basic-examples" class="level2">
<h2 class="anchored" data-anchor-id="basic-examples">Basic examples</h2>
<p>Let us start by some basic usage examples of Clojisr.</p>
<p>First, let us make sure that we use the Rserve backend (in case we were using another engine instead earlier), and that there are no R sessions currently running. This is typically not needed if you just started working. Here, we do it just in case.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb2"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>(r/set-default-session-type! <span class="at">:rserve</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb3"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:session-type</span> <span class="at">:rserve</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb4"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>(r/discard-all-sessions)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb5"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>{}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now let us run some R code, and keep a Clojure handle to the return value.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb6"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> x </span>(r <span class="st">"1+2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The thing we created is something called an ROBject.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb7"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">class</span> x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb8"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>clojisr.v1.robject.RObject</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If we wish, we can convert an ROBject to Clojure:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb9"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>(r-&gt;clj x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb10"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">3.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us see more examples of creating ROBjects and converting them to Clojure:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb11"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> <span class="st">"list(A=1,B=2,'#123strange&lt;text&gt; ()'=3)"</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>     r</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>     r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb12"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:A</span> [<span class="fl">1.0</span>], <span class="at">:B</span> [<span class="fl">2.0</span>], <span class="st">"#123strange&lt;text&gt; ()"</span> [<span class="fl">3.0</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the other direction, we can convert Clojure data to R data. Note that <code>nil</code> is turned to <code>NA</code>.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb13"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> [<span class="dv">1</span> <span class="va">nil</span> <span class="dv">3</span>]</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    clj-&gt;r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb14"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">1</span> NA  <span class="dv">3</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can run code on a separate R session (specify session-args which are different than the default ones).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb15"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1+2"</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    (r <span class="at">:session-args</span> {<span class="at">:session-name</span> <span class="st">"mysession"</span>})</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb16"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">3.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="functions" class="level2">
<h2 class="anchored" data-anchor-id="functions">Functions</h2>
<p>An R function is also a Clojure function.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb17"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> f </span>(r <span class="st">"function(x) x*10"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us apply it to Clojure data (implicitly converting that data to R).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb18"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="dv">5</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb19"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">50.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can also apply it to R data.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb20"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"5*5"</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb21"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">250.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Functions can get named arguments. Here we pass the <code>na.rm</code> argument, that tells R whether to remove missing values whenn computing the mean.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb22"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>(r-&gt;clj ((r <span class="st">"mean"</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>         [<span class="dv">1</span> <span class="va">nil</span> <span class="dv">3</span>]</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">:na.rm</span> <span class="va">true</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb23"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">2.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Another example:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb24"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [f (r <span class="st">"function(w,x,y=10,z=20) w+x+y+z"</span>)]</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;&gt;</span> [(f <span class="dv">1</span> <span class="dv">2</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>        (f <span class="dv">1</span> <span class="dv">2</span> <span class="at">:y</span> <span class="dv">100</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>        (f <span class="dv">1</span> <span class="dv">2</span> <span class="at">:z</span> <span class="dv">100</span>)]</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>       (<span class="kw">map</span> r-&gt;clj)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb25"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>([<span class="fl">33.0</span>] [<span class="fl">123.0</span>] [<span class="fl">113.0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Some functions are already created in Clojisr and given special names for convenience. Here are some examples:</p>
<p>R addition:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb26"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> (r+ <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>     r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb27"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">6</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>R colon (<code>:</code>), for creating a range of integers, like <code>0:9</code>:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb28"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>(r-&gt;clj (colon <span class="dv">0</span> <span class="dv">9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb29"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="r-dataframes-and-tech.ml.dataset-datasets" class="level2">
<h2 class="anchored" data-anchor-id="r-dataframes-and-tech.ml.dataset-datasets">R dataframes and tech.ml.dataset datasets</h2>
<p>At Clojure, we have a structure that is equivalent to R dataframes: a <a href="https://github.com/techascent/tech.ml.dataset">tech.ml.dataset</a> dataset.</p>
<p>Let us create such a dataset, pass it to an R function to compute the row means, and then convert the return value back to Clojure.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb30"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [row-means (r <span class="st">"function(data) rowMeans(data)"</span>)]</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> {<span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]}</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>      dataset/-&gt;dataset</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>      row-means</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>      r-&gt;clj))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb31"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">2.5</span> <span class="fl">3.5</span> <span class="fl">4.5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us see some more dataset proccessing through R.</p>
<p>Loading the R package <a href="https://dplyr.tidyverse.org/">dplyr</a> (assuming it is installed).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb32"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>(r <span class="st">"library(dplyr)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb33"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"dplyr"</span>     <span class="st">"Rserve"</span>    <span class="st">"stats"</span>     <span class="st">"graphics"</span>  <span class="st">"grDevices"</span> <span class="st">"utils"</span>    </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">7</span>] <span class="st">"datasets"</span>  <span class="st">"methods"</span>   <span class="st">"base"</span>     </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Using dplyr to process some Clojure dataset, and convert back to the resulting dataset.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb34"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [filter-by-x  (r <span class="st">"function(data) filter(data, x&gt;=2)"</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>      add-z-column (r <span class="st">"function(data) mutate(data, z=x+y)"</span>)]</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> {<span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]}</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>      dataset/-&gt;dataset</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>      filter-by-x</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>      add-z-column</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>      r-&gt;clj))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>_unnamed [2 3]:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">:x</th>
<th style="text-align: right;">:y</th>
<th style="text-align: right;">:z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">9</td>
</tr>
</tbody>
</table>
</div>
<p><a href="https://tibble.tidyverse.org">Tibbles</a>, which are a more recent R dataframe notion, are also supported, as a special case of data frames.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb35"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>(r <span class="st">"library(tibble)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb36"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">"tibble"</span>    <span class="st">"dplyr"</span>     <span class="st">"Rserve"</span>    <span class="st">"stats"</span>     <span class="st">"graphics"</span>  <span class="st">"grDevices"</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] <span class="st">"utils"</span>     <span class="st">"datasets"</span>  <span class="st">"methods"</span>   <span class="st">"base"</span>     </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb37"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [tibble (r <span class="st">"tibble"</span>)]</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  (tibble</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>   <span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>   <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb38"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a># A tibble: <span class="dv">3</span> × <span class="dv">2</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>      x     y</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  &lt;int&gt; &lt;int&gt;</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">4</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">2</span>     <span class="dv">5</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">3</span>     <span class="dv">6</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb39"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [tibble (r <span class="st">"tibble"</span>)]</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> (tibble</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>])</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>      r-&gt;clj</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>      dataset/mapseq-reader))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb40"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>[{<span class="at">:x</span> <span class="dv">1</span>, <span class="at">:y</span> <span class="dv">4</span>} {<span class="at">:x</span> <span class="dv">2</span>, <span class="at">:y</span> <span class="dv">5</span>} {<span class="at">:x</span> <span class="dv">3</span>, <span class="at">:y</span> <span class="dv">6</span>}]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="r-objects" class="level2">
<h2 class="anchored" data-anchor-id="r-objects">R objects</h2>
<p>Clojisr holds handles to R objects, that are stored in memory at the R session, where they are assigned random names.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb41"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> one+two </span>(r <span class="st">"1+2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb42"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">class</span> one+two)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb43"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>clojisr.v1.robject.RObject</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The name of an object is the place where it is held at R (inside an R <a href="http://adv-r.had.co.nz/Environments.html">evnironment</a> called <code>.MEM</code>).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb44"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">:object-name</span> one+two)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb45"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x72da67694647444d"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="generating-code" class="level2">
<h2 class="anchored" data-anchor-id="generating-code">Generating code</h2>
<p>Let us see the mechanism by which clojisr generates R code, and the rules defining it.</p>
<p>Since we are playing a bit with the internals here, we will need a reference to the R session:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb46"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> session</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  (session/fetch-or-make <span class="va">nil</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For the following examples, we will use some <strong>dummy</strong> handles to R objects with given names:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb47"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> x </span>(robject/-&gt;RObject <span class="st">"robject_x"</span> session <span class="va">nil</span> <span class="va">nil</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb48"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> y </span>(robject/-&gt;RObject <span class="st">"robject_y"</span> session <span class="va">nil</span> <span class="va">nil</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>.. and some <strong>real</strong> handles to R objects:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb49"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> minus-eleven </span>(r <span class="st">"-11"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb50"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> abs </span>(r <span class="st">"abs"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The function <code>-&gt;code</code> generates R code according to a certain set of rules. Here we describe some of these rules briefly. We also wrote a dedicated tutorial about the rule set more thoroughly.</p>
<p>For an ROBject, the generated code is just the ROBject name.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb51"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb52"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="st">"robject_x"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a clojure value, we use some form analysis and generate proper R string or values.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb53"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code <span class="st">"hello"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb54"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="st">"</span><span class="sc">\"</span><span class="st">hello</span><span class="sc">\"</span><span class="st">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb55"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb56"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="st">"c(1L,2L,3L)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a symbol, we generate the code with the corresponding R symbol.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb57"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code <span class="at">'x</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb58"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="st">"x"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A sequential structure (list, vector, etc.) can be interpreted as a compound expression, for which code generation is defined accorting to the first list element.</p>
<p>For a list beginning with the symbol <code>'function</code>, we generate an R function definition.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb59"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb60"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {x}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a vector instead of list, we create R vector.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb61"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '[function [x y] x])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb62"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="st">"c(function,c(x,y),x)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a list beginning with the symbol <code>'formula</code>, we generate an R <code>~</code>-formula.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb63"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(formula x y))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb64"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="st">"(x~y)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a list beginning with a symbol known to be a binary operator, we generate nested calls.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb65"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(<span class="kw">+</span> x y z))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb66"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="st">"((x+y)+z)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a list beginning with another symbol, we generate a function call with that symbol as the function name.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb67"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(f x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb68"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="st">"f(x)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a list beginning with an R object that is a function, we generate a function call with that object as the function. If you create the list using the quote sign (<code>'</code>), don’t forget to unquote symbols refering to things you defined on the Clojure side.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb69"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(<span class="at">~abs</span> x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb70"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x997ebe660ed14109(x)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>All other sequential things (that is, those not beginning with a symbol or R function) are intepreted as data, converted implicitly R data representation.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb71"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code `(<span class="at">~abs</span> (<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb72"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x997ebe660ed14109(c(1L,2L,3L))"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Some more examples, showing how these rules compose:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb73"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (f y)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb74"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {f(y)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb75"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (f <span class="at">~y</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb76"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {f(robject_y)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb77"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (<span class="kw">+</span> x y)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb78"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {(x+y)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb79"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code (<span class="kw">list</span> <span class="at">'function</span> '[x y] (<span class="kw">list</span> <span class="at">'+</span> <span class="at">'x</span> <span class="at">'y</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb80"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {(x+y)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb81"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (<span class="kw">print</span> x) (f x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb82"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {print(x);f(x)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb83"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(function [x y] (<span class="at">~abs</span> x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb84"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="st">"function(x,y) {.MEM$x997ebe660ed14109(x)}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb85"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(<span class="at">~abs</span> <span class="at">~minus-eleven</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb86"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x997ebe660ed14109(.MEM$x7fce8a014ee147df)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb87"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>(-&gt;code '(<span class="at">~abs</span> -<span class="dv">11</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb88"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x997ebe660ed14109(-11L)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Use syntax quote ` in case you want to use local bindings.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb89"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [minus-ten -<span class="dv">10</span>]</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  (-&gt;code `(<span class="at">~abs</span> <span class="at">~minus-ten</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb90"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="st">".MEM$x997ebe660ed14109(-10L)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="running-generated-code" class="level2">
<h2 class="anchored" data-anchor-id="running-generated-code">Running generated code</h2>
<p>Clojure forms can be run as R code. Behind the scences, they are turned to R code using the <code>-&gt;code</code> function described above. For example:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb91"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> '(<span class="at">~abs</span> ~(<span class="kw">range</span> -<span class="dv">3</span> <span class="dv">0</span>))</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb92"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span> <span class="dv">2</span> <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Or, equivalently:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb93"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> '(<span class="at">~abs</span> ~(<span class="kw">range</span> -<span class="dv">3</span> <span class="dv">0</span>))</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>    -&gt;code</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb94"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span> <span class="dv">2</span> <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us repeat the basic examples from the beginning of this tutorial, this time generating code rather than writing it as Strings.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb95"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> x </span>(r '(<span class="kw">+</span> <span class="dv">1</span> <span class="dv">2</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb96"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>(r-&gt;clj x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb97"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb98"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> f </span>(r '(function [x] (<span class="kw">*</span> x <span class="dv">10</span>))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb99"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="dv">5</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb100"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">50</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb101"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"5*5"</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>    f</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb102"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">250.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb103"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [row-means (r '(function [data] (rowMeans data)))]</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> {<span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]}</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>      dataset/-&gt;dataset</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>      row-means</span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>      r-&gt;clj))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb104"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">2.5</span> <span class="fl">3.5</span> <span class="fl">4.5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb105"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>(r '(library dplyr))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb106"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">"tibble"</span>    <span class="st">"dplyr"</span>     <span class="st">"Rserve"</span>    <span class="st">"stats"</span>     <span class="st">"graphics"</span>  <span class="st">"grDevices"</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] <span class="st">"utils"</span>     <span class="st">"datasets"</span>  <span class="st">"methods"</span>   <span class="st">"base"</span>     </span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb107"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [filter-by-x  (r '(function [data] (<span class="kw">filter</span> data (<span class="kw">&gt;=</span> x <span class="dv">2</span>))))</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>      add-z-column (r '(function [data] (mutate data (<span class="kw">=</span> z (<span class="kw">+</span> x y)))))]</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;&gt;</span> {<span class="at">:x</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">:y</span> [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]}</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>       dataset/-&gt;dataset</span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>       filter-by-x</span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>       add-z-column</span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>       r-&gt;clj))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>_unnamed [2 3]:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">:x</th>
<th style="text-align: right;">:y</th>
<th style="text-align: right;">:z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">9</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="requiring-r-packages" class="level2">
<h2 class="anchored" data-anchor-id="requiring-r-packages">Requiring R packages</h2>
<p>Sometimes, we want to bring to the Clojure world functions and data from R packages. Here, we try to follow the <a href="https://github.com/cnuernber/libpython-clj/blob/master/test/libpython_clj/require_python_test.clj">require-python</a> syntax of <a href="https://github.com/cnuernber/libpython-clj">libpython-clj</a> (though currently in a less sophisticated way.)</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb108"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>(require-r '[stats <span class="at">:as</span> statz <span class="at">:refer</span> [median]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb109"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb110"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>    r.stats/median</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj</span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb111"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb112"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>    statz/median</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb113"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb114"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>    median</span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb115"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb116"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>(require-r '[datasets <span class="at">:as</span> datasetz <span class="at">:refer</span> [euro]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb117"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb118"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>[r.datasets/euro</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a> datasetz/euro</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a> euro]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb119"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>[        ATS         BEF         DEM         ESP         FIM         FRF </span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="fl">13.760300</span>   <span class="fl">40.339900</span>    <span class="fl">1.955830</span>  <span class="fl">166.386000</span>    <span class="fl">5.945730</span>    <span class="fl">6.559570</span> </span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>        IEP         ITL         LUF         NLG         PTE </span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>   <span class="fl">0.787564</span> <span class="fl">1936.270000</span>   <span class="fl">40.339900</span>    <span class="fl">2.203710</span>  <span class="fl">200.482000</span> </span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>         ATS         BEF         DEM         ESP         FIM         FRF </span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a>  <span class="fl">13.760300</span>   <span class="fl">40.339900</span>    <span class="fl">1.955830</span>  <span class="fl">166.386000</span>    <span class="fl">5.945730</span>    <span class="fl">6.559570</span> </span>
<span id="cb119-8"><a href="#cb119-8" aria-hidden="true" tabindex="-1"></a>        IEP         ITL         LUF         NLG         PTE </span>
<span id="cb119-9"><a href="#cb119-9" aria-hidden="true" tabindex="-1"></a>   <span class="fl">0.787564</span> <span class="fl">1936.270000</span>   <span class="fl">40.339900</span>    <span class="fl">2.203710</span>  <span class="fl">200.482000</span> </span>
<span id="cb119-10"><a href="#cb119-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-11"><a href="#cb119-11" aria-hidden="true" tabindex="-1"></a>         ATS         BEF         DEM         ESP         FIM         FRF </span>
<span id="cb119-12"><a href="#cb119-12" aria-hidden="true" tabindex="-1"></a>  <span class="fl">13.760300</span>   <span class="fl">40.339900</span>    <span class="fl">1.955830</span>  <span class="fl">166.386000</span>    <span class="fl">5.945730</span>    <span class="fl">6.559570</span> </span>
<span id="cb119-13"><a href="#cb119-13" aria-hidden="true" tabindex="-1"></a>        IEP         ITL         LUF         NLG         PTE </span>
<span id="cb119-14"><a href="#cb119-14" aria-hidden="true" tabindex="-1"></a>   <span class="fl">0.787564</span> <span class="fl">1936.270000</span>   <span class="fl">40.339900</span>    <span class="fl">2.203710</span>  <span class="fl">200.482000</span> </span>
<span id="cb119-15"><a href="#cb119-15" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb120"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>(require-r '[base <span class="at">:refer</span> [$]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb121"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb122"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> {<span class="at">:a</span> <span class="dv">1</span> <span class="at">:b</span> <span class="dv">2</span>}</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>    ($ <span class="at">'a</span>)</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb123"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-visualization" class="level2">
<h2 class="anchored" data-anchor-id="data-visualization">Data visualization</h2>
<p>Functions creating R plots or any plotting objects generated by various R libraries can be wrapped in a way that returns an SVG, BufferedImage or can be saved to a file. All of them accept additional parameters specified in <code>grDevices</code> R package.</p>
<p>Currently there is a bug that sometimes causes axes and labels to disappear when rendered inside a larger HTML.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb124"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>(require-r '[graphics <span class="at">:refer</span> [plot hist]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb125"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb126"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>(require-r '[ggplot2 <span class="at">:refer</span> [ggplot aes geom_point xlab ylab labs]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb127"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb128"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">require</span> '[clojisr.v1.applications.plotting <span class="at">:refer</span> [plot-&gt;svg plot-&gt;file plot-&gt;buffered-image]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>First example, simple plotting function as SVG string.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb129"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>(plot-&gt;svg</span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a> (<span class="kw">fn</span> []</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>   (<span class="kw">-&gt;&gt;</span> <span class="kw">rand</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a>        (<span class="kw">repeatedly</span> <span class="dv">30</span>)</span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>        (reductions <span class="kw">+</span>)</span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a>        (plot <span class="at">:xlab</span> <span class="st">"t"</span></span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">:ylab</span> <span class="st">"y"</span></span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">:type</span> <span class="st">"l"</span>))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!--?xml version="1.0" encoding="UTF-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="504pt" height="504pt" viewbox="0 0 504 504" version="1.1">
<defs>
<g>
<symbol overflow="visible" id="glyph0-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph0-1">
<path style="stroke:none;" d="M 3.296875 -8.671875 C 2.515625 -8.671875 1.78125 -8.3125 1.34375 -7.734375 C 0.796875 -6.953125 0.515625 -5.8125 0.515625 -4.203125 C 0.515625 -1.265625 1.46875 0.28125 3.296875 0.28125 C 5.09375 0.28125 6.078125 -1.265625 6.078125 -4.125 C 6.078125 -5.8125 5.8125 -6.9375 5.25 -7.734375 C 4.8125 -8.328125 4.109375 -8.671875 3.296875 -8.671875 Z M 3.296875 -7.734375 C 4.4375 -7.734375 5 -6.578125 5 -4.21875 C 5 -1.75 4.453125 -0.59375 3.28125 -0.59375 C 2.15625 -0.59375 1.59375 -1.796875 1.59375 -4.1875 C 1.59375 -6.578125 2.15625 -7.734375 3.296875 -7.734375 Z M 3.296875 -7.734375 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-2">
<path style="stroke:none;" d="M 5.71875 -8.515625 L 1.3125 -8.515625 L 0.6875 -3.875 L 1.65625 -3.875 C 2.140625 -4.46875 2.5625 -4.671875 3.234375 -4.671875 C 4.375 -4.671875 5.078125 -3.890625 5.078125 -2.625 C 5.078125 -1.40625 4.375 -0.65625 3.21875 -0.65625 C 2.296875 -0.65625 1.734375 -1.125 1.46875 -2.09375 L 0.421875 -2.09375 C 0.5625 -1.390625 0.6875 -1.0625 0.9375 -0.75 C 1.421875 -0.09375 2.28125 0.28125 3.234375 0.28125 C 4.953125 0.28125 6.15625 -0.96875 6.15625 -2.765625 C 6.15625 -4.453125 5.046875 -5.609375 3.40625 -5.609375 C 2.8125 -5.609375 2.328125 -5.453125 1.84375 -5.09375 L 2.171875 -7.46875 L 5.71875 -7.46875 Z M 5.71875 -8.515625 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-3">
<path style="stroke:none;" d="M 3.109375 -6.1875 L 3.109375 0 L 4.15625 0 L 4.15625 -8.671875 L 3.46875 -8.671875 C 3.09375 -7.34375 2.859375 -7.15625 1.21875 -6.953125 L 1.21875 -6.1875 Z M 3.109375 -6.1875 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-4">
<path style="stroke:none;" d="M 6.078125 -1.046875 L 1.59375 -1.046875 C 1.703125 -1.765625 2.09375 -2.21875 3.125 -2.859375 L 4.328125 -3.53125 C 5.515625 -4.1875 6.125 -5.078125 6.125 -6.140625 C 6.125 -6.859375 5.84375 -7.53125 5.34375 -8 C 4.84375 -8.453125 4.21875 -8.671875 3.40625 -8.671875 C 2.328125 -8.671875 1.53125 -8.296875 1.0625 -7.546875 C 0.75 -7.09375 0.625 -6.546875 0.59375 -5.671875 L 1.65625 -5.671875 C 1.6875 -6.265625 1.765625 -6.609375 1.90625 -6.90625 C 2.1875 -7.421875 2.734375 -7.75 3.375 -7.75 C 4.328125 -7.75 5.046875 -7.0625 5.046875 -6.125 C 5.046875 -5.421875 4.65625 -4.828125 3.90625 -4.390625 L 2.796875 -3.75 C 1.015625 -2.71875 0.5 -1.90625 0.40625 -0.015625 L 6.078125 -0.015625 Z M 6.078125 -1.046875 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-5">
<path style="stroke:none;" d="M 2.65625 -4 L 3.234375 -4 C 4.375 -4 4.984375 -3.453125 4.984375 -2.40625 C 4.984375 -1.3125 4.328125 -0.65625 3.234375 -0.65625 C 2.078125 -0.65625 1.515625 -1.25 1.4375 -2.515625 L 0.390625 -2.515625 C 0.4375 -1.828125 0.546875 -1.375 0.75 -0.984375 C 1.203125 -0.140625 2.03125 0.28125 3.1875 0.28125 C 4.9375 0.28125 6.078125 -0.78125 6.078125 -2.421875 C 6.078125 -3.53125 5.65625 -4.125 4.625 -4.484375 C 5.421875 -4.8125 5.8125 -5.40625 5.8125 -6.28125 C 5.8125 -7.78125 4.84375 -8.671875 3.234375 -8.671875 C 1.515625 -8.671875 0.59375 -7.71875 0.5625 -5.875 L 1.625 -5.875 C 1.625 -6.40625 1.6875 -6.703125 1.8125 -6.96875 C 2.046875 -7.46875 2.578125 -7.75 3.234375 -7.75 C 4.171875 -7.75 4.734375 -7.1875 4.734375 -6.25 C 4.734375 -5.640625 4.53125 -5.265625 4.0625 -5.0625 C 3.765625 -4.9375 3.390625 -4.890625 2.65625 -4.890625 Z M 2.65625 -4 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-6">
<path style="stroke:none;" d="M 3.046875 -6.28125 L 2.015625 -6.28125 L 2.015625 -8.015625 L 1.015625 -8.015625 L 1.015625 -6.28125 L 0.171875 -6.28125 L 0.171875 -5.46875 L 1.015625 -5.46875 L 1.015625 -0.71875 C 1.015625 -0.078125 1.453125 0.28125 2.234375 0.28125 C 2.5 0.28125 2.71875 0.25 3.046875 0.1875 L 3.046875 -0.640625 C 2.90625 -0.609375 2.765625 -0.59375 2.5625 -0.59375 C 2.140625 -0.59375 2.015625 -0.71875 2.015625 -1.15625 L 2.015625 -5.46875 L 3.046875 -5.46875 Z M 3.046875 -6.28125 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph1-1">
<path style="stroke:none;" d="M -1.046875 -6.078125 L -1.046875 -1.59375 C -1.765625 -1.703125 -2.21875 -2.09375 -2.859375 -3.125 L -3.53125 -4.328125 C -4.1875 -5.515625 -5.078125 -6.125 -6.140625 -6.125 C -6.859375 -6.125 -7.53125 -5.84375 -8 -5.34375 C -8.453125 -4.84375 -8.671875 -4.21875 -8.671875 -3.40625 C -8.671875 -2.328125 -8.296875 -1.53125 -7.546875 -1.0625 C -7.09375 -0.75 -6.546875 -0.625 -5.671875 -0.59375 L -5.671875 -1.65625 C -6.265625 -1.6875 -6.609375 -1.765625 -6.90625 -1.90625 C -7.421875 -2.1875 -7.75 -2.734375 -7.75 -3.375 C -7.75 -4.328125 -7.0625 -5.046875 -6.125 -5.046875 C -5.421875 -5.046875 -4.828125 -4.65625 -4.390625 -3.90625 L -3.75 -2.796875 C -2.71875 -1.015625 -1.90625 -0.5 -0.015625 -0.40625 L -0.015625 -6.078125 Z M -1.046875 -6.078125 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-2">
<path style="stroke:none;" d="M -2.09375 -3.921875 L 0 -3.921875 L 0 -4.984375 L -2.09375 -4.984375 L -2.09375 -6.234375 L -3.046875 -6.234375 L -3.046875 -4.984375 L -8.671875 -4.984375 L -8.671875 -4.203125 L -3.21875 -0.34375 L -2.09375 -0.34375 Z M -3.046875 -3.921875 L -3.046875 -1.265625 L -6.875 -3.921875 Z M -3.046875 -3.921875 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-3">
<path style="stroke:none;" d="M -6.421875 -5.96875 C -7.84375 -5.765625 -8.671875 -4.859375 -8.671875 -3.5625 C -8.671875 -2.625 -8.21875 -1.78125 -7.4375 -1.28125 C -6.59375 -0.75 -5.53125 -0.515625 -3.953125 -0.515625 C -2.5 -0.515625 -1.578125 -0.71875 -0.796875 -1.234375 C -0.09375 -1.6875 0.28125 -2.4375 0.28125 -3.375 C 0.28125 -4.984375 -0.9375 -6.15625 -2.625 -6.15625 C -4.21875 -6.15625 -5.359375 -5.078125 -5.359375 -3.546875 C -5.359375 -2.71875 -5.046875 -2.046875 -4.40625 -1.59375 C -6.546875 -1.609375 -7.734375 -2.28125 -7.734375 -3.484375 C -7.734375 -4.234375 -7.265625 -4.75 -6.421875 -4.921875 Z M -4.421875 -3.421875 C -4.421875 -4.4375 -3.703125 -5.078125 -2.546875 -5.078125 C -1.453125 -5.078125 -0.65625 -4.359375 -0.65625 -3.390625 C -0.65625 -2.40625 -1.484375 -1.65625 -2.59375 -1.65625 C -3.671875 -1.65625 -4.421875 -2.375 -4.421875 -3.421875 Z M -4.421875 -3.421875 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-4">
<path style="stroke:none;" d="M -4.578125 -4.6875 C -5.109375 -5.578125 -5.546875 -5.859375 -6.359375 -5.859375 C -7.734375 -5.859375 -8.671875 -4.8125 -8.671875 -3.296875 C -8.671875 -1.796875 -7.734375 -0.75 -6.375 -0.75 C -5.546875 -0.75 -5.125 -1.015625 -4.578125 -1.890625 C -4.078125 -0.921875 -3.375 -0.4375 -2.40625 -0.4375 C -0.828125 -0.4375 0.28125 -1.609375 0.28125 -3.296875 C 0.28125 -4.984375 -0.828125 -6.15625 -2.40625 -6.15625 C -3.375 -6.15625 -4.078125 -5.671875 -4.578125 -4.6875 Z M -7.734375 -3.296875 C -7.734375 -4.203125 -7.203125 -4.78125 -6.34375 -4.78125 C -5.515625 -4.78125 -4.984375 -4.1875 -4.984375 -3.296875 C -4.984375 -2.40625 -5.515625 -1.828125 -6.359375 -1.828125 C -7.203125 -1.828125 -7.734375 -2.40625 -7.734375 -3.296875 Z M -4.09375 -3.296875 C -4.09375 -4.359375 -3.390625 -5.078125 -2.390625 -5.078125 C -1.34375 -5.078125 -0.65625 -4.375 -0.65625 -3.28125 C -0.65625 -2.25 -1.375 -1.53125 -2.375 -1.53125 C -3.40625 -1.53125 -4.09375 -2.234375 -4.09375 -3.296875 Z M -4.09375 -3.296875 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-5">
<path style="stroke:none;" d="M -6.1875 -3.109375 L 0 -3.109375 L 0 -4.15625 L -8.671875 -4.15625 L -8.671875 -3.46875 C -7.34375 -3.09375 -7.15625 -2.859375 -6.953125 -1.21875 L -6.1875 -1.21875 Z M -6.1875 -3.109375 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-6">
<path style="stroke:none;" d="M -8.671875 -3.296875 C -8.671875 -2.515625 -8.3125 -1.78125 -7.734375 -1.34375 C -6.953125 -0.796875 -5.8125 -0.515625 -4.203125 -0.515625 C -1.265625 -0.515625 0.28125 -1.46875 0.28125 -3.296875 C 0.28125 -5.09375 -1.265625 -6.078125 -4.125 -6.078125 C -5.8125 -6.078125 -6.9375 -5.8125 -7.734375 -5.25 C -8.328125 -4.8125 -8.671875 -4.109375 -8.671875 -3.296875 Z M -7.734375 -3.296875 C -7.734375 -4.4375 -6.578125 -5 -4.21875 -5 C -1.75 -5 -0.59375 -4.453125 -0.59375 -3.28125 C -0.59375 -2.15625 -1.796875 -1.59375 -4.1875 -1.59375 C -6.578125 -1.59375 -7.734375 -2.15625 -7.734375 -3.296875 Z M -7.734375 -3.296875 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-7">
<path style="stroke:none;" d="M -6.28125 -4.65625 L -1.390625 -2.921875 L -6.28125 -1.3125 L -6.28125 -0.234375 L 0.03125 -2.359375 L 1.015625 -1.984375 C 1.46875 -1.8125 1.625 -1.59375 1.625 -1.171875 C 1.625 -1.015625 1.609375 -0.859375 1.5625 -0.640625 L 2.453125 -0.640625 C 2.5625 -0.859375 2.609375 -1.0625 2.609375 -1.3125 C 2.609375 -1.640625 2.515625 -1.984375 2.3125 -2.25 C 2.09375 -2.5625 1.828125 -2.75 1.3125 -2.9375 L -6.28125 -5.734375 Z M -6.28125 -4.65625 "></path>
</symbol>
</g>
</defs>
<g id="surface1">
<rect x="0" y="0" width="504" height="504" style="fill:rgb(100%,100%,100%);fill-opacity:1;stroke:none;"></rect>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 74.398438 416.800781 L 87.640625 409.40625 L 100.882812 407.183594 L 114.125 388.613281 L 127.367188 369.328125 L 140.605469 345.941406 L 153.847656 324.148438 L 167.089844 313.5625 L 180.332031 294.792969 L 193.574219 284.410156 L 206.8125 283.8125 L 220.054688 264.367188 L 233.296875 256.664062 L 246.539062 248.917969 L 259.78125 244.292969 L 273.019531 241.328125 L 286.261719 235.125 L 299.503906 226.308594 L 312.746094 204.183594 L 325.984375 188.40625 L 339.226562 184.269531 L 352.46875 183.339844 L 365.710938 164.648438 L 378.953125 151.050781 L 392.191406 146.273438 L 405.433594 126.46875 L 418.675781 113.140625 L 431.917969 100.941406 L 445.160156 88.21875 L 458.398438 72.800781 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 61.160156 430.558594 L 458.398438 430.558594 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 61.160156 430.558594 L 61.160156 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 127.367188 430.558594 L 127.367188 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 193.574219 430.558594 L 193.574219 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 259.78125 430.558594 L 259.78125 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 325.984375 430.558594 L 325.984375 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 392.191406 430.558594 L 392.191406 437.761719 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 458.398438 430.558594 L 458.398438 437.761719 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-1" x="57.660156" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-2" x="123.867188" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-3" x="186.574219" y="456.228516"></use>
  <use href="#glyph0-1" x="193.574219" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-3" x="252.78125" y="456.228516"></use>
  <use href="#glyph0-2" x="259.78125" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-4" x="318.984375" y="456.228516"></use>
  <use href="#glyph0-1" x="325.984375" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-4" x="385.191406" y="456.228516"></use>
  <use href="#glyph0-2" x="392.191406" y="456.228516"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-5" x="451.398438" y="456.228516"></use>
  <use href="#glyph0-1" x="458.398438" y="456.228516"></use>
</g>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 387.671875 L 59.039062 100.515625 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 387.671875 L 51.839844 387.671875 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 339.8125 L 51.839844 339.8125 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 291.953125 L 51.839844 291.953125 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 244.09375 L 51.839844 244.09375 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 196.234375 L 51.839844 196.234375 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 148.375 L 51.839844 148.375 "></path>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 100.515625 L 51.839844 100.515625 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-1" x="41.509766" y="391.171875"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-2" x="41.509766" y="343.3125"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-3" x="41.509766" y="295.453125"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-4" x="41.509766" y="247.59375"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-5" x="41.509766" y="203.234375"></use>
  <use href="#glyph1-6" x="41.509766" y="196.234375"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-5" x="41.509766" y="155.375"></use>
  <use href="#glyph1-1" x="41.509766" y="148.375"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-5" x="41.509766" y="107.515625"></use>
  <use href="#glyph1-2" x="41.509766" y="100.515625"></use>
</g>
<path style="fill:none;stroke-width:0.75;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 59.039062 430.558594 L 473.761719 430.558594 L 473.761719 59.039062 L 59.039062 59.039062 Z M 59.039062 430.558594 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-6" x="264.898438" y="485.029297"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-7" x="12.708984" y="247.800781"></use>
</g>
</g>
</svg>

<p>ggplot2 plots (or any other plot objects like lattice) can be also turned into SVG.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb130"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>(plot-&gt;svg</span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a> (<span class="kw">let</span> [x (<span class="kw">repeatedly</span> <span class="dv">99</span> <span class="kw">rand</span>)</span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>       y (<span class="kw">map</span> <span class="kw">+</span></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>              x</span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a>              (<span class="kw">repeatedly</span> <span class="dv">99</span> <span class="kw">rand</span>))]</span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a>   (<span class="kw">-&gt;</span> {<span class="at">:x</span> x <span class="at">:y</span> y}</span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>       dataset/-&gt;dataset</span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a>       (ggplot (aes <span class="at">:x</span> x</span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">:y</span> y</span>
<span id="cb130-10"><a href="#cb130-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">:color</span> '(<span class="kw">+</span> x y)</span>
<span id="cb130-11"><a href="#cb130-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">:size</span> '(<span class="kw">/</span> x y)))</span>
<span id="cb130-12"><a href="#cb130-12" aria-hidden="true" tabindex="-1"></a>       (r+ (geom_point)</span>
<span id="cb130-13"><a href="#cb130-13" aria-hidden="true" tabindex="-1"></a>           (xlab <span class="st">"x"</span>)</span>
<span id="cb130-14"><a href="#cb130-14" aria-hidden="true" tabindex="-1"></a>           (ylab <span class="st">"y"</span>)))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!--?xml version="1.0" encoding="UTF-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="504pt" height="504pt" viewbox="0 0 504 504" version="1.1">
<defs>
<g>
<symbol overflow="visible" id="glyph0-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph0-1">
<path style="stroke:none;" d="M 2.421875 -6.359375 C 1.84375 -6.359375 1.3125 -6.09375 0.984375 -5.671875 C 0.578125 -5.109375 0.375 -4.25 0.375 -3.078125 C 0.375 -0.9375 1.078125 0.203125 2.421875 0.203125 C 3.734375 0.203125 4.453125 -0.9375 4.453125 -3.03125 C 4.453125 -4.25 4.265625 -5.078125 3.859375 -5.671875 C 3.53125 -6.109375 3.015625 -6.359375 2.421875 -6.359375 Z M 2.421875 -5.671875 C 3.25 -5.671875 3.671875 -4.828125 3.671875 -3.09375 C 3.671875 -1.28125 3.265625 -0.4375 2.40625 -0.4375 C 1.578125 -0.4375 1.171875 -1.3125 1.171875 -3.0625 C 1.171875 -4.828125 1.578125 -5.671875 2.421875 -5.671875 Z M 2.421875 -5.671875 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-2">
<path style="stroke:none;" d="M 1.6875 -0.921875 L 0.765625 -0.921875 L 0.765625 0 L 1.6875 0 Z M 1.6875 -0.921875 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-3">
<path style="stroke:none;" d="M 4.1875 -6.234375 L 0.96875 -6.234375 L 0.5 -2.84375 L 1.21875 -2.84375 C 1.578125 -3.265625 1.875 -3.421875 2.359375 -3.421875 C 3.203125 -3.421875 3.71875 -2.84375 3.71875 -1.921875 C 3.71875 -1.03125 3.203125 -0.484375 2.359375 -0.484375 C 1.6875 -0.484375 1.265625 -0.828125 1.078125 -1.53125 L 0.3125 -1.53125 C 0.40625 -1.015625 0.5 -0.78125 0.6875 -0.546875 C 1.03125 -0.078125 1.671875 0.203125 2.375 0.203125 C 3.640625 0.203125 4.515625 -0.71875 4.515625 -2.03125 C 4.515625 -3.265625 3.6875 -4.109375 2.5 -4.109375 C 2.0625 -4.109375 1.703125 -4 1.34375 -3.734375 L 1.59375 -5.46875 L 4.1875 -5.46875 Z M 4.1875 -6.234375 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-4">
<path style="stroke:none;" d="M 2.28125 -4.53125 L 2.28125 0 L 3.046875 0 L 3.046875 -6.359375 L 2.546875 -6.359375 C 2.265625 -5.390625 2.09375 -5.25 0.890625 -5.09375 L 0.890625 -4.53125 Z M 2.28125 -4.53125 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-5">
<path style="stroke:none;" d="M 4.453125 -0.765625 L 1.171875 -0.765625 C 1.25 -1.296875 1.53125 -1.625 2.296875 -2.09375 L 3.171875 -2.59375 C 4.046875 -3.0625 4.5 -3.71875 4.5 -4.5 C 4.5 -5.03125 4.28125 -5.53125 3.921875 -5.875 C 3.546875 -6.203125 3.09375 -6.359375 2.5 -6.359375 C 1.703125 -6.359375 1.125 -6.078125 0.78125 -5.53125 C 0.546875 -5.203125 0.453125 -4.796875 0.4375 -4.15625 L 1.21875 -4.15625 C 1.234375 -4.59375 1.296875 -4.84375 1.40625 -5.0625 C 1.59375 -5.4375 2 -5.6875 2.46875 -5.6875 C 3.171875 -5.6875 3.703125 -5.171875 3.703125 -4.484375 C 3.703125 -3.96875 3.40625 -3.53125 2.859375 -3.21875 L 2.046875 -2.75 C 0.75 -2 0.375 -1.40625 0.296875 -0.015625 L 4.453125 -0.015625 Z M 4.453125 -0.765625 "></path>
</symbol>
<symbol overflow="visible" id="glyph0-6">
<path style="stroke:none;" d="M 4.578125 -6.234375 L 0.40625 -6.234375 L 0.40625 -5.46875 L 3.78125 -5.46875 C 2.28125 -3.359375 1.6875 -2.046875 1.21875 0 L 2.046875 0 C 2.390625 -2 3.171875 -3.71875 4.578125 -5.59375 Z M 4.578125 -6.234375 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph1-1">
<path style="stroke:none;" d="M 3.21875 -2.984375 L 5.140625 -5.765625 L 4.109375 -5.765625 L 2.734375 -3.671875 L 1.34375 -5.765625 L 0.296875 -5.765625 L 2.21875 -2.9375 L 0.1875 0 L 1.234375 0 L 2.6875 -2.21875 L 4.140625 0 L 5.203125 0 Z M 3.21875 -2.984375 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-2">
<path style="stroke:none;" d="M 2.59375 -8.015625 C 1.5 -6.578125 0.796875 -4.578125 0.796875 -2.84375 C 0.796875 -1.109375 1.5 0.890625 2.59375 2.328125 L 3.203125 2.328125 C 2.234375 0.765625 1.6875 -1.09375 1.6875 -2.84375 C 1.6875 -4.59375 2.234375 -6.453125 3.203125 -8.015625 Z M 2.59375 -8.015625 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-3">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph1-4">
<path style="stroke:none;" d="M 5.875 -2.9375 L 3.59375 -2.9375 L 3.59375 -5.21875 L 2.828125 -5.21875 L 2.828125 -2.9375 L 0.546875 -2.9375 L 0.546875 -2.171875 L 2.828125 -2.171875 L 2.828125 0.109375 L 3.59375 0.109375 L 3.59375 -2.171875 L 5.875 -2.171875 Z M 5.875 -2.9375 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-5">
<path style="stroke:none;" d="M 4.265625 -5.765625 L 2.671875 -1.28125 L 1.203125 -5.765625 L 0.21875 -5.765625 L 2.171875 0.015625 L 1.8125 0.9375 C 1.65625 1.34375 1.46875 1.5 1.078125 1.5 C 0.921875 1.5 0.796875 1.46875 0.59375 1.4375 L 0.59375 2.25 C 0.78125 2.359375 0.96875 2.390625 1.203125 2.390625 C 1.5 2.390625 1.828125 2.296875 2.0625 2.125 C 2.359375 1.90625 2.515625 1.671875 2.6875 1.203125 L 5.265625 -5.765625 Z M 4.265625 -5.765625 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-6">
<path style="stroke:none;" d="M 1.015625 2.328125 C 2.125 0.890625 2.8125 -1.109375 2.8125 -2.84375 C 2.8125 -4.578125 2.125 -6.578125 1.015625 -8.015625 L 0.421875 -8.015625 C 1.390625 -6.453125 1.921875 -4.59375 1.921875 -2.84375 C 1.921875 -1.09375 1.390625 0.765625 0.421875 2.328125 Z M 1.015625 2.328125 "></path>
</symbol>
<symbol overflow="visible" id="glyph1-7">
<path style="stroke:none;" d="M 2.515625 -8.015625 L -0.09375 0.21875 L 0.515625 0.21875 L 3.125 -8.015625 Z M 2.515625 -8.015625 "></path>
</symbol>
<symbol overflow="visible" id="glyph2-0">
<path style="stroke:none;" d=""></path>
</symbol>
<symbol overflow="visible" id="glyph2-1">
<path style="stroke:none;" d="M -5.765625 -4.265625 L -1.28125 -2.671875 L -5.765625 -1.203125 L -5.765625 -0.21875 L 0.015625 -2.171875 L 0.9375 -1.8125 C 1.34375 -1.65625 1.5 -1.46875 1.5 -1.078125 C 1.5 -0.921875 1.46875 -0.796875 1.4375 -0.59375 L 2.25 -0.59375 C 2.359375 -0.78125 2.390625 -0.96875 2.390625 -1.203125 C 2.390625 -1.5 2.296875 -1.828125 2.125 -2.0625 C 1.90625 -2.359375 1.671875 -2.515625 1.203125 -2.6875 L -5.765625 -5.265625 Z M -5.765625 -4.265625 "></path>
</symbol>
</g>
<clippath id="clip1">
  <path d="M 37.152344 5.480469 L 436.84375 5.480469 L 436.84375 469.851562 L 37.152344 469.851562 Z M 37.152344 5.480469 "></path>
</clippath>
<clippath id="clip2">
  <path d="M 37.152344 401 L 436.84375 401 L 436.84375 402 L 37.152344 402 Z M 37.152344 401 "></path>
</clippath>
<clippath id="clip3">
  <path d="M 37.152344 286 L 436.84375 286 L 436.84375 287 L 37.152344 287 Z M 37.152344 286 "></path>
</clippath>
<clippath id="clip4">
  <path d="M 37.152344 171 L 436.84375 171 L 436.84375 173 L 37.152344 173 Z M 37.152344 171 "></path>
</clippath>
<clippath id="clip5">
  <path d="M 37.152344 57 L 436.84375 57 L 436.84375 58 L 37.152344 58 Z M 37.152344 57 "></path>
</clippath>
<clippath id="clip6">
  <path d="M 99 5.480469 L 101 5.480469 L 101 469.851562 L 99 469.851562 Z M 99 5.480469 "></path>
</clippath>
<clippath id="clip7">
  <path d="M 192 5.480469 L 193 5.480469 L 193 469.851562 L 192 469.851562 Z M 192 5.480469 "></path>
</clippath>
<clippath id="clip8">
  <path d="M 284 5.480469 L 285 5.480469 L 285 469.851562 L 284 469.851562 Z M 284 5.480469 "></path>
</clippath>
<clippath id="clip9">
  <path d="M 376 5.480469 L 378 5.480469 L 378 469.851562 L 376 469.851562 Z M 376 5.480469 "></path>
</clippath>
<clippath id="clip10">
  <path d="M 37.152344 458 L 436.84375 458 L 436.84375 460 L 37.152344 460 Z M 37.152344 458 "></path>
</clippath>
<clippath id="clip11">
  <path d="M 37.152344 343 L 436.84375 343 L 436.84375 345 L 37.152344 345 Z M 37.152344 343 "></path>
</clippath>
<clippath id="clip12">
  <path d="M 37.152344 228 L 436.84375 228 L 436.84375 230 L 37.152344 230 Z M 37.152344 228 "></path>
</clippath>
<clippath id="clip13">
  <path d="M 37.152344 114 L 436.84375 114 L 436.84375 116 L 37.152344 116 Z M 37.152344 114 "></path>
</clippath>
<clippath id="clip14">
  <path d="M 53 5.480469 L 55 5.480469 L 55 469.851562 L 53 469.851562 Z M 53 5.480469 "></path>
</clippath>
<clippath id="clip15">
  <path d="M 145 5.480469 L 147 5.480469 L 147 469.851562 L 145 469.851562 Z M 145 5.480469 "></path>
</clippath>
<clippath id="clip16">
  <path d="M 237 5.480469 L 240 5.480469 L 240 469.851562 L 237 469.851562 Z M 237 5.480469 "></path>
</clippath>
<clippath id="clip17">
  <path d="M 330 5.480469 L 332 5.480469 L 332 469.851562 L 330 469.851562 Z M 330 5.480469 "></path>
</clippath>
<clippath id="clip18">
  <path d="M 422 5.480469 L 424 5.480469 L 424 469.851562 L 422 469.851562 Z M 422 5.480469 "></path>
</clippath>
<clippath id="clip19">
  <path d="M 453.28125 157.585938 L 470.5625 157.585938 L 470.5625 243.984375 L 453.28125 243.984375 Z M 453.28125 157.585938 "></path>
</clippath>
<image id="image10" width="1" height="300" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAEsCAIAAACNMk6CAAAABmJLR0QA/wD/AP+gvaeTAAAAjklEQVQ4jaWTQRKAMAgDd3ik//R1HuOlji3SjNYjhZAEKNt+BCgQIRRIAQRSi2l5hdr79/q1fqBQVw+ErvyipqGH5eh7fNFJi1M+9bC8OT/lrTD9fNYwT/0FpvQzwVju0eObndsd/uUa7qX2NffqNE5w7j7dbCudpXbj2ehX0n3f0ot5pX9/1xkPj79W8p41NH/nSHk1sQAAAABJRU5ErkJggg=="></image>
<pattern id="pattern0" patternunits="userSpaceOnUse" width="1" height="300" patterntransform="matrix(17.28,0,0,0.288,453.281644,157.585479)">
  <use href="#image10"></use>
</pattern>
</defs>
<g id="surface6">
<rect x="0" y="0" width="504" height="504" style="fill:rgb(100%,100%,100%);fill-opacity:1;stroke:none;"></rect>
<rect x="0" y="0" width="504" height="504" style="fill:rgb(100%,100%,100%);fill-opacity:1;stroke:none;"></rect>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 0 504 L 504 504 L 504 0 L 0 0 Z M 0 504 "></path>
<g clip-path="url(#clip1)" clip-rule="nonzero">
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(92.156863%,92.156863%,92.156863%);fill-opacity:1;" d="M 37.152344 469.847656 L 436.84375 469.847656 L 436.84375 5.476562 L 37.152344 5.476562 Z M 37.152344 469.847656 "></path>
</g>
<g clip-path="url(#clip2)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 401.3125 L 436.84375 401.3125 "></path>
</g>
<g clip-path="url(#clip3)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 286.707031 L 436.84375 286.707031 "></path>
</g>
<g clip-path="url(#clip4)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 172.105469 L 436.84375 172.105469 "></path>
</g>
<g clip-path="url(#clip5)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 57.5 L 436.84375 57.5 "></path>
</g>
<g clip-path="url(#clip6)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 100 469.847656 L 100 5.480469 "></path>
</g>
<g clip-path="url(#clip7)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 192.351562 469.847656 L 192.351562 5.480469 "></path>
</g>
<g clip-path="url(#clip8)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 284.707031 469.847656 L 284.707031 5.480469 "></path>
</g>
<g clip-path="url(#clip9)" clip-rule="nonzero">
<path style="fill:none;stroke-width:0.533489;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 377.0625 469.847656 L 377.0625 5.480469 "></path>
</g>
<g clip-path="url(#clip10)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 458.613281 L 436.84375 458.613281 "></path>
</g>
<g clip-path="url(#clip11)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 344.011719 L 436.84375 344.011719 "></path>
</g>
<g clip-path="url(#clip12)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 229.40625 L 436.84375 229.40625 "></path>
</g>
<g clip-path="url(#clip13)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 37.152344 114.804688 L 436.84375 114.804688 "></path>
</g>
<g clip-path="url(#clip14)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 53.820312 469.847656 L 53.820312 5.480469 "></path>
</g>
<g clip-path="url(#clip15)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 146.175781 469.847656 L 146.175781 5.480469 "></path>
</g>
<g clip-path="url(#clip16)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 238.53125 469.847656 L 238.53125 5.480469 "></path>
</g>
<g clip-path="url(#clip17)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 330.886719 469.847656 L 330.886719 5.480469 "></path>
</g>
<g clip-path="url(#clip18)" clip-rule="nonzero">
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 423.238281 469.847656 L 423.238281 5.480469 "></path>
</g>
<path style="fill-rule:nonzero;fill:rgb(29.803922%,61.568627%,86.27451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(29.803922%,61.568627%,86.27451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 421.503906 113.765625 C 421.503906 116.941406 418.933594 119.511719 415.761719 119.511719 C 412.585938 119.511719 410.015625 116.941406 410.015625 113.765625 C 410.015625 110.59375 412.585938 108.023438 415.761719 108.023438 C 418.933594 108.023438 421.503906 110.59375 421.503906 113.765625 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.470588%,34.509804%,50.196078%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.470588%,34.509804%,50.196078%);stroke-opacity:1;stroke-miterlimit:10;" d="M 139.660156 262.089844 C 139.660156 267.554688 131.457031 267.554688 131.457031 262.089844 C 131.457031 256.621094 139.660156 256.621094 139.660156 262.089844 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.039216%,37.647059%,54.117647%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.039216%,37.647059%,54.117647%);stroke-opacity:1;stroke-miterlimit:10;" d="M 202.746094 263.636719 C 202.746094 270.34375 192.683594 270.34375 192.683594 263.636719 C 192.683594 256.925781 202.746094 256.925781 202.746094 263.636719 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.470588%,34.509804%,49.803922%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.470588%,34.509804%,49.803922%);stroke-opacity:1;stroke-miterlimit:10;" d="M 251.804688 331.867188 C 251.804688 335.523438 248.839844 338.492188 245.179688 338.492188 C 241.523438 338.492188 238.558594 335.523438 238.558594 331.867188 C 238.558594 328.210938 241.523438 325.246094 245.179688 325.246094 C 248.839844 325.246094 251.804688 328.210938 251.804688 331.867188 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.862745%,35.294118%,51.372549%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.862745%,35.294118%,51.372549%);stroke-opacity:1;stroke-miterlimit:10;" d="M 226.234375 304.566406 C 226.234375 307.777344 223.632812 310.378906 220.425781 310.378906 C 217.214844 310.378906 214.613281 307.777344 214.613281 304.566406 C 214.613281 301.359375 217.214844 298.757812 220.425781 298.757812 C 223.632812 298.757812 226.234375 301.359375 226.234375 304.566406 "></path>
<path style="fill-rule:nonzero;fill:rgb(26.27451%,54.117647%,76.470588%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(26.27451%,54.117647%,76.470588%);stroke-opacity:1;stroke-miterlimit:10;" d="M 361.394531 162.601562 C 361.394531 165.738281 358.851562 168.28125 355.714844 168.28125 C 352.578125 168.28125 350.03125 165.738281 350.03125 162.601562 C 350.03125 159.460938 352.578125 156.917969 355.714844 156.917969 C 358.851562 156.917969 361.394531 159.460938 361.394531 162.601562 "></path>
<path style="fill-rule:nonzero;fill:rgb(13.333333%,28.235294%,41.960784%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(13.333333%,28.235294%,41.960784%);stroke-opacity:1;stroke-miterlimit:10;" d="M 181.21875 366.085938 C 181.21875 369.542969 178.414062 372.34375 174.957031 372.34375 C 171.5 372.34375 168.699219 369.542969 168.699219 366.085938 C 168.699219 362.625 171.5 359.824219 174.957031 359.824219 C 178.414062 359.824219 181.21875 362.625 181.21875 366.085938 "></path>
<path style="fill-rule:nonzero;fill:rgb(20%,41.960784%,60%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20%,41.960784%,60%);stroke-opacity:1;stroke-miterlimit:10;" d="M 222.601562 222.988281 C 222.601562 229.554688 212.757812 229.554688 212.757812 222.988281 C 212.757812 216.425781 222.601562 216.425781 222.601562 222.988281 "></path>
<path style="fill-rule:nonzero;fill:rgb(26.27451%,54.117647%,76.470588%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(26.27451%,54.117647%,76.470588%);stroke-opacity:1;stroke-miterlimit:10;" d="M 394.101562 181.539062 C 394.101562 184.886719 391.386719 187.601562 388.039062 187.601562 C 384.691406 187.601562 381.976562 184.886719 381.976562 181.539062 C 381.976562 178.191406 384.691406 175.476562 388.039062 175.476562 C 391.386719 175.476562 394.101562 178.191406 394.101562 181.539062 "></path>
<path style="fill-rule:nonzero;fill:rgb(29.019608%,60%,84.313725%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(29.019608%,60%,84.313725%);stroke-opacity:1;stroke-miterlimit:10;" d="M 397.238281 116.933594 C 397.238281 120.035156 394.722656 122.546875 391.621094 122.546875 C 388.523438 122.546875 386.007812 120.035156 386.007812 116.933594 C 386.007812 113.832031 388.523438 111.320312 391.621094 111.320312 C 394.722656 111.320312 397.238281 113.832031 397.238281 116.933594 "></path>
<path style="fill-rule:nonzero;fill:rgb(21.176471%,44.705882%,63.529412%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(21.176471%,44.705882%,63.529412%);stroke-opacity:1;stroke-miterlimit:10;" d="M 273.769531 222.253906 C 273.769531 225.257812 271.335938 227.691406 268.332031 227.691406 C 265.332031 227.691406 262.898438 225.257812 262.898438 222.253906 C 262.898438 219.253906 265.332031 216.820312 268.332031 216.820312 C 271.335938 216.820312 273.769531 219.253906 273.769531 222.253906 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.686275%,33.333333%,48.627451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.686275%,33.333333%,48.627451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 68.03125 232.996094 C 68.03125 235.914062 63.652344 235.914062 63.652344 232.996094 C 63.652344 230.082031 68.03125 230.082031 68.03125 232.996094 "></path>
<path style="fill-rule:nonzero;fill:rgb(28.235294%,58.431373%,82.352941%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(28.235294%,58.431373%,82.352941%);stroke-opacity:1;stroke-miterlimit:10;" d="M 384.890625 126.375 C 384.890625 129.464844 382.382812 131.972656 379.292969 131.972656 C 376.203125 131.972656 373.699219 129.464844 373.699219 126.375 C 373.699219 123.285156 376.203125 120.78125 379.292969 120.78125 C 382.382812 120.78125 384.890625 123.285156 384.890625 126.375 "></path>
<path style="fill-rule:nonzero;fill:rgb(13.333333%,28.235294%,41.960784%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(13.333333%,28.235294%,41.960784%);stroke-opacity:1;stroke-miterlimit:10;" d="M 110.609375 324.089844 C 110.609375 329.445312 102.570312 329.445312 102.570312 324.089844 C 102.570312 318.730469 110.609375 318.730469 110.609375 324.089844 "></path>
<path style="fill-rule:nonzero;fill:rgb(26.666667%,55.686275%,78.039216%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(26.666667%,55.686275%,78.039216%);stroke-opacity:1;stroke-miterlimit:10;" d="M 291.515625 103.46875 C 291.515625 109.890625 281.882812 109.890625 281.882812 103.46875 C 281.882812 97.042969 291.515625 97.042969 291.515625 103.46875 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.470588%,34.901961%,50.588235%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.470588%,34.901961%,50.588235%);stroke-opacity:1;stroke-miterlimit:10;" d="M 114.441406 244.125 C 114.441406 248.835938 107.378906 248.835938 107.378906 244.125 C 107.378906 239.414062 114.441406 239.414062 114.441406 244.125 "></path>
<path style="fill-rule:nonzero;fill:rgb(26.666667%,55.294118%,77.647059%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(26.666667%,55.294118%,77.647059%);stroke-opacity:1;stroke-miterlimit:10;" d="M 323.460938 127.691406 C 323.460938 134.601562 313.097656 134.601562 313.097656 127.691406 C 313.097656 120.78125 323.460938 120.78125 323.460938 127.691406 "></path>
<path style="fill-rule:nonzero;fill:rgb(23.529412%,49.019608%,69.411765%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(23.529412%,49.019608%,69.411765%);stroke-opacity:1;stroke-miterlimit:10;" d="M 234.941406 144.328125 C 234.941406 150.40625 225.828125 150.40625 225.828125 144.328125 C 225.828125 138.253906 234.941406 138.253906 234.941406 144.328125 "></path>
<path style="fill-rule:nonzero;fill:rgb(23.529412%,48.627451%,69.019608%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(23.529412%,48.627451%,69.019608%);stroke-opacity:1;stroke-miterlimit:10;" d="M 254.984375 160.789062 C 254.984375 167.222656 245.332031 167.222656 245.332031 160.789062 C 245.332031 154.351562 254.984375 154.351562 254.984375 160.789062 "></path>
<path style="fill-rule:nonzero;fill:rgb(29.411765%,60.784314%,85.490196%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(29.411765%,60.784314%,85.490196%);stroke-opacity:1;stroke-miterlimit:10;" d="M 374.707031 94.023438 C 374.707031 101.140625 364.03125 101.140625 364.03125 94.023438 C 364.03125 86.902344 374.707031 86.902344 374.707031 94.023438 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.117647%,29.803922%,43.921569%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.117647%,29.803922%,43.921569%);stroke-opacity:1;stroke-miterlimit:10;" d="M 70.703125 281.648438 C 70.703125 284.941406 65.761719 284.941406 65.761719 281.648438 C 65.761719 278.355469 70.703125 278.355469 70.703125 281.648438 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.823529%,39.215686%,56.470588%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.823529%,39.215686%,56.470588%);stroke-opacity:1;stroke-miterlimit:10;" d="M 118.652344 191.644531 C 118.652344 196.140625 111.910156 196.140625 111.910156 191.644531 C 111.910156 187.148438 118.652344 187.148438 118.652344 191.644531 "></path>
<path style="fill-rule:nonzero;fill:rgb(12.156863%,26.27451%,38.823529%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(12.156863%,26.27451%,38.823529%);stroke-opacity:1;stroke-miterlimit:10;" d="M 58.132812 320.554688 C 58.132812 322.449219 55.289062 322.449219 55.289062 320.554688 C 55.289062 318.660156 58.132812 318.660156 58.132812 320.554688 "></path>
<path style="fill-rule:nonzero;fill:rgb(25.098039%,51.764706%,73.333333%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(25.098039%,51.764706%,73.333333%);stroke-opacity:1;stroke-miterlimit:10;" d="M 322.574219 166.644531 C 322.574219 169.640625 320.148438 172.066406 317.152344 172.066406 C 314.15625 172.066406 311.730469 169.640625 311.730469 166.644531 C 311.730469 163.652344 314.15625 161.222656 317.152344 161.222656 C 320.148438 161.222656 322.574219 163.652344 322.574219 166.644531 "></path>
<path style="fill-rule:nonzero;fill:rgb(17.647059%,36.862745%,52.941176%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(17.647059%,36.862745%,52.941176%);stroke-opacity:1;stroke-miterlimit:10;" d="M 207.578125 277.113281 C 207.578125 284.085938 197.121094 284.085938 197.121094 277.113281 C 197.121094 270.144531 207.578125 270.144531 207.578125 277.113281 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.294118%,32.156863%,47.058824%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.294118%,32.156863%,47.058824%);stroke-opacity:1;stroke-miterlimit:10;" d="M 92.039062 264.046875 C 92.039062 268.210938 85.792969 268.210938 85.792969 264.046875 C 85.792969 259.882812 92.039062 259.882812 92.039062 264.046875 "></path>
<path style="fill-rule:nonzero;fill:rgb(9.803922%,21.568627%,32.54902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(9.803922%,21.568627%,32.54902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 85.035156 399.128906 C 85.035156 404.761719 76.585938 404.761719 76.585938 399.128906 C 76.585938 393.496094 85.035156 393.496094 85.035156 399.128906 "></path>
<path style="fill-rule:nonzero;fill:rgb(22.745098%,47.45098%,67.45098%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(22.745098%,47.45098%,67.45098%);stroke-opacity:1;stroke-miterlimit:10;" d="M 366.050781 244.710938 C 366.050781 248.289062 363.148438 251.191406 359.570312 251.191406 C 355.988281 251.191406 353.089844 248.289062 353.089844 244.710938 C 353.089844 241.128906 355.988281 238.230469 359.570312 238.230469 C 363.148438 238.230469 366.050781 241.128906 366.050781 244.710938 "></path>
<path style="fill-rule:nonzero;fill:rgb(25.490196%,52.941176%,74.901961%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(25.490196%,52.941176%,74.901961%);stroke-opacity:1;stroke-miterlimit:10;" d="M 386.53125 191.480469 C 386.53125 194.847656 383.804688 197.574219 380.4375 197.574219 C 377.070312 197.574219 374.34375 194.847656 374.34375 191.480469 C 374.34375 188.113281 377.070312 185.386719 380.4375 185.386719 C 383.804688 185.386719 386.53125 188.113281 386.53125 191.480469 "></path>
<path style="fill-rule:nonzero;fill:rgb(11.764706%,25.098039%,37.254902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(11.764706%,25.098039%,37.254902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 60.914062 337.175781 C 60.914062 339.890625 56.84375 339.890625 56.84375 337.175781 C 56.84375 334.464844 60.914062 334.464844 60.914062 337.175781 "></path>
<path style="fill-rule:nonzero;fill:rgb(9.803922%,21.568627%,32.941176%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(9.803922%,21.568627%,32.941176%);stroke-opacity:1;stroke-miterlimit:10;" d="M 113.769531 413.566406 C 113.769531 416.90625 111.0625 419.609375 107.722656 419.609375 C 104.386719 419.609375 101.679688 416.90625 101.679688 413.566406 C 101.679688 410.230469 104.386719 407.523438 107.722656 407.523438 C 111.0625 407.523438 113.769531 410.230469 113.769531 413.566406 "></path>
<path style="fill-rule:nonzero;fill:rgb(29.019608%,60%,84.313725%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(29.019608%,60%,84.313725%);stroke-opacity:1;stroke-miterlimit:10;" d="M 407.894531 124.464844 C 407.894531 127.628906 405.328125 130.195312 402.164062 130.195312 C 399 130.195312 396.433594 127.628906 396.433594 124.464844 C 396.433594 121.300781 399 118.734375 402.164062 118.734375 C 405.328125 118.734375 407.894531 121.300781 407.894531 124.464844 "></path>
<path style="fill-rule:nonzero;fill:rgb(23.137255%,47.843137%,68.235294%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(23.137255%,47.843137%,68.235294%);stroke-opacity:1;stroke-miterlimit:10;" d="M 345.339844 224.445312 C 345.339844 227.804688 342.613281 230.53125 339.253906 230.53125 C 335.890625 230.53125 333.164062 227.804688 333.164062 224.445312 C 333.164062 221.082031 335.890625 218.355469 339.253906 218.355469 C 342.613281 218.355469 345.339844 221.082031 345.339844 224.445312 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.470588%,34.901961%,50.588235%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.470588%,34.901961%,50.588235%);stroke-opacity:1;stroke-miterlimit:10;" d="M 158.664062 271.574219 C 158.664062 277.550781 149.699219 277.550781 149.699219 271.574219 C 149.699219 265.597656 158.664062 265.597656 158.664062 271.574219 "></path>
<path style="fill-rule:nonzero;fill:rgb(32.54902%,66.666667%,93.333333%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(32.54902%,66.666667%,93.333333%);stroke-opacity:1;stroke-miterlimit:10;" d="M 385.292969 33.542969 C 385.292969 40.351562 375.082031 40.351562 375.082031 33.542969 C 375.082031 26.738281 385.292969 26.738281 385.292969 33.542969 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.078431%,34.117647%,49.411765%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.078431%,34.117647%,49.411765%);stroke-opacity:1;stroke-miterlimit:10;" d="M 252.34375 336.453125 C 252.34375 340.167969 249.328125 343.179688 245.613281 343.179688 C 241.898438 343.179688 238.886719 340.167969 238.886719 336.453125 C 238.886719 332.738281 241.898438 329.726562 245.613281 329.726562 C 249.328125 329.726562 252.34375 332.738281 252.34375 336.453125 "></path>
<path style="fill-rule:nonzero;fill:rgb(27.843137%,57.254902%,80.784314%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(27.843137%,57.254902%,80.784314%);stroke-opacity:1;stroke-miterlimit:10;" d="M 305.121094 91.429688 C 305.121094 97.910156 295.402344 97.910156 295.402344 91.429688 C 295.402344 84.953125 305.121094 84.953125 305.121094 91.429688 "></path>
<path style="fill-rule:nonzero;fill:rgb(26.666667%,55.294118%,77.647059%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(26.666667%,55.294118%,77.647059%);stroke-opacity:1;stroke-miterlimit:10;" d="M 421.347656 187.3125 C 421.347656 190.789062 418.527344 193.613281 415.046875 193.613281 C 411.566406 193.613281 408.746094 190.789062 408.746094 187.3125 C 408.746094 183.832031 411.566406 181.007812 415.046875 181.007812 C 418.527344 181.007812 421.347656 183.832031 421.347656 187.3125 "></path>
<path style="fill-rule:nonzero;fill:rgb(12.54902%,26.666667%,39.607843%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(12.54902%,26.666667%,39.607843%);stroke-opacity:1;stroke-miterlimit:10;" d="M 134.601562 360.113281 C 134.601562 366.921875 124.390625 366.921875 124.390625 360.113281 C 124.390625 353.304688 134.601562 353.304688 134.601562 360.113281 "></path>
<path style="fill-rule:nonzero;fill:rgb(30.196078%,62.745098%,87.843137%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(30.196078%,62.745098%,87.843137%);stroke-opacity:1;stroke-miterlimit:10;" d="M 344.925781 55.171875 C 344.925781 61.785156 335.011719 61.785156 335.011719 55.171875 C 335.011719 48.5625 344.925781 48.5625 344.925781 55.171875 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.823529%,39.607843%,56.862745%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.823529%,39.607843%,56.862745%);stroke-opacity:1;stroke-miterlimit:10;" d="M 282.988281 288.140625 C 282.988281 291.597656 280.1875 294.398438 276.734375 294.398438 C 273.277344 294.398438 270.476562 291.597656 270.476562 288.140625 C 270.476562 284.6875 273.277344 281.882812 276.734375 281.882812 C 280.1875 281.882812 282.988281 284.6875 282.988281 288.140625 "></path>
<path style="fill-rule:nonzero;fill:rgb(26.666667%,54.901961%,77.647059%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(26.666667%,54.901961%,77.647059%);stroke-opacity:1;stroke-miterlimit:10;" d="M 334.363281 136.078125 C 334.363281 143.160156 323.742188 143.160156 323.742188 136.078125 C 323.742188 128.996094 334.363281 128.996094 334.363281 136.078125 "></path>
<path style="fill-rule:nonzero;fill:rgb(13.72549%,29.411765%,43.137255%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(13.72549%,29.411765%,43.137255%);stroke-opacity:1;stroke-miterlimit:10;" d="M 142.910156 329.597656 C 142.910156 336.011719 133.289062 336.011719 133.289062 329.597656 C 133.289062 323.183594 142.910156 323.183594 142.910156 329.597656 "></path>
<path style="fill-rule:nonzero;fill:rgb(27.45098%,56.862745%,80%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(27.45098%,56.862745%,80%);stroke-opacity:1;stroke-miterlimit:10;" d="M 423.777344 168.035156 C 423.777344 171.433594 421.023438 174.1875 417.625 174.1875 C 414.230469 174.1875 411.476562 171.433594 411.476562 168.035156 C 411.476562 164.640625 414.230469 161.886719 417.625 161.886719 C 421.023438 161.886719 423.777344 164.640625 423.777344 168.035156 "></path>
<path style="fill-rule:nonzero;fill:rgb(7.843137%,17.647059%,27.45098%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(7.843137%,17.647059%,27.45098%);stroke-opacity:1;stroke-miterlimit:10;" d="M 77.542969 446.886719 C 77.542969 450.503906 74.609375 453.433594 70.996094 453.433594 C 67.382812 453.433594 64.453125 450.503906 64.453125 446.886719 C 64.453125 443.273438 67.382812 440.34375 70.996094 440.34375 C 74.609375 440.34375 77.542969 443.273438 77.542969 446.886719 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.294118%,32.54902%,47.45098%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.294118%,32.54902%,47.45098%);stroke-opacity:1;stroke-miterlimit:10;" d="M 218.472656 336.753906 C 218.472656 340.203125 215.675781 342.996094 212.230469 342.996094 C 208.78125 342.996094 205.988281 340.203125 205.988281 336.753906 C 205.988281 333.308594 208.78125 330.511719 212.230469 330.511719 C 215.675781 330.511719 218.472656 333.308594 218.472656 336.753906 "></path>
<path style="fill-rule:nonzero;fill:rgb(12.941176%,27.45098%,40.392157%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(12.941176%,27.45098%,40.392157%);stroke-opacity:1;stroke-miterlimit:10;" d="M 91.675781 325.738281 C 91.675781 330.402344 84.679688 330.402344 84.679688 325.738281 C 84.679688 321.070312 91.675781 321.070312 91.675781 325.738281 "></path>
<path style="fill-rule:nonzero;fill:rgb(26.27451%,54.117647%,76.470588%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(26.27451%,54.117647%,76.470588%);stroke-opacity:1;stroke-miterlimit:10;" d="M 271.054688 105.878906 C 271.054688 112.109375 261.707031 112.109375 261.707031 105.878906 C 261.707031 99.648438 271.054688 99.648438 271.054688 105.878906 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.705882%,50.980392%,72.156863%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.705882%,50.980392%,72.156863%);stroke-opacity:1;stroke-miterlimit:10;" d="M 373.460938 205.121094 C 373.460938 208.503906 370.71875 211.242188 367.339844 211.242188 C 363.957031 211.242188 361.21875 208.503906 361.21875 205.121094 C 361.21875 201.738281 363.957031 199 367.339844 199 C 370.71875 199 373.460938 201.738281 373.460938 205.121094 "></path>
<path style="fill-rule:nonzero;fill:rgb(23.921569%,49.803922%,70.588235%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(23.921569%,49.803922%,70.588235%);stroke-opacity:1;stroke-miterlimit:10;" d="M 250.640625 146.167969 C 250.640625 152.441406 241.226562 152.441406 241.226562 146.167969 C 241.226562 139.890625 250.640625 139.890625 250.640625 146.167969 "></path>
<path style="fill-rule:nonzero;fill:rgb(32.941176%,67.45098%,94.509804%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(32.941176%,67.45098%,94.509804%);stroke-opacity:1;stroke-miterlimit:10;" d="M 388.378906 26.585938 C 388.378906 33.378906 378.195312 33.378906 378.195312 26.585938 C 378.195312 19.796875 388.378906 19.796875 388.378906 26.585938 "></path>
<path style="fill-rule:nonzero;fill:rgb(29.803922%,61.568627%,86.27451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(29.803922%,61.568627%,86.27451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 351.71875 72.6875 C 351.71875 79.464844 341.550781 79.464844 341.550781 72.6875 C 341.550781 65.910156 351.71875 65.910156 351.71875 72.6875 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.470588%,34.901961%,50.588235%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.470588%,34.901961%,50.588235%);stroke-opacity:1;stroke-miterlimit:10;" d="M 253.117188 328.082031 C 253.117188 331.707031 250.175781 334.648438 246.550781 334.648438 C 242.925781 334.648438 239.988281 331.707031 239.988281 328.082031 C 239.988281 324.457031 242.925781 321.519531 246.550781 321.519531 C 250.175781 321.519531 253.117188 324.457031 253.117188 328.082031 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.078431%,34.117647%,49.803922%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.078431%,34.117647%,49.803922%);stroke-opacity:1;stroke-miterlimit:10;" d="M 94.800781 239.945312 C 94.800781 244.058594 88.628906 244.058594 88.628906 239.945312 C 88.628906 235.828125 94.800781 235.828125 94.800781 239.945312 "></path>
<path style="fill-rule:nonzero;fill:rgb(13.72549%,29.411765%,43.137255%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(13.72549%,29.411765%,43.137255%);stroke-opacity:1;stroke-miterlimit:10;" d="M 125.394531 318.8125 C 125.394531 324.5625 116.765625 324.5625 116.765625 318.8125 C 116.765625 313.0625 125.394531 313.0625 125.394531 318.8125 "></path>
<path style="fill-rule:nonzero;fill:rgb(33.72549%,69.411765%,96.862745%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(33.72549%,69.411765%,96.862745%);stroke-opacity:1;stroke-miterlimit:10;" d="M 423.96875 27.34375 C 423.96875 34.402344 413.382812 34.402344 413.382812 27.34375 C 413.382812 20.285156 423.96875 20.285156 423.96875 27.34375 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.294118%,32.156863%,47.058824%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.294118%,32.156863%,47.058824%);stroke-opacity:1;stroke-miterlimit:10;" d="M 215.160156 337.714844 C 215.160156 341.144531 212.378906 343.925781 208.949219 343.925781 C 205.519531 343.925781 202.738281 341.144531 202.738281 337.714844 C 202.738281 334.285156 205.519531 331.503906 208.949219 331.503906 C 212.378906 331.503906 215.160156 334.285156 215.160156 337.714844 "></path>
<path style="fill-rule:nonzero;fill:rgb(21.176471%,44.313725%,63.137255%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(21.176471%,44.313725%,63.137255%);stroke-opacity:1;stroke-miterlimit:10;" d="M 256.765625 215.816406 C 256.765625 222.777344 246.332031 222.777344 246.332031 215.816406 C 246.332031 208.859375 256.765625 208.859375 256.765625 215.816406 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.313725%,50.588235%,71.372549%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.313725%,50.588235%,71.372549%);stroke-opacity:1;stroke-miterlimit:10;" d="M 356.070312 202.417969 C 356.070312 205.710938 353.398438 208.382812 350.105469 208.382812 C 346.8125 208.382812 344.140625 205.710938 344.140625 202.417969 C 344.140625 199.125 346.8125 196.453125 350.105469 196.453125 C 353.398438 196.453125 356.070312 199.125 356.070312 202.417969 "></path>
<path style="fill-rule:nonzero;fill:rgb(25.098039%,52.54902%,74.117647%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(25.098039%,52.54902%,74.117647%);stroke-opacity:1;stroke-miterlimit:10;" d="M 354.738281 178.792969 C 354.738281 181.972656 352.160156 184.546875 348.980469 184.546875 C 345.800781 184.546875 343.226562 181.972656 343.226562 178.792969 C 343.226562 175.613281 345.800781 173.035156 348.980469 173.035156 C 352.160156 173.035156 354.738281 175.613281 354.738281 178.792969 "></path>
<path style="fill-rule:nonzero;fill:rgb(21.176471%,44.313725%,63.529412%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(21.176471%,44.313725%,63.529412%);stroke-opacity:1;stroke-miterlimit:10;" d="M 311.875 245.664062 C 311.875 248.988281 309.179688 251.683594 305.859375 251.683594 C 302.535156 251.683594 299.839844 248.988281 299.839844 245.664062 C 299.839844 242.339844 302.535156 239.644531 305.859375 239.644531 C 309.179688 239.644531 311.875 242.339844 311.875 245.664062 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.431373%,38.823529%,55.686275%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.431373%,38.823529%,55.686275%);stroke-opacity:1;stroke-miterlimit:10;" d="M 157.199219 219.988281 C 157.199219 225.457031 149 225.457031 149 219.988281 C 149 214.523438 157.199219 214.523438 157.199219 219.988281 "></path>
<path style="fill-rule:nonzero;fill:rgb(29.411765%,60.392157%,84.705882%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(29.411765%,60.392157%,84.705882%);stroke-opacity:1;stroke-miterlimit:10;" d="M 415.546875 122.976562 C 415.546875 126.164062 412.964844 128.746094 409.78125 128.746094 C 406.59375 128.746094 404.011719 126.164062 404.011719 122.976562 C 404.011719 119.792969 406.59375 117.210938 409.78125 117.210938 C 412.964844 117.210938 415.546875 119.792969 415.546875 122.976562 "></path>
<path style="fill-rule:nonzero;fill:rgb(29.411765%,60.392157%,85.098039%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(29.411765%,60.392157%,85.098039%);stroke-opacity:1;stroke-miterlimit:10;" d="M 342.921875 77.636719 C 342.921875 84.371094 332.820312 84.371094 332.820312 77.636719 C 332.820312 70.902344 342.921875 70.902344 342.921875 77.636719 "></path>
<path style="fill-rule:nonzero;fill:rgb(11.372549%,24.313725%,36.470588%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(11.372549%,24.313725%,36.470588%);stroke-opacity:1;stroke-miterlimit:10;" d="M 67.851562 350.40625 C 67.851562 353.949219 62.535156 353.949219 62.535156 350.40625 C 62.535156 346.863281 67.851562 346.863281 67.851562 350.40625 "></path>
<path style="fill-rule:nonzero;fill:rgb(21.960784%,45.490196%,64.705882%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(21.960784%,45.490196%,64.705882%);stroke-opacity:1;stroke-miterlimit:10;" d="M 227.578125 184.136719 C 227.578125 190.414062 218.160156 190.414062 218.160156 184.136719 C 218.160156 177.855469 227.578125 177.855469 227.578125 184.136719 "></path>
<path style="fill-rule:nonzero;fill:rgb(27.843137%,57.254902%,80.392157%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(27.843137%,57.254902%,80.392157%);stroke-opacity:1;stroke-miterlimit:10;" d="M 370.960938 133.140625 C 370.960938 136.203125 368.476562 138.6875 365.414062 138.6875 C 362.351562 138.6875 359.867188 136.203125 359.867188 133.140625 C 359.867188 130.078125 362.351562 127.59375 365.414062 127.59375 C 368.476562 127.59375 370.960938 130.078125 370.960938 133.140625 "></path>
<path style="fill-rule:nonzero;fill:rgb(11.372549%,25.098039%,37.254902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(11.372549%,25.098039%,37.254902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 124.972656 377.929688 C 124.972656 384.898438 114.523438 384.898438 114.523438 377.929688 C 114.523438 370.964844 124.972656 370.964844 124.972656 377.929688 "></path>
<path style="fill-rule:nonzero;fill:rgb(20.784314%,43.529412%,61.960784%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20.784314%,43.529412%,61.960784%);stroke-opacity:1;stroke-miterlimit:10;" d="M 346.292969 278.589844 C 346.292969 282.320312 343.269531 285.347656 339.539062 285.347656 C 335.804688 285.347656 332.78125 282.320312 332.78125 278.589844 C 332.78125 274.859375 335.804688 271.832031 339.539062 271.832031 C 343.269531 271.832031 346.292969 274.859375 346.292969 278.589844 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.039216%,38.039216%,54.901961%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.039216%,38.039216%,54.901961%);stroke-opacity:1;stroke-miterlimit:10;" d="M 160.4375 231.148438 C 160.4375 236.769531 152.007812 236.769531 152.007812 231.148438 C 152.007812 225.53125 160.4375 225.53125 160.4375 231.148438 "></path>
<path style="fill-rule:nonzero;fill:rgb(9.411765%,21.176471%,31.764706%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(9.411765%,21.176471%,31.764706%);stroke-opacity:1;stroke-miterlimit:10;" d="M 114.765625 423.960938 C 114.765625 427.671875 111.757812 430.679688 108.046875 430.679688 C 104.335938 430.679688 101.328125 427.671875 101.328125 423.960938 C 101.328125 420.25 104.335938 417.242188 108.046875 417.242188 C 111.757812 417.242188 114.765625 420.25 114.765625 423.960938 "></path>
<path style="fill-rule:nonzero;fill:rgb(17.254902%,36.078431%,51.764706%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(17.254902%,36.078431%,51.764706%);stroke-opacity:1;stroke-miterlimit:10;" d="M 107.5625 226.449219 C 107.5625 230.863281 100.941406 230.863281 100.941406 226.449219 C 100.941406 222.039062 107.5625 222.039062 107.5625 226.449219 "></path>
<path style="fill-rule:nonzero;fill:rgb(23.921569%,49.411765%,70.196078%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(23.921569%,49.411765%,70.196078%);stroke-opacity:1;stroke-miterlimit:10;" d="M 283.722656 169.664062 C 283.722656 176.503906 273.460938 176.503906 273.460938 169.664062 C 273.460938 162.824219 283.722656 162.824219 283.722656 169.664062 "></path>
<path style="fill-rule:nonzero;fill:rgb(9.411765%,20.392157%,31.372549%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(9.411765%,20.392157%,31.372549%);stroke-opacity:1;stroke-miterlimit:10;" d="M 98.75 421.316406 C 98.75 424.492188 96.175781 427.0625 93.003906 427.0625 C 89.828125 427.0625 87.253906 424.492188 87.253906 421.316406 C 87.253906 418.144531 89.828125 415.570312 93.003906 415.570312 C 96.175781 415.570312 98.75 418.144531 98.75 421.316406 "></path>
<path style="fill-rule:nonzero;fill:rgb(20.392157%,43.137255%,61.568627%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20.392157%,43.137255%,61.568627%);stroke-opacity:1;stroke-miterlimit:10;" d="M 192.851562 191.65625 C 192.851562 197.5 184.078125 197.5 184.078125 191.65625 C 184.078125 185.808594 192.851562 185.808594 192.851562 191.65625 "></path>
<path style="fill-rule:nonzero;fill:rgb(14.117647%,30.588235%,44.705882%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(14.117647%,30.588235%,44.705882%);stroke-opacity:1;stroke-miterlimit:10;" d="M 135.082031 312.605469 C 135.082031 318.539062 126.179688 318.539062 126.179688 312.605469 C 126.179688 306.671875 135.082031 306.671875 135.082031 312.605469 "></path>
<path style="fill-rule:nonzero;fill:rgb(10.980392%,23.921569%,35.686275%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(10.980392%,23.921569%,35.686275%);stroke-opacity:1;stroke-miterlimit:10;" d="M 86.585938 370.523438 C 86.585938 375.574219 79.011719 375.574219 79.011719 370.523438 C 79.011719 365.476562 86.585938 365.476562 86.585938 370.523438 "></path>
<path style="fill-rule:nonzero;fill:rgb(26.666667%,55.294118%,77.647059%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(26.666667%,55.294118%,77.647059%);stroke-opacity:1;stroke-miterlimit:10;" d="M 423.550781 188.121094 C 423.550781 191.613281 420.71875 194.445312 417.226562 194.445312 C 413.734375 194.445312 410.902344 191.613281 410.902344 188.121094 C 410.902344 184.628906 413.734375 181.796875 417.226562 181.796875 C 420.71875 181.796875 423.550781 184.628906 423.550781 188.121094 "></path>
<path style="fill-rule:nonzero;fill:rgb(28.235294%,58.039216%,81.960784%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(28.235294%,58.039216%,81.960784%);stroke-opacity:1;stroke-miterlimit:10;" d="M 316.644531 88.25 C 316.644531 94.816406 306.796875 94.816406 306.796875 88.25 C 306.796875 81.683594 316.644531 81.683594 316.644531 88.25 "></path>
<path style="fill-rule:nonzero;fill:rgb(9.803922%,21.568627%,32.54902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(9.803922%,21.568627%,32.54902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 102.0625 410.53125 C 102.0625 417.726562 91.269531 417.726562 91.269531 410.53125 C 91.269531 403.335938 102.0625 403.335938 102.0625 410.53125 "></path>
<path style="fill-rule:nonzero;fill:rgb(21.960784%,45.882353%,65.490196%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(21.960784%,45.882353%,65.490196%);stroke-opacity:1;stroke-miterlimit:10;" d="M 345.15625 247.226562 C 345.15625 250.722656 342.320312 253.558594 338.820312 253.558594 C 335.324219 253.558594 332.488281 250.722656 332.488281 247.226562 C 332.488281 243.726562 335.324219 240.894531 338.820312 240.894531 C 342.320312 240.894531 345.15625 243.726562 345.15625 247.226562 "></path>
<path style="fill-rule:nonzero;fill:rgb(7.45098%,16.862745%,26.27451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(7.45098%,16.862745%,26.27451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 58.28125 448.742188 C 58.28125 452.691406 52.355469 452.691406 52.355469 448.742188 C 52.355469 444.792969 58.28125 444.792969 58.28125 448.742188 "></path>
<path style="fill-rule:nonzero;fill:rgb(29.411765%,61.176471%,85.490196%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(29.411765%,61.176471%,85.490196%);stroke-opacity:1;stroke-miterlimit:10;" d="M 382.234375 96.027344 C 382.234375 103.222656 371.441406 103.222656 371.441406 96.027344 C 371.441406 88.832031 382.234375 88.832031 382.234375 96.027344 "></path>
<path style="fill-rule:nonzero;fill:rgb(15.686275%,32.941176%,48.235294%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(15.686275%,32.941176%,48.235294%);stroke-opacity:1;stroke-miterlimit:10;" d="M 171.203125 300.5 C 171.203125 307.117188 161.28125 307.117188 161.28125 300.5 C 161.28125 293.882812 171.203125 293.882812 171.203125 300.5 "></path>
<path style="fill-rule:nonzero;fill:rgb(19.607843%,41.176471%,58.823529%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(19.607843%,41.176471%,58.823529%);stroke-opacity:1;stroke-miterlimit:10;" d="M 287.855469 273.476562 C 287.855469 276.851562 285.121094 279.585938 281.746094 279.585938 C 278.371094 279.585938 275.636719 276.851562 275.636719 273.476562 C 275.636719 270.101562 278.371094 267.367188 281.746094 267.367188 C 285.121094 267.367188 287.855469 270.101562 287.855469 273.476562 "></path>
<path style="fill-rule:nonzero;fill:rgb(19.607843%,41.176471%,58.823529%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(19.607843%,41.176471%,58.823529%);stroke-opacity:1;stroke-miterlimit:10;" d="M 264.328125 257.746094 C 264.328125 260.882812 261.785156 263.429688 258.648438 263.429688 C 255.511719 263.429688 252.964844 260.882812 252.964844 257.746094 C 252.964844 254.609375 255.511719 252.066406 258.648438 252.066406 C 261.785156 252.066406 264.328125 254.609375 264.328125 257.746094 "></path>
<path style="fill-rule:nonzero;fill:rgb(13.333333%,28.235294%,41.568627%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(13.333333%,28.235294%,41.568627%);stroke-opacity:1;stroke-miterlimit:10;" d="M 178.925781 366.289062 C 178.925781 369.726562 176.140625 372.507812 172.703125 372.507812 C 169.269531 372.507812 166.484375 369.726562 166.484375 366.289062 C 166.484375 362.855469 169.269531 360.070312 172.703125 360.070312 C 176.140625 360.070312 178.925781 362.855469 178.925781 366.289062 "></path>
<path style="fill-rule:nonzero;fill:rgb(19.215686%,40%,57.254902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(19.215686%,40%,57.254902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 203.941406 235.800781 C 203.941406 242.210938 194.324219 242.210938 194.324219 235.800781 C 194.324219 229.390625 203.941406 229.390625 203.941406 235.800781 "></path>
<path style="fill-rule:nonzero;fill:rgb(24.705882%,51.372549%,72.54902%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(24.705882%,51.372549%,72.54902%);stroke-opacity:1;stroke-miterlimit:10;" d="M 382.960938 209.964844 C 382.960938 213.410156 380.167969 216.203125 376.71875 216.203125 C 373.273438 216.203125 370.480469 213.410156 370.480469 209.964844 C 370.480469 206.515625 373.273438 203.722656 376.71875 203.722656 C 380.167969 203.722656 382.960938 206.515625 382.960938 209.964844 "></path>
<path style="fill-rule:nonzero;fill:rgb(23.921569%,49.411765%,70.196078%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(23.921569%,49.411765%,70.196078%);stroke-opacity:1;stroke-miterlimit:10;" d="M 265.945312 157.359375 C 265.945312 163.898438 256.140625 163.898438 256.140625 157.359375 C 256.140625 150.824219 265.945312 150.824219 265.945312 157.359375 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.862745%,35.294118%,51.372549%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.862745%,35.294118%,51.372549%);stroke-opacity:1;stroke-miterlimit:10;" d="M 219.285156 300.433594 C 219.285156 303.5625 216.753906 306.097656 213.625 306.097656 C 210.5 306.097656 207.964844 303.5625 207.964844 300.433594 C 207.964844 297.308594 210.5 294.773438 213.625 294.773438 C 216.753906 294.773438 219.285156 297.308594 219.285156 300.433594 "></path>
<path style="fill-rule:nonzero;fill:rgb(23.921569%,49.411765%,70.196078%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(23.921569%,49.411765%,70.196078%);stroke-opacity:1;stroke-miterlimit:10;" d="M 361.589844 215.566406 C 361.589844 218.949219 358.847656 221.695312 355.460938 221.695312 C 352.074219 221.695312 349.332031 218.949219 349.332031 215.566406 C 349.332031 212.179688 352.074219 209.433594 355.460938 209.433594 C 358.847656 209.433594 361.589844 212.179688 361.589844 215.566406 "></path>
<path style="fill-rule:nonzero;fill:rgb(19.607843%,40.784314%,58.431373%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(19.607843%,40.784314%,58.431373%);stroke-opacity:1;stroke-miterlimit:10;" d="M 304.089844 284.699219 C 304.089844 288.253906 301.210938 291.132812 297.65625 291.132812 C 294.105469 291.132812 291.226562 288.253906 291.226562 284.699219 C 291.226562 281.148438 294.105469 278.269531 297.65625 278.269531 C 301.210938 278.269531 304.089844 281.148438 304.089844 284.699219 "></path>
<path style="fill-rule:nonzero;fill:rgb(18.431373%,38.431373%,55.294118%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(18.431373%,38.431373%,55.294118%);stroke-opacity:1;stroke-miterlimit:10;" d="M 112.242188 196.273438 C 112.242188 200.644531 105.6875 200.644531 105.6875 196.273438 C 105.6875 191.90625 112.242188 191.90625 112.242188 196.273438 "></path>
<path style="fill-rule:nonzero;fill:rgb(25.098039%,51.764706%,73.333333%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(25.098039%,51.764706%,73.333333%);stroke-opacity:1;stroke-miterlimit:10;" d="M 385.894531 204.988281 C 385.894531 208.421875 383.113281 211.203125 379.683594 211.203125 C 376.25 211.203125 373.46875 208.421875 373.46875 204.988281 C 373.46875 201.558594 376.25 198.773438 379.683594 198.773438 C 383.113281 198.773438 385.894531 201.558594 385.894531 204.988281 "></path>
<path style="fill-rule:nonzero;fill:rgb(9.803922%,21.960784%,32.941176%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(9.803922%,21.960784%,32.941176%);stroke-opacity:1;stroke-miterlimit:10;" d="M 123.871094 418.226562 C 123.871094 421.941406 120.863281 424.949219 117.148438 424.949219 C 113.433594 424.949219 110.425781 421.941406 110.425781 418.226562 C 110.425781 414.511719 113.433594 411.503906 117.148438 411.503906 C 120.863281 411.503906 123.871094 414.511719 123.871094 418.226562 "></path>
<path style="fill-rule:nonzero;fill:rgb(16.078431%,33.72549%,48.627451%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(16.078431%,33.72549%,48.627451%);stroke-opacity:1;stroke-miterlimit:10;" d="M 100.160156 251.285156 C 100.160156 255.636719 93.628906 255.636719 93.628906 251.285156 C 93.628906 246.933594 100.160156 246.933594 100.160156 251.285156 "></path>
<path style="fill-rule:nonzero;fill:rgb(20.784314%,43.921569%,62.352941%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(20.784314%,43.921569%,62.352941%);stroke-opacity:1;stroke-miterlimit:10;" d="M 199.5 186.234375 C 199.5 192.136719 190.644531 192.136719 190.644531 186.234375 C 190.644531 180.328125 199.5 180.328125 199.5 186.234375 "></path>
<path style="fill-rule:nonzero;fill:rgb(13.333333%,28.627451%,42.352941%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(13.333333%,28.627451%,42.352941%);stroke-opacity:1;stroke-miterlimit:10;" d="M 143.289062 340.175781 C 143.289062 346.800781 133.351562 346.800781 133.351562 340.175781 C 133.351562 333.550781 143.289062 333.550781 143.289062 340.175781 "></path>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="20.21875" y="461.52832"></use>
  <use href="#glyph0-2" x="25.21875" y="461.52832"></use>
  <use href="#glyph0-1" x="27.21875" y="461.52832"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="20.21875" y="346.926758"></use>
  <use href="#glyph0-2" x="25.21875" y="346.926758"></use>
  <use href="#glyph0-3" x="27.21875" y="346.926758"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-4" x="20.21875" y="232.321289"></use>
  <use href="#glyph0-2" x="25.21875" y="232.321289"></use>
  <use href="#glyph0-1" x="27.21875" y="232.321289"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-4" x="20.21875" y="117.719727"></use>
  <use href="#glyph0-2" x="25.21875" y="117.719727"></use>
  <use href="#glyph0-3" x="27.21875" y="117.719727"></use>
</g>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 34.410156 458.613281 L 37.152344 458.613281 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 34.410156 344.011719 L 37.152344 344.011719 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 34.410156 229.40625 L 37.152344 229.40625 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 34.410156 114.804688 L 37.152344 114.804688 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 53.820312 472.589844 L 53.820312 469.847656 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 146.175781 472.589844 L 146.175781 469.847656 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 238.53125 472.589844 L 238.53125 469.847656 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 330.886719 472.589844 L 330.886719 469.847656 "></path>
<path style="fill:none;stroke-width:1.066978;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(20%,20%,20%);stroke-opacity:1;stroke-miterlimit:10;" d="M 423.238281 472.589844 L 423.238281 469.847656 "></path>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="45.320312" y="481.196289"></use>
  <use href="#glyph0-2" x="50.320312" y="481.196289"></use>
  <use href="#glyph0-1" x="52.320312" y="481.196289"></use>
  <use href="#glyph0-1" x="57.320312" y="481.196289"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="137.675781" y="481.196289"></use>
  <use href="#glyph0-2" x="142.675781" y="481.196289"></use>
  <use href="#glyph0-5" x="144.675781" y="481.196289"></use>
  <use href="#glyph0-3" x="149.675781" y="481.196289"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="230.03125" y="481.196289"></use>
  <use href="#glyph0-2" x="235.03125" y="481.196289"></use>
  <use href="#glyph0-3" x="237.03125" y="481.196289"></use>
  <use href="#glyph0-1" x="242.03125" y="481.196289"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-1" x="322.386719" y="481.196289"></use>
  <use href="#glyph0-2" x="327.386719" y="481.196289"></use>
  <use href="#glyph0-6" x="329.386719" y="481.196289"></use>
  <use href="#glyph0-3" x="334.386719" y="481.196289"></use>
</g>
<g style="fill:rgb(30.196078%,30.196078%,30.196078%);fill-opacity:1;">
  <use href="#glyph0-4" x="414.738281" y="481.196289"></use>
  <use href="#glyph0-2" x="419.738281" y="481.196289"></use>
  <use href="#glyph0-1" x="421.738281" y="481.196289"></use>
  <use href="#glyph0-1" x="426.738281" y="481.196289"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-1" x="234.496094" y="494.538086"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph2-1" x="13.499023" y="240.164062"></use>
</g>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 447.800781 249.464844 L 488.757812 249.464844 L 488.757812 134.625 L 447.800781 134.625 Z M 447.800781 249.464844 "></path>
<g clip-path="url(#clip19)" clip-rule="nonzero">
<rect x="0" y="0" width="504" height="504" style="fill:url(#pattern0);stroke:none;"></rect>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-4" x="476.042969" y="217.680664"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-5" x="476.042969" y="187.168945"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-2" x="453.28125" y="149.624023"></use>
  <use href="#glyph1-1" x="457.28125" y="149.624023"></use>
  <use href="#glyph1-3" x="462.28125" y="149.624023"></use>
  <use href="#glyph1-4" x="465.28125" y="149.624023"></use>
  <use href="#glyph1-3" x="471.28125" y="149.624023"></use>
  <use href="#glyph1-5" x="474.28125" y="149.624023"></use>
  <use href="#glyph1-6" x="479.28125" y="149.624023"></use>
</g>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 453.28125 214.765625 L 456.738281 214.765625 "></path>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 453.28125 184.253906 L 456.738281 184.253906 "></path>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 467.105469 214.765625 L 470.5625 214.765625 "></path>
<path style="fill:none;stroke-width:0.375;stroke-linecap:butt;stroke-linejoin:round;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:10;" d="M 467.105469 184.253906 L 470.5625 184.253906 "></path>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 447.800781 340.703125 L 498.519531 340.703125 L 498.519531 260.425781 L 447.800781 260.425781 Z M 447.800781 340.703125 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph1-2" x="453.28125" y="275.420898"></use>
  <use href="#glyph1-1" x="457.28125" y="275.420898"></use>
  <use href="#glyph1-7" x="462.28125" y="275.420898"></use>
  <use href="#glyph1-5" x="465.28125" y="275.420898"></use>
  <use href="#glyph1-6" x="470.28125" y="275.420898"></use>
</g>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(94.901961%,94.901961%,94.901961%);fill-opacity:1;" d="M 453.28125 300.664062 L 470.5625 300.664062 L 470.5625 283.382812 L 453.28125 283.382812 Z M 453.28125 300.664062 "></path>
<path style="fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 465.976562 292.023438 C 465.976562 297.429688 457.867188 297.429688 457.867188 292.023438 C 457.867188 286.613281 465.976562 286.613281 465.976562 292.023438 "></path>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(94.901961%,94.901961%,94.901961%);fill-opacity:1;" d="M 453.28125 317.941406 L 470.5625 317.941406 L 470.5625 300.660156 L 453.28125 300.660156 Z M 453.28125 317.941406 "></path>
<path style="fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 467.121094 309.304688 C 467.121094 316.234375 456.722656 316.234375 456.722656 309.304688 C 456.722656 302.371094 467.121094 302.371094 467.121094 309.304688 "></path>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(94.901961%,94.901961%,94.901961%);fill-opacity:1;" d="M 453.28125 335.222656 L 470.5625 335.222656 L 470.5625 317.941406 L 453.28125 317.941406 Z M 453.28125 335.222656 "></path>
<path style="fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;stroke-width:0.708661;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 467.988281 326.582031 C 467.988281 329.933594 465.273438 332.648438 461.921875 332.648438 C 458.570312 332.648438 455.855469 329.933594 455.855469 326.582031 C 455.855469 323.230469 458.570312 320.515625 461.921875 320.515625 C 465.273438 320.515625 467.988281 323.230469 467.988281 326.582031 "></path>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-1" x="476.042969" y="294.938477"></use>
  <use href="#glyph0-2" x="481.042969" y="294.938477"></use>
  <use href="#glyph0-5" x="483.042969" y="294.938477"></use>
  <use href="#glyph0-3" x="488.042969" y="294.938477"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-1" x="476.042969" y="312.219727"></use>
  <use href="#glyph0-2" x="481.042969" y="312.219727"></use>
  <use href="#glyph0-3" x="483.042969" y="312.219727"></use>
  <use href="#glyph0-1" x="488.042969" y="312.219727"></use>
</g>
<g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
  <use href="#glyph0-1" x="476.042969" y="329.49707"></use>
  <use href="#glyph0-2" x="481.042969" y="329.49707"></use>
  <use href="#glyph0-6" x="483.042969" y="329.49707"></use>
  <use href="#glyph0-3" x="488.042969" y="329.49707"></use>
</g>
</g>
</svg>

<p>Any plot (function or object) can be saved to file or converted to BufferedImage object.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb131"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>(r-&gt;clj (plot-&gt;file <span class="st">"notebooks/images/histogram.jpg"</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>                    (<span class="kw">fn</span> [] (hist [<span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span>]</span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">:main</span> <span class="st">"Histogram"</span></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">:xlab</span> <span class="st">"data: [1 1 1 1 2 3 4 5]"</span>))</span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">:width</span> <span class="dv">800</span> <span class="at">:height</span> <span class="dv">400</span> <span class="at">:quality</span> <span class="dv">50</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb132"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:breaks</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span>],</span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a> <span class="at">:counts</span> [<span class="dv">5</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span>],</span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a> <span class="at">:density</span> [<span class="fl">0.625</span> <span class="fl">0.125</span> <span class="fl">0.125</span> <span class="fl">0.125</span>],</span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a> <span class="at">:mids</span> [<span class="fl">1.5</span> <span class="fl">2.5</span> <span class="fl">3.5</span> <span class="fl">4.5</span>],</span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a> <span class="at">:xname</span> [<span class="st">"c(1L, 1L, 1L, 1L, 2L, 3L, 4L, 5L)"</span>],</span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a> <span class="at">:equidist</span> [<span class="va">true</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb133"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>(kind/hiccup [<span class="at">:image</span> {<span class="at">:src</span> <span class="st">"notebooks/images/histogram.jpg"</span>}])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<img src="notebooks/images/histogram.jpg">
<div class="sourceClojure">
<div class="sourceCode" id="cb134"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>(plot-&gt;buffered-image (<span class="kw">fn</span> [] (hist [<span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span>])) <span class="at">:width</span> <span class="dv">222</span> <span class="at">:height</span> <span class="dv">149</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-image">
<img src="clojisr.v1.tutorials.main_files/0.png">
</div>
</section>
<section id="intermediary-representation-as-java-objects." class="level2">
<h2 class="anchored" data-anchor-id="intermediary-representation-as-java-objects.">Intermediary representation as Java objects.</h2>
<p>Clojisr relies on the fact of an intemediary representation of java, as Java objects. This is usually hidden from the user, but may be useful sometimes. In the current implementation, this is based on <a href="https://github.com/s-u/REngine">REngine</a>.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb135"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">import</span> (org.rosuda.REngine REXP REXPInteger REXPDouble))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb136"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>org.rosuda.REngine.REXPDouble</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can convert data between R and Java.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb137"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1:9"</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb138"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>org.rosuda.REngine.REXPInteger</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb139"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (REXPInteger. <span class="dv">1</span>)</span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>    java-&gt;r</span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb140"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can further convert data from the java representation to Clojure.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb141"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1:9"</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb142"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On the opposite direction, we can also convert Clojure data into the Java represenattion.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb143"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (<span class="kw">range</span> <span class="dv">1</span> <span class="dv">10</span>)</span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>    clj-&gt;java</span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb144"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>org.rosuda.REngine.REXPInteger</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb145"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (<span class="kw">range</span> <span class="dv">1</span> <span class="dv">10</span>)</span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>    clj-&gt;java</span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb146"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There is an alternative way of conversion from Java to Clojure, naively converting the internal Java representation to a Clojure data structure. It can be handy when one wants to have plain access to all the metadata (R attributes), etc.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb147"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> <span class="st">"1:9"</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>     r</span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>     r-&gt;java</span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a>     java-&gt;native-clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb148"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb149"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> <span class="st">"data.frame(x=1:3,y=factor('a','a','b'))"</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>     r</span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>     r-&gt;java</span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a>     java-&gt;native-clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb150"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:x</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="at">:y</span> [<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can evaluate R code and immediately return the result as a java object, without ever creating a handle to an R object holding the result:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb151"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1+2"</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>    eval-r-&gt;java</span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb152"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>org.rosuda.REngine.REXPDouble</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb153"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"1+2"</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>    eval-r-&gt;java</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>    (.asDoubles)</span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">vec</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb154"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">3.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="more-data-conversion-examples" class="level2">
<h2 class="anchored" data-anchor-id="more-data-conversion-examples">More data conversion examples</h2>
<p>Convertion between R and Clojure always passes through Java. To stress this, we write it explicitly in the following examples.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb155"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"list(a=1:2,b='hi!')"</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb156"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>], <span class="at">:b</span> [<span class="st">"hi!"</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Partially named lists are also supported</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb157"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"list(a=1:2,'hi!')"</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb158"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>], <span class="dv">1</span> [<span class="st">"hi!"</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb159"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"table(c('a','b','a','b','a','b','a','b'), c(1,1,2,2,3,3,1,1))"</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj</span>
<span id="cb159-5"><a href="#cb159-5" aria-hidden="true" tabindex="-1"></a>    dataset/mapseq-reader</span>
<span id="cb159-6"><a href="#cb159-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb160"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>#{{<span class="dv">0</span> <span class="st">"a"</span>, <span class="dv">1</span> <span class="st">"2"</span>, :$value <span class="dv">2</span>}</span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"b"</span>, <span class="dv">1</span> <span class="st">"3"</span>, :$value <span class="dv">1</span>}</span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"a"</span>, <span class="dv">1</span> <span class="st">"1"</span>, :$value <span class="dv">2</span>}</span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"a"</span>, <span class="dv">1</span> <span class="st">"3"</span>, :$value <span class="dv">1</span>}</span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"b"</span>, <span class="dv">1</span> <span class="st">"2"</span>, :$value <span class="dv">1</span>}</span>
<span id="cb160-6"><a href="#cb160-6" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">0</span> <span class="st">"b"</span>, <span class="dv">1</span> <span class="st">"1"</span>, :$value <span class="dv">1</span>}}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb161"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> {<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>] <span class="at">:b</span> <span class="st">"hi!"</span>}</span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>    clj-&gt;java</span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>    java-&gt;r</span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a>    r-&gt;java</span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a>    java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb162"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>], <span class="at">:b</span> [<span class="st">"hi!"</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb163"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> {<span class="at">:a</span> [<span class="dv">1</span> <span class="dv">2</span>] <span class="at">:b</span> <span class="st">"hi!"</span>}</span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>     clj-&gt;java</span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a>     java-&gt;r</span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a>     ((r <span class="st">"deparse"</span>))</span>
<span id="cb163-5"><a href="#cb163-5" aria-hidden="true" tabindex="-1"></a>     r-&gt;java</span>
<span id="cb163-6"><a href="#cb163-6" aria-hidden="true" tabindex="-1"></a>     java-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb164"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>[<span class="st">"list(a = 1:2, b = </span><span class="sc">\"</span><span class="st">hi!</span><span class="sc">\"</span><span class="st">)"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="basic-types-convertion-clj-r-clj" class="level3">
<h3 class="anchored" data-anchor-id="basic-types-convertion-clj-r-clj">Basic types convertion clj-&gt;r-&gt;clj</h3>
<div class="sourceClojure">
<div class="sourceCode" id="cb165"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> clj-&gt;r-&gt;clj </span>(<span class="kw">comp</span> r-&gt;clj r))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb166"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj <span class="va">nil</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb167"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb168"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj [<span class="dv">10</span> <span class="dv">11</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb169"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">10</span> <span class="dv">11</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb170"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj [<span class="fl">10.0</span> <span class="fl">11.0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb171"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">10.0</span> <span class="fl">11.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb172"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj (<span class="kw">list</span> <span class="fl">10.0</span> <span class="fl">11.0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb173"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">10.0</span> <span class="fl">11.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb174"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>(clj-&gt;r-&gt;clj {<span class="at">:a</span> <span class="dv">1</span> <span class="at">:b</span> <span class="dv">2</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb175"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span>], <span class="at">:b</span> [<span class="dv">2</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="various-r-objects" class="level3">
<h3 class="anchored" data-anchor-id="various-r-objects">Various R objects</h3>
<p>Named list</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb176"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"list(a=1L,b=c(10,20),c='hi!')"</span></span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb177"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:a</span> [<span class="dv">1</span>], <span class="at">:b</span> [<span class="fl">10.0</span> <span class="fl">20.0</span>], <span class="at">:c</span> [<span class="st">"hi!"</span>]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Array of doubles</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb178"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"c(10,20,30)"</span></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb179"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">10.0</span> <span class="fl">20.0</span> <span class="fl">30.0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Array of longs</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb180"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"c(10L,20L,30L)"</span></span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb181"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">10</span> <span class="dv">20</span> <span class="dv">30</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Timeseries</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb182"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="at">'euro</span></span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb182-3"><a href="#cb182-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj</span>
<span id="cb182-4"><a href="#cb182-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">first</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb183"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fl">13.7603</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Pairlist</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb184"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> r.stats/dnorm</span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a>    r.base/formals</span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj</span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">keys</span></span>
<span id="cb184-5"><a href="#cb184-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">sort</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb185"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">:log</span> <span class="at">:mean</span> <span class="at">:sd</span> <span class="at">:x</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>NULL</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb186"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"NULL"</span></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb187"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>TRUE/FALSE</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb188"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="st">"TRUE"</span></span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a>    r</span>
<span id="cb188-3"><a href="#cb188-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb189"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>[<span class="va">true</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="inspecting-r-functions" class="level2">
<h2 class="anchored" data-anchor-id="inspecting-r-functions">Inspecting R functions</h2>
<p>The <code>mean</code> function is defined to expect arguments <code>x</code> and <code>...</code>. These arguments have no default values (thus, its formals have empty symbols as values):</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb190"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="at">'mean</span></span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a>    r.base/formals</span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb191"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:x</span> , <span class="at">:...</span> }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It is an <a href="http://adv-r.had.co.nz/S3.html">S3 generic function</a> function, which we can realize by printing it:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb192"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>(r <span class="at">'mean</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb193"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a>function (x, ...) </span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>UseMethod(<span class="st">"mean"</span>)</span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a>&lt;bytecode: <span class="bn">0x60e4986f07a0</span>&gt;</span>
<span id="cb193-4"><a href="#cb193-4" aria-hidden="true" tabindex="-1"></a>&lt;environment: namespace<span class="at">:base</span>&gt;</span>
<span id="cb193-5"><a href="#cb193-5" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>So, we can expect possibly more details when inspecting its default implementation. Now, we see some arguments that do have default values.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb194"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> <span class="at">'mean.default</span></span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a>    r.base/formals</span>
<span id="cb194-3"><a href="#cb194-3" aria-hidden="true" tabindex="-1"></a>    r-&gt;clj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb195"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:x</span> , <span class="at">:trim</span> [<span class="fl">0.0</span>], <span class="at">:na.rm</span> [<span class="va">false</span>], <span class="at">:...</span> }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="r-function-arglists" class="level2">
<h2 class="anchored" data-anchor-id="r-function-arglists">R-function-arglists</h2>
<p>As we saw earlier, R functions are Clojure functions. The arglists of functions brought up by <code>require-r</code> match the expected arguments. Here are some examples:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb196"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>(require-r</span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a> '[base]</span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a> '[stats]</span>
<span id="cb196-4"><a href="#cb196-4" aria-hidden="true" tabindex="-1"></a> '[grDevices])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb197"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb198"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> [<span class="va">#'r.base/mean,</span> <span class="va">#'r.base/mean-default,</span> <span class="va">#'r.stats/arima0,</span></span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>      <span class="va">#'r.grDevices/dev-off,</span> <span class="va">#'r.base/Sys-info,</span> <span class="va">#'r.base/summary-default</span></span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a>      <span class="co">;; Primitive functions:</span></span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a>      <span class="va">#'r.base/sin,</span> <span class="va">#'r.base/sum</span>]</span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a>     (<span class="kw">map</span> (<span class="kw">fn</span> [f]</span>
<span id="cb198-6"><a href="#cb198-6" aria-hidden="true" tabindex="-1"></a>            (<span class="kw">-&gt;</span> f</span>
<span id="cb198-7"><a href="#cb198-7" aria-hidden="true" tabindex="-1"></a>                <span class="kw">meta</span></span>
<span id="cb198-8"><a href="#cb198-8" aria-hidden="true" tabindex="-1"></a>                (<span class="kw">update</span> <span class="at">:ns</span> (<span class="kw">comp</span> <span class="kw">symbol</span> <span class="kw">str</span>))))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb199"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a>({<span class="at">:arglists</span> ([x &amp; {<span class="at">:keys</span> [...]}]), <span class="at">:name</span> mean, <span class="at">:ns</span> r.base}</span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([x &amp; {<span class="at">:keys</span> [trim na.rm ...]}]),</span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">:name</span> mean-default,</span>
<span id="cb199-4"><a href="#cb199-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">:ns</span> r.base}</span>
<span id="cb199-5"><a href="#cb199-5" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span></span>
<span id="cb199-6"><a href="#cb199-6" aria-hidden="true" tabindex="-1"></a>  ([x</span>
<span id="cb199-7"><a href="#cb199-7" aria-hidden="true" tabindex="-1"></a>    &amp;</span>
<span id="cb199-8"><a href="#cb199-8" aria-hidden="true" tabindex="-1"></a>    {<span class="at">:keys</span></span>
<span id="cb199-9"><a href="#cb199-9" aria-hidden="true" tabindex="-1"></a>     [order</span>
<span id="cb199-10"><a href="#cb199-10" aria-hidden="true" tabindex="-1"></a>      seasonal</span>
<span id="cb199-11"><a href="#cb199-11" aria-hidden="true" tabindex="-1"></a>      xreg</span>
<span id="cb199-12"><a href="#cb199-12" aria-hidden="true" tabindex="-1"></a>      include.mean</span>
<span id="cb199-13"><a href="#cb199-13" aria-hidden="true" tabindex="-1"></a>      delta</span>
<span id="cb199-14"><a href="#cb199-14" aria-hidden="true" tabindex="-1"></a>      transform.pars</span>
<span id="cb199-15"><a href="#cb199-15" aria-hidden="true" tabindex="-1"></a>      fixed</span>
<span id="cb199-16"><a href="#cb199-16" aria-hidden="true" tabindex="-1"></a>      init</span>
<span id="cb199-17"><a href="#cb199-17" aria-hidden="true" tabindex="-1"></a>      method</span>
<span id="cb199-18"><a href="#cb199-18" aria-hidden="true" tabindex="-1"></a>      n.<span class="kw">cond</span></span>
<span id="cb199-19"><a href="#cb199-19" aria-hidden="true" tabindex="-1"></a>      optim.control]}]),</span>
<span id="cb199-20"><a href="#cb199-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">:name</span> arima0,</span>
<span id="cb199-21"><a href="#cb199-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">:ns</span> r.stats}</span>
<span id="cb199-22"><a href="#cb199-22" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([&amp; {<span class="at">:keys</span> [which]}]), <span class="at">:name</span> dev-off, <span class="at">:ns</span> r.grDevices}</span>
<span id="cb199-23"><a href="#cb199-23" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([]), <span class="at">:name</span> Sys-info, <span class="at">:ns</span> r.base}</span>
<span id="cb199-24"><a href="#cb199-24" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([object &amp; {<span class="at">:keys</span> [... digits quantile.<span class="kw">type</span>]}]),</span>
<span id="cb199-25"><a href="#cb199-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">:name</span> summary-default,</span>
<span id="cb199-26"><a href="#cb199-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">:ns</span> r.base}</span>
<span id="cb199-27"><a href="#cb199-27" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([x]), <span class="at">:name</span> sin, <span class="at">:ns</span> r.base}</span>
<span id="cb199-28"><a href="#cb199-28" aria-hidden="true" tabindex="-1"></a> {<span class="at">:arglists</span> ([&amp; {<span class="at">:keys</span> [... na.rm]}]), <span class="at">:name</span> sum, <span class="at">:ns</span> r.base})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="background-color:grey;height:2px;width:100%;"></div>
<div><pre><small><small>source: notebooks/clojisr/v1/tutorials/main.clj</small></small></pre></div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>